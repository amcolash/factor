{"version":3,"mappings":"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","names":["registerSW","options","immediate","onNeedRefresh","onOfflineReady","onRegistered","onRegisteredSW","onRegisterError","wb","registerPromise","sendSkipWaitingMessage","updateServiceWorker","_reloadPage","register","__vitePreload","n","Workbox","e","onNeedRefreshCalled","showSkipWaitingPrompt","event","r","CodeContext","createContext","useOnline","online","setOnline","useState","useEffect","onStatus","firebaseConfig","app","initializeApp","auth","getAuth","db","initializeFirestore","persistentLocalCache","useUserData","user","useAuthState","userRef","doc","value","loading","error","useDocument","useVisibilityChange","callback","listener","exportKeys","token","data","toastId","toast","keys","i","key","decoded","decrypt","blob","url","a","importKeys","input","file","reader","skipped","imported","name","k","encryptedSecret","encrypt","updateDoc","arrayUnion","err","useUUID","uuid","logo","Logo","className","jsx","image","twMerge","LogoPage","children","props","twJoin","Logout","signOut","useSignOut","terminate","clearIndexedDbPersistence","FaSignOutAlt","PinCode","pinRef","encryptedCode","unlock","_a","onCodeEntered","code","decrypted","PinField","challenge","userHandle","currentUser","publicKey","credential","arrayBufferToBase64","authenticate","credentialId","id","base64ToArrayBuffer","arrayBufferToString","buffer","uint8Array","array","base64","binaryString","length","bufferView","WebauthnEnroll","biometricRegister","pin","decryptedSecret","FaFingerprint","useEffectOnce","useOnHold","onClick","onHold","duration","longPress","useLongPress","reason","LongPressCallbackReason","WebauthnLogin","webauthn","visible","biometricLogin","bindHold","arrayRemove","Lock","useRef","jsxs","node","Login","signInWithGoogle","useSignInWithGoogle","GoogleLogin","signin","Menu","lock","updateCode","editMode","setEditMode","setEditKey","buttonClass","buttonColor","bindLock","bindPlus","Fragment","FaUpload","FaSave","FaPlus","FaLock","useRefreshTimer","timestamp","setTimestamp","time","setTime","timeInt","timestampInt","tailwindConfig","useTailwind","useMemo","resolveConfig","bastillion","betterment","carta","guideline","idme","justworks","uwcu","getIcon","icon","icons","levenshtein","b","icons.siFacebook","icons.siSynology","darkColor","lightColor","getColors","background","fill","AppIcon","colors","imgClass","QR","close","onScan","FaTimes","Scanner","text","secret","EditKey","setName","setSecret","scan","setScan","masked","setMasked","updating","setUpdating","useContext","editing","addKey","FaEyeSlash","FaEye","FaQrcode","Modal","onClose","title","useCopyToClipboard","copiedText","setCopiedText","useCallback","useIsMobile","isMobile","setIsMobile","handleResize","TokenCard","onEdit","encryptionToken","hidden","setHidden","copy","copyToken","timeChunk","TOTP","result","TokenList","userData","editKey","search","setSearch","keyToEdit","setKeyToEdit","tailwind","remainingMs","remainingSeconds","elapsedSeconds","tokens","ref","progressOffset","CircularProgressbar","buildStyles","App","Authorized","promptPin","tries","OnlineStatus","FaBroadcastTower","setToken","setDoc","updatePin","Buffer","isBrowser","nav","Container","StrictMode","ToastContainer","Zoom","onLoad","updateToast","updateSW","createRoot"],"ignoreList":[],"sources":["../../../../../../../@vite-plugin-pwa/virtual:pwa-register","../../src/contexts/CodeContext.tsx","../../src/hooks/useOnline.ts","../../src/util/firebase.ts","../../src/hooks/useUserData.tsx","../../src/hooks/useVisibilityChange.ts","../../src/util/keys.ts","../../src/hooks/useUUID.ts","../../src/images/logo.png","../../src/components/Logo.tsx","../../src/components/Lock/Logout.tsx","../../src/components/Lock/PinCode.tsx","../../src/util/webauthn.ts","../../src/components/Lock/WebauthnEnroll.tsx","../../src/hooks/useEffectOnce.ts","../../src/hooks/useOnHold.ts","../../src/components/Lock/WebauthnLogin.tsx","../../src/components/Lock/Lock.tsx","../../src/components/Login.tsx","../../src/components/Menu.tsx","../../src/hooks/useRefreshTimer.tsx","../../tailwind.config.ts","../../src/hooks/useTailwind.ts","../../src/images/bastillion.png","../../src/images/betterment.png","../../src/images/carta.png","../../src/images/guideline.png","../../src/images/id.me.png","../../src/images/justworks.jpg","../../src/images/uwcu.png","../../src/components/AppIcon.tsx","../../src/components/QR.tsx","../../src/components/EditKey.tsx","../../src/components/Modal.tsx","../../src/hooks/useCopyToClipboard.ts","../../src/hooks/useIsMobile.ts","../../src/components/TokenCard.tsx","../../src/components/TokenList.tsx","../../src/components/App.tsx","../../src/index.tsx"],"sourcesContent":["// src/client/build/register.ts\nvar autoUpdateMode = \"false\";\nvar selfDestroying = \"false\";\nvar auto = autoUpdateMode === \"true\";\nvar autoDestroy = selfDestroying === \"true\";\nfunction registerSW(options = {}) {\n  const {\n    immediate = false,\n    onNeedRefresh,\n    onOfflineReady,\n    onRegistered,\n    onRegisteredSW,\n    onRegisterError\n  } = options;\n  let wb;\n  let registerPromise;\n  let sendSkipWaitingMessage;\n  const updateServiceWorker = async (_reloadPage = true) => {\n    await registerPromise;\n    if (!auto) {\n      await sendSkipWaitingMessage?.();\n    }\n  };\n  async function register() {\n    if (\"serviceWorker\" in navigator) {\n      wb = await import(\"workbox-window\").then(({ Workbox }) => {\n        return new Workbox(\"/factor/sw.js\", { scope: \"/factor/\", type: \"classic\" });\n      }).catch((e) => {\n        onRegisterError?.(e);\n        return void 0;\n      });\n      if (!wb)\n        return;\n      sendSkipWaitingMessage = async () => {\n        await wb?.messageSkipWaiting();\n      };\n      if (!autoDestroy) {\n        if (auto) {\n          wb.addEventListener(\"activated\", (event) => {\n            if (event.isUpdate || event.isExternal)\n              window.location.reload();\n          });\n          wb.addEventListener(\"installed\", (event) => {\n            if (!event.isUpdate) {\n              onOfflineReady?.();\n            }\n          });\n        } else {\n          let onNeedRefreshCalled = false;\n          const showSkipWaitingPrompt = () => {\n            onNeedRefreshCalled = true;\n            wb?.addEventListener(\"controlling\", (event) => {\n              if (event.isUpdate)\n                window.location.reload();\n            });\n            onNeedRefresh?.();\n          };\n          wb.addEventListener(\"installed\", (event) => {\n            if (typeof event.isUpdate === \"undefined\") {\n              if (typeof event.isExternal !== \"undefined\") {\n                if (event.isExternal)\n                  showSkipWaitingPrompt();\n                else\n                  !onNeedRefreshCalled && onOfflineReady?.();\n              } else {\n                if (event.isExternal)\n                  window.location.reload();\n                else\n                  !onNeedRefreshCalled && onOfflineReady?.();\n              }\n            } else if (!event.isUpdate) {\n              onOfflineReady?.();\n            }\n          });\n          wb.addEventListener(\"waiting\", showSkipWaitingPrompt);\n          wb.addEventListener(\"externalwaiting\", showSkipWaitingPrompt);\n        }\n      }\n      wb.register({ immediate }).then((r) => {\n        if (onRegisteredSW)\n          onRegisteredSW(\"/factor/sw.js\", r);\n        else\n          onRegistered?.(r);\n      }).catch((e) => {\n        onRegisterError?.(e);\n      });\n    }\n  }\n  registerPromise = register();\n  return updateServiceWorker;\n}\nexport {\n  registerSW\n};\n","import { createContext } from 'react';\n\nexport const CodeContext = createContext<string | undefined>(undefined);\n","import { useEffect, useState } from 'react';\n\nexport function useOnline(): boolean {\n  const [online, setOnline] = useState(navigator.onLine);\n\n  useEffect(() => {\n    function onStatus() {\n      setOnline(navigator.onLine);\n    }\n\n    window.addEventListener('online', onStatus);\n    window.addEventListener('offline', onStatus);\n\n    return () => {\n      window.removeEventListener('online', onStatus);\n      window.removeEventListener('offline', onStatus);\n    };\n  }, []);\n\n  return online;\n}\n","import { initializeApp } from 'firebase/app';\nimport { getAuth } from 'firebase/auth';\nimport { initializeFirestore, persistentLocalCache } from 'firebase/firestore';\n\n// Your web app's Firebase configuration\nconst firebaseConfig = {\n  apiKey: 'AIzaSyDMQ4jffBbrLTjdhy_qS4GeZdbYtzEKHp4',\n  authDomain: 'factor-97c20.firebaseapp.com',\n  projectId: 'factor-97c20',\n  storageBucket: 'factor-97c20.appspot.com',\n  messagingSenderId: '524844196447',\n  appId: '1:524844196447:web:9d5f59006ec0b8e68d31ea',\n};\n\n// Initialize Firebase\nexport const app = initializeApp(firebaseConfig);\nexport const auth = getAuth(app);\nexport const db = initializeFirestore(app, { localCache: persistentLocalCache() });\n","import { DocumentReference, doc } from 'firebase/firestore';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { useDocument } from 'react-firebase-hooks/firestore';\n\nimport { auth, db } from '../util/firebase';\n\nexport interface UserData {\n  email: string;\n  keys: Key[];\n  code: string;\n  webauthn: Auth[];\n}\n\nexport interface Auth {\n  credentialId: string;\n  uuid: string;\n  secret: string;\n  userAgent: string;\n}\n\nexport interface Key {\n  name: string;\n  secret: string;\n}\n\nexport function useUserData() {\n  const [user] = useAuthState(auth);\n  const userRef = doc(db, 'users', user?.uid || '') as DocumentReference<UserData>;\n  const [value, loading, error] = useDocument(userRef);\n\n  return { value, loading, error, userRef };\n}\n","import { useEffect } from 'react';\n\nexport function useVisibilityChange(callback: (visible: boolean) => void) {\n  useEffect(() => {\n    const listener = () => callback(!document.hidden);\n\n    document.addEventListener('visibilitychange', listener);\n    return () => document.removeEventListener('visibilitychange', listener);\n  }, [callback]);\n}\n","import { DocumentReference, arrayUnion, updateDoc } from '@firebase/firestore';\nimport { decrypt, encrypt } from '@metamask/browser-passworder';\nimport { toast } from 'react-toastify';\n\nimport { Key, UserData } from '../hooks/useUserData';\n\nexport async function exportKeys(token: string, data: UserData): Promise<void> {\n  const toastId = toast('Exporting keys ⏳️\\nThis might take some time...', {\n    autoClose: false,\n    progress: 1 / data.keys.length,\n    hideProgressBar: false,\n  });\n\n  const keys = [];\n\n  for (let i = 0; i < data.keys.length; i++) {\n    const key = data.keys[i];\n    const decoded = (await decrypt(token, key.secret)) as { secret: string };\n    keys.push({ name: key.name, secret: decoded.secret });\n\n    toast.update(toastId, { progress: i / data.keys.length });\n  }\n\n  toast.done(toastId);\n\n  const blob = new Blob([JSON.stringify(keys)], { type: 'text/json' });\n\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement('a');\n  a.href = url;\n  a.download = 'keys.json';\n  a.click();\n  URL.revokeObjectURL(url);\n}\n\nexport async function importKeys(token: string, data: UserData, userRef: DocumentReference): Promise<void> {\n  const input = document.createElement('input');\n  input.type = 'file';\n  input.addEventListener('change', (e) => {\n    if (input.files && input.files[0]) {\n      const file = input.files[0];\n      // Read JSON file\n      const reader = new FileReader();\n      reader.onload = async (e) => {\n        try {\n          if (e.target) {\n            const keys: Key[] = JSON.parse(e.target.result as string);\n\n            let skipped = 0;\n            let imported = 0;\n            for (const key of keys) {\n              if (!key.name || !key.secret) throw 'Invalid file format';\n\n              const name = key.name;\n              if (data.keys.some((k) => k.name.toLowerCase() === name.toLowerCase())) {\n                skipped++;\n              } else {\n                const encryptedSecret = await encrypt(token, key.secret);\n                await updateDoc(userRef, { keys: arrayUnion({ name, secret: encryptedSecret }) });\n                imported++;\n              }\n            }\n\n            if (skipped > 0) toast.warning(`${skipped} keys were skipped because they already exist`);\n            if (imported > 0) toast.success(`Imported ${keys.length - skipped} keys`);\n          }\n        } catch (err) {\n          console.error(err);\n          toast.error((err as any) || 'Error importing keys');\n        }\n      };\n\n      reader.readAsText(file);\n    }\n  });\n  input.click();\n}\n","const key = 'device-uuid';\n\nexport function useUUID(): string {\n  let uuid = localStorage.getItem(key);\n  if (!uuid) {\n    uuid = crypto.getRandomValues(new Uint32Array(32)).toString();\n    localStorage.setItem(key, uuid);\n  }\n\n  return uuid;\n}\n","export default \"__VITE_ASSET__DacSPZ0B__\"","import { twJoin, twMerge } from 'tailwind-merge';\n\nimport image from '../images/logo.png';\n\nexport function Logo({ className }: { className?: string }) {\n  return <img src={image} className={twMerge('h-52', className)} />;\n}\n\nexport function LogoPage({\n  className,\n  children,\n  ...props\n}: {\n  className?: string;\n  children?: React.ReactNode;\n  [key: string]: any;\n}) {\n  return (\n    <div className=\"w-screen h-[100svh] flex flex-col justify-center items-center gap-5\" {...props}>\n      <h1 className=\"text-center m-0 -mb-1\">Factor</h1>\n      <Logo className={className} />\n      {children}\n\n      <span\n        className={twJoin(\n          'absolute bottom-1.5 right-2 leading-tight whitespace-pre text-right',\n          process.env.NODE_ENV === 'production' ? 'text-[8px]' : 'text-sm'\n        )}\n      >\n        {new Date(__BUILD_TIME__).toLocaleString().replace(', ', '\\n')}\n      </span>\n    </div>\n  );\n}\n","import { clearIndexedDbPersistence, terminate } from 'firebase/firestore';\nimport { useSignOut } from 'react-firebase-hooks/auth';\nimport { FaSignOutAlt } from 'react-icons/fa';\n\nimport { auth, db } from '../../util/firebase';\n\nexport function Logout() {\n  const [signOut] = useSignOut(auth);\n\n  return (\n    <button\n      className=\"icon bg-danger\"\n      onClick={async () => {\n        try {\n          await signOut();\n          await terminate(db);\n          await clearIndexedDbPersistence(db);\n\n          window.location.reload();\n        } catch (err) {\n          console.error(err);\n        }\n      }}\n    >\n      <FaSignOutAlt />\n    </button>\n  );\n}\n","import { decrypt } from '@metamask/browser-passworder';\nimport { useEffect } from 'react';\nimport PinField from 'react-pin-field';\nimport { toast } from 'react-toastify';\nimport { twMerge } from 'tailwind-merge';\n\nlet unlocked = false;\nexport function PinCode({\n  pinRef,\n  encryptedCode,\n  unlock,\n  className,\n}: {\n  pinRef: React.RefObject<HTMLInputElement[]>;\n  encryptedCode: string;\n  unlock: (code: string) => void;\n  className?: string;\n}) {\n  useEffect(() => {\n    if (process.env.NODE_ENV === 'development' && !unlocked) {\n      onCodeEntered(import.meta.env.VITE_CODE);\n      unlocked = true;\n    } else {\n      setTimeout(() => pinRef.current?.[0].focus(), 250);\n    }\n  }, []);\n\n  const onCodeEntered = async (code: string) => {\n    if (code?.length === 6) {\n      try {\n        const decrypted = (await decrypt(code, encryptedCode)) as { token: string };\n        unlock(decrypted.token);\n      } catch (err) {\n        console.log(err, code);\n        toast.error('Invalid code');\n      }\n    }\n\n    if (pinRef.current) {\n      pinRef.current.forEach((input) => {\n        input.value = '';\n      });\n      pinRef.current[0].focus();\n    }\n  };\n\n  return (\n    <div className={twMerge('flex', className)}>\n      <PinField\n        length={6}\n        className=\"border border-slate-500 w-10 sm:w-12 h-14 m-1.5 rounded-lg text-center text-6xl p-1\"\n        type=\"password\"\n        inputMode=\"numeric\"\n        ref={pinRef}\n        onComplete={onCodeEntered}\n      />\n    </div>\n  );\n}\n","// A large portion of this code was written by chatgpt\nimport { auth } from './firebase';\n\nconst challenge = Uint8Array.from(window.crypto.getRandomValues(new Uint8Array(32)));\n\nexport interface Credential {\n  userHandle: string;\n  credentialId: string;\n}\n\nexport async function register(): Promise<Credential | null> {\n  try {\n    const userHandle = Uint8Array.from(window.crypto.getRandomValues(new Uint8Array(32)));\n    const currentUser = auth.currentUser;\n    const publicKey: PublicKeyCredentialCreationOptions = {\n      challenge, // Not really necessary since this is 100% local\n      rp: {\n        name: 'Factor',\n      },\n      user: {\n        id: userHandle, // This is both our userid, but also our encryption secret\n        name: currentUser?.email || 'user@email.com',\n        displayName: currentUser?.displayName || 'User',\n      },\n\n      pubKeyCredParams: [{ type: 'public-key', alg: -7 }],\n\n      authenticatorSelection: {\n        requireResidentKey: true,\n      },\n    };\n\n    const credential = (await navigator.credentials.create({ publicKey })) as PublicKeyCredential;\n\n    return { userHandle: arrayBufferToBase64(userHandle), credentialId: arrayBufferToBase64(credential.rawId) };\n  } catch (error) {\n    console.error('Error registering credential:', error);\n  }\n\n  return null;\n}\n\nexport async function authenticate(credentialId: string): Promise<string | null> {\n  try {\n    const id = base64ToArrayBuffer(credentialId);\n    const publicKey: PublicKeyCredentialRequestOptions = {\n      challenge,\n      allowCredentials: [{ type: 'public-key', id }],\n    };\n\n    const credential = (await navigator.credentials.get({ publicKey })) as PublicKeyCredential;\n\n    if (credential?.response) {\n      return arrayBufferToBase64((credential.response as any).userHandle);\n    }\n  } catch (error) {\n    console.error('Error authenticating:', error);\n  }\n\n  return null;\n}\n\nfunction arrayBufferToString(buffer: ArrayBuffer): string {\n  const uint8Array = new Uint8Array(buffer);\n  const array = Array.from(uint8Array);\n  return String.fromCharCode.apply(null, array);\n}\n\nfunction arrayBufferToBase64(buffer: ArrayBuffer): string {\n  return btoa(arrayBufferToString(buffer));\n}\n\nfunction base64ToArrayBuffer(base64: string): ArrayBuffer {\n  const binaryString = atob(base64);\n  const length = binaryString.length;\n  const buffer = new ArrayBuffer(length);\n  const bufferView = new Uint8Array(buffer);\n  for (let i = 0; i < length; i++) {\n    bufferView[i] = binaryString.charCodeAt(i);\n  }\n  return buffer;\n}\n","import { decrypt, encrypt } from '@metamask/browser-passworder';\nimport { DocumentReference, arrayUnion, updateDoc } from 'firebase/firestore';\nimport { FaFingerprint } from 'react-icons/fa';\nimport { toast } from 'react-toastify';\n\nimport { useUUID } from '../../hooks/useUUID';\nimport { register } from '../../util/webauthn';\n\nexport function WebauthnEnroll({ userRef, encryptedCode }: { userRef: DocumentReference; encryptedCode: string }) {\n  const uuid = useUUID();\n\n  const biometricRegister = async () => {\n    try {\n      const pin = prompt('Enter pin to register biometric login') || '';\n      const decryptedSecret = (await decrypt(pin, encryptedCode)) as { token: string };\n\n      const credential = await register();\n      const userHandle = credential?.userHandle || '';\n\n      const encryptedSecret = await encrypt(userHandle, decryptedSecret);\n\n      updateDoc(userRef, {\n        webauthn: arrayUnion({\n          credentialId: credential?.credentialId,\n          uuid,\n          secret: encryptedSecret,\n          userAgent: navigator.userAgent,\n        }),\n      });\n\n      toast.success('Successfully enrolled biometric login');\n    } catch (err) {\n      console.error(err);\n      toast.error('Error registering fingerprint');\n    }\n  };\n\n  return (\n    <button className=\"icon bg-primary text-slate-200\" onClick={biometricRegister}>\n      <FaFingerprint />\n    </button>\n  );\n}\n","import { useEffect } from 'react';\n\nconst keys = new Set();\nexport function useEffectOnce(key: string, callback: () => void) {\n  useEffect(() => {\n    if (keys.has(key)) return;\n\n    callback();\n    keys.add(key);\n  }, []);\n}\n","import { LongPressCallbackReason, useLongPress } from 'use-long-press';\n\nexport function useOnHold(onClick: () => void, onHold: () => void, duration: number = 600) {\n  const longPress = useLongPress(onClick, {\n    threshold: duration,\n    onCancel: (e, { reason }) => {\n      if (reason === LongPressCallbackReason.CancelledByRelease) {\n        onHold();\n      }\n    },\n  });\n\n  return () => {\n    return {\n      onKeyDown: (e: any) => {\n        if (e.key === 'Enter' || e.key === ' ') onClick();\n      },\n      ...longPress(),\n    };\n  };\n}\n","import { decrypt } from '@metamask/browser-passworder';\nimport { DocumentReference, arrayRemove, updateDoc } from 'firebase/firestore';\nimport { FaFingerprint } from 'react-icons/fa';\nimport { toast } from 'react-toastify';\n\nimport { useEffectOnce } from '../../hooks/useEffectOnce';\nimport { useOnHold } from '../../hooks/useOnHold';\nimport { Auth } from '../../hooks/useUserData';\nimport { useVisibilityChange } from '../../hooks/useVisibilityChange';\nimport { authenticate } from '../../util/webauthn';\n\nexport function WebauthnLogin({\n  webauthn,\n  userRef,\n  unlock,\n}: {\n  webauthn: Auth;\n  userRef: DocumentReference;\n  unlock: (code: string) => void;\n}) {\n  useVisibilityChange((visible) => {\n    if (visible && webauthn) biometricLogin();\n  });\n\n  // Attempt to login with biometric auth on startup, only once\n  useEffectOnce('webauthn', () => {\n    if (webauthn) {\n      biometricLogin();\n    }\n  });\n\n  const bindHold = useOnHold(\n    () => {\n      if (webauthn && confirm('Reset Biometric Auth?')) {\n        updateDoc(userRef, {\n          webauthn: arrayRemove({ ...webauthn }),\n        });\n      }\n    },\n    () => biometricLogin(),\n    3000\n  );\n\n  const biometricLogin = async () => {\n    try {\n      if (!webauthn) throw 'webauthn not defined';\n\n      const userHandle = await authenticate(webauthn.credentialId).catch(console.error);\n      const decryptedSecret = (await decrypt(userHandle || '', webauthn.secret)) as { token: string };\n\n      unlock(decryptedSecret.token);\n    } catch (err) {\n      console.error(err);\n      toast.error('Invalid biometric login');\n    }\n  };\n\n  return (\n    <button className=\"p-3 rounded-full bg-tertiary text-slate-200 border-2 border-slate-600\" {...bindHold()}>\n      <FaFingerprint size={30} />\n    </button>\n  );\n}\n","import { DocumentReference } from 'firebase/firestore';\nimport { useRef } from 'react';\n\n// import { OS, useOsType } from '../../hooks/useOsType';\nimport { useUUID } from '../../hooks/useUUID';\nimport { UserData } from '../../hooks/useUserData';\nimport { LogoPage } from '../Logo';\nimport { Logout } from './Logout';\nimport { PinCode } from './PinCode';\nimport { WebauthnEnroll } from './WebauthnEnroll';\nimport { WebauthnLogin } from './WebauthnLogin';\n\nexport function Lock({\n  unlock,\n  encryptedCode,\n  data,\n  userRef,\n}: {\n  unlock: (code: string) => void;\n  encryptedCode: string;\n  data?: UserData;\n  userRef: DocumentReference;\n}) {\n  const pinRef = useRef<HTMLInputElement[]>(null);\n  const uuid = useUUID();\n  // const os = useOsType();\n\n  // For now, always have option to sign up with webauthn\n  const webauthnEnabled = true;\n\n  // const devEnabled = true;\n  // TODO: Figure out a better way to determine when to show webauthn button\n  // const webauthnEnabled =\n  //   navigator.credentials &&\n  //   (os === OS.Android || os === OS.iOS || os === OS.Mac || (devEnabled && process.env.NODE_ENV === 'development'));\n  const webauthn = data?.webauthn?.find((a) => a.uuid === uuid);\n\n  return (\n    <LogoPage\n      onClick={(e: any) => {\n        const node = e.target?.nodeName;\n        if (pinRef.current && (node === 'DIV' || node === 'IMG' || node === 'H1')) pinRef.current[0].focus();\n      }}\n      style={{ marginTop: 'calc(-1 * env(keyboard-inset-height) / 2)' }}\n    >\n      <div className=\"flex fixed top-4 right-4 gap-2\">\n        {webauthnEnabled && !webauthn && <WebauthnEnroll encryptedCode={encryptedCode} userRef={userRef} />}\n        <Logout />\n      </div>\n\n      <PinCode pinRef={pinRef} encryptedCode={encryptedCode} unlock={unlock} />\n\n      {webauthnEnabled && webauthn && <WebauthnLogin unlock={unlock} userRef={userRef} webauthn={webauthn} />}\n    </LogoPage>\n  );\n}\n","import { useAuthState, useSignInWithGoogle } from 'react-firebase-hooks/auth';\n\nimport { auth } from '../util/firebase';\nimport './Login.css';\n\nexport function Login() {\n  const [user] = useAuthState(auth);\n  const [signInWithGoogle, , loading, error] = useSignInWithGoogle(auth);\n\n  return (\n    <div className=\"flex justify-center items-center flex-col\">\n      {!user && !loading && <GoogleLogin signin={() => signInWithGoogle()} />}\n\n      {loading && <p>Loading...</p>}\n      {error && <p>Error: {error.message}</p>}\n    </div>\n  );\n}\n\n// Button generated using https://developers.google.com/identity/branding-guidelines\nexport function GoogleLogin({ signin }: { signin: () => void }) {\n  return (\n    <button className=\"gsi-material-button\" onClick={signin}>\n      <div className=\"gsi-material-button-state\"></div>\n      <div className=\"gsi-material-button-content-wrapper\">\n        <div className=\"gsi-material-button-icon\">\n          <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\" style={{ display: 'block' }}>\n            <path\n              fill=\"#EA4335\"\n              d=\"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z\"\n            ></path>\n            <path\n              fill=\"#4285F4\"\n              d=\"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z\"\n            ></path>\n            <path\n              fill=\"#FBBC05\"\n              d=\"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z\"\n            ></path>\n            <path\n              fill=\"#34A853\"\n              d=\"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z\"\n            ></path>\n            <path fill=\"none\" d=\"M0 0h48v48H0z\"></path>\n          </svg>\n        </div>\n        <span className=\"gsi-material-button-contents\">Sign in with Google</span>\n        <span style={{ display: 'none' }}>Sign in with Google</span>\n      </div>\n    </button>\n  );\n}\n","import { FaLock, FaPlus, FaSave, FaUpload } from 'react-icons/fa';\nimport { twJoin } from 'tailwind-merge';\n\nimport { useOnHold } from '../hooks/useOnHold';\n\nexport function Menu({\n  lock,\n  updateCode,\n  editMode,\n  setEditMode,\n  setEditKey,\n  exportKeys,\n  importKeys,\n}: {\n  lock: () => void;\n  updateCode: () => void;\n  editMode: boolean;\n  setEditMode: (value: boolean) => void;\n  setEditKey: (value: boolean) => void;\n  exportKeys: () => void;\n  importKeys: () => void;\n}) {\n  const buttonClass = 'p-4 rounded-full ';\n  const buttonColor = buttonClass + ' !bg-slate-800 !text-primary';\n\n  const bindLock = useOnHold(updateCode, lock);\n  const bindPlus = useOnHold(\n    () => setEditMode(!editMode),\n    () => {\n      if (editMode) {\n        setEditMode(false);\n      } else {\n        setEditKey(true);\n      }\n    }\n  );\n\n  return (\n    <div className=\"fixed bottom-8 right-8 flex gap-4 z-20\">\n      {editMode && (\n        <>\n          <button className={buttonColor} onClick={() => importKeys()}>\n            <FaUpload />\n          </button>\n          <button className={buttonColor + ' mr-4'} onClick={() => exportKeys()}>\n            <FaSave />\n          </button>\n        </>\n      )}\n      <button className={twJoin(buttonColor, editMode && 'rotate-45')} {...bindPlus()}>\n        <FaPlus />\n      </button>\n      <button className={twJoin('transition-transform', buttonClass)} {...bindLock()}>\n        <FaLock />\n      </button>\n    </div>\n  );\n}\n","import { useEffect, useState } from 'react';\n\nexport function useRefreshTimer() {\n  const [timestamp, setTimestamp] = useState(new Date());\n  const [time, setTime] = useState(new Date());\n\n  useEffect(() => {\n    // 1 second refresh\n    const timeInt: NodeJS.Timeout = setInterval(() => setTime(new Date()), 1000);\n\n    // 30 second refresh (updated at 0 seconds, 30 seconds, 60 seconds, etc.)\n    let timestampInt: NodeJS.Timeout;\n    setTimeout(\n      () => {\n        setTimestamp(new Date());\n        timestampInt = setInterval(() => setTimestamp(new Date()), 30000);\n      },\n      30000 - (new Date().getTime() % 30000)\n    );\n\n    return () => {\n      if (timestampInt) clearInterval(timestampInt);\n      clearInterval(timeInt);\n    };\n  }, []);\n\n  return { time, timestamp };\n}\n","import type { Config } from 'tailwindcss';\n\nexport default {\n  content: ['./index.html', './src/**/*.{js,ts,jsx,tsx}'],\n  theme: {\n    extend: {\n      colors: {\n        primary: '#4b888d',\n        secondary: '#051524',\n        tertiary: '#2c2155',\n        danger: '#f07f7b',\n      },\n      keyframes: {\n        wiggle: {\n          '0%, 100%': { transform: 'rotate(-0.5deg)' },\n          '50%': { transform: 'rotate(0.5deg)' },\n        },\n      },\n      animation: {\n        wiggle: 'wiggle 400ms ease-in-out infinite',\n      },\n    },\n  },\n  plugins: [],\n} satisfies Config;\n","// From https://stackoverflow.com/a/77346945/2303432\nimport { useMemo } from 'react';\nimport resolveConfig from 'tailwindcss/resolveConfig';\n\nimport tailwindConfig from '../../tailwind.config';\n\nexport function useTailwind() {\n  const tailwind = useMemo(() => resolveConfig(tailwindConfig), [tailwindConfig]);\n\n  return tailwind;\n}\n","export default \"__VITE_ASSET__99MNPCbu__\"","export default \"__VITE_ASSET__CrsehJcA__\"","export default \"data:image/png;base64,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\"","export default \"__VITE_ASSET__BLZOQSg___\"","export default \"__VITE_ASSET__DCoqmqOO__\"","export default \"__VITE_ASSET__B7uRQWw___\"","export default \"__VITE_ASSET__BV6AmmmG__\"","import levenshtein from 'js-levenshtein';\nimport { FaLock } from 'react-icons/fa';\nimport * as icons from 'simple-icons';\nimport { twJoin } from 'tailwind-merge';\n\nimport bastillion from '../images/bastillion.png';\nimport betterment from '../images/betterment.png';\nimport carta from '../images/carta.png';\nimport guideline from '../images/guideline.png';\nimport idme from '../images/id.me.png';\nimport justworks from '../images/justworks.jpg';\nimport uwcu from '../images/uwcu.png';\n\nenum IconType {\n  Icon = 'Icon',\n  Image = 'Image',\n}\n\ninterface Icon {\n  svg: string;\n  hex: string;\n  title: string;\n  type: IconType.Icon;\n  padding?: boolean;\n}\n\ninterface Image {\n  url: string;\n  padding?: boolean;\n  type: IconType.Image;\n}\n\nfunction getIcon(name?: string): Icon | Image | undefined {\n  if (!name) return undefined;\n\n  let icon = Object.entries(icons)\n    .filter(\n      (e) =>\n        name.toLowerCase().includes(e[1].title.toLowerCase()) &&\n        levenshtein(name.toLowerCase(), e[1].title.toLowerCase()) < name.length / 2\n    )\n    .sort((a, b) => {\n      return (\n        levenshtein(name.toLowerCase(), a[1].title.toLowerCase()) -\n        levenshtein(name.toLowerCase(), b[1].title.toLowerCase())\n      );\n    })[0];\n\n  // handle one-off cases\n  switch (name.toLowerCase()) {\n    case 'bastillion':\n      return { url: bastillion, padding: true, type: IconType.Image };\n    case 'betterment':\n      return { url: betterment, type: IconType.Image };\n    case 'carta':\n      return { url: carta, type: IconType.Image };\n    case 'facebook':\n      return { ...icons.siFacebook, padding: false, type: IconType.Icon };\n    case 'guideline':\n      return { url: guideline, type: IconType.Image };\n    case 'id.me':\n      return { url: idme, type: IconType.Image };\n    case 'justworks':\n      return { url: justworks, type: IconType.Image };\n    case 'nas':\n      return { ...icons.siSynology, type: IconType.Icon };\n    case 'uw credit union':\n    case 'uwcu':\n      return { url: uwcu, padding: true, type: IconType.Image };\n    default:\n      break;\n  }\n\n  return icon ? { ...icon[1], type: IconType.Icon, padding: true } : undefined;\n}\n\nconst darkColor = 'bg-slate-900';\nconst lightColor = 'bg-slate-800';\nfunction getColors(i?: Icon | Image): { background: string; fill?: string } {\n  if (!i || i.type === IconType.Image) return { background: darkColor, fill: lightColor };\n\n  const icon = i as Icon;\n  let background = darkColor;\n  let fill = '#' + icon.hex;\n\n  // handle one-off cases\n  switch (icon.title.toLowerCase()) {\n    case 'amazon':\n      background = darkColor;\n      break;\n    case 'microsoft':\n      fill = '#00a2ed';\n      break;\n    case 'github':\n    case 'patreon':\n    case 'ubisoft':\n      background = 'bg-slate-100';\n      break;\n  }\n\n  return { background, fill };\n}\n\nexport function AppIcon({ name, className }: { name: string; className?: string }) {\n  const icon = getIcon(name);\n\n  const colors = getColors(icon);\n\n  const imgClass =\n    'w-12 h-12 rounded-full border border-slate-400 flex justify-center items-center aspect-square ' +\n    colors.background +\n    ' ' +\n    className;\n\n  if (!icon)\n    return (\n      <div className={imgClass}>\n        <FaLock />\n      </div>\n    );\n\n  if (icon.type === IconType.Image)\n    return <img src={icon.url} className={twJoin(imgClass, 'object-cover', icon.padding && 'p-1')} />;\n\n  return (\n    <div\n      dangerouslySetInnerHTML={{ __html: icon.svg }}\n      className={twJoin(imgClass, icon.padding ? 'p-2.5' : 'p-0.5')}\n      style={{ fill: colors.fill }}\n    />\n  );\n}\n","import { Scanner } from '@yudiel/react-qr-scanner';\nimport { FaTimes } from 'react-icons/fa';\nimport { toast } from 'react-toastify';\n\nexport function QR({ close, onScan }: { close: () => void; onScan: (name: string, secret: string) => void }) {\n  return (\n    <div className=\"absolute inset-0 w-screen h-screen bg-black flex justify-center z-10\">\n      <div className=\"relative w-[100vh] p-2\">\n        <div className=\"absolute bottom-14 right-0 left-0 z-10 flex justify-center\">\n          <button className=\"icon\" onClick={close}>\n            <FaTimes />\n          </button>\n        </div>\n        <Scanner\n          onResult={async (text: string) => {\n            try {\n              const url = new URL(text);\n\n              const name = decodeURIComponent(url.pathname.replace('//totp/', '')).split(':')[0];\n              const secret = url.searchParams.get('secret');\n\n              if (url.protocol !== 'otpauth:' || !name || !secret) throw new Error(`Invalid URL: ${url.toString()}`);\n\n              onScan(name, secret);\n              close();\n            } catch (err) {\n              console.error(err);\n              toast.error('Failed to scan qr code');\n            }\n          }}\n          onError={(error) => console.error(error?.message)}\n          components={{ audio: false }}\n        />\n      </div>\n    </div>\n  );\n}\n","import { encrypt } from '@metamask/browser-passworder';\nimport { DocumentReference, arrayRemove, arrayUnion, updateDoc } from 'firebase/firestore';\nimport { useContext, useState } from 'react';\nimport { FaEye, FaEyeSlash, FaQrcode } from 'react-icons/fa';\nimport { toast } from 'react-toastify';\n\nimport { CodeContext } from '../contexts/CodeContext';\nimport { AppIcon } from './AppIcon';\nimport { QR } from './QR';\n\ninterface EditKeyProps {\n  name?: string;\n  secret?: string;\n  userRef: DocumentReference;\n  close: () => void;\n}\n\nexport function EditKey(props: EditKeyProps) {\n  const [name, setName] = useState(props.name || '');\n  const [secret, setSecret] = useState(props.secret || '');\n  const [scan, setScan] = useState(false);\n  const [masked, setMasked] = useState(true);\n  const [updating, setUpdating] = useState(false);\n\n  const token = useContext(CodeContext) || '';\n\n  const editing = props.name || props.secret;\n\n  const addKey = async (name: string, secret: string) => {\n    if (name === '' || secret === '') {\n      toast.error('Name and secret are required');\n      return;\n    }\n\n    try {\n      setUpdating(true);\n\n      if (editing && (props.name !== name || props.secret !== secret)) {\n        await updateDoc(props.userRef, { keys: arrayRemove({ name: props.name, secret: props.secret }) });\n      }\n\n      const encryptedSecret = await encrypt(token, { secret });\n      await updateDoc(props.userRef, { keys: arrayUnion({ name, secret: encryptedSecret }) });\n      setName('');\n      setSecret('');\n      setMasked(true);\n      props.close();\n    } catch (err) {\n      console.error(err);\n      toast.error('Failed to add key');\n    } finally {\n      setUpdating(false);\n    }\n  };\n\n  return (\n    <>\n      <div\n        className=\"flex flex-col gap-8\"\n        onKeyDown={(e) => {\n          if (e.key === 'Enter') addKey(name, secret);\n        }}\n      >\n        <div className=\"flex gap-4 items-center\">\n          <AppIcon name={name} className=\"w-14 h-14 sm:w-16 sm:h-16\" />\n          <div className=\"flex flex-col gap-3 w-full\">\n            <input\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              placeholder=\"Site name\"\n              autoFocus\n              autoComplete=\"false\"\n              type=\"text\"\n            />\n\n            <div className=\"relative\">\n              <input\n                value={secret}\n                onChange={(e) => setSecret(e.target.value)}\n                placeholder=\"Secret\"\n                autoComplete=\"false\"\n                type={masked ? 'password' : 'text'}\n              />\n              <button\n                className=\"absolute right-0 top-0 bottom-0 flex items-center cursor-pointer bg-transparent\"\n                onClick={() => setMasked(!masked)}\n              >\n                {masked ? <FaEyeSlash /> : <FaEye />}\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"flex gap-4\">\n          {!editing && (\n            <button onClick={() => setScan(true)}>\n              <FaQrcode />\n            </button>\n          )}\n          <button onClick={() => addKey(name, secret)} className=\"flex-1\" disabled={updating}>\n            {updating ? (editing ? 'Saving' : 'Adding') : editing ? 'Save' : 'Add'}\n          </button>\n        </div>\n      </div>\n\n      {scan && (\n        <QR\n          close={() => setScan(false)}\n          onScan={(name, secret) => {\n            setName(name);\n            setSecret(secret);\n          }}\n        />\n      )}\n    </>\n  );\n}\n","import { FaTimes } from 'react-icons/fa';\n\nexport function Modal({\n  onClose,\n  title,\n  children,\n}: {\n  onClose: () => void;\n  title: string;\n  children: JSX.Element;\n}): JSX.Element {\n  return (\n    <div\n      className=\"fixed z-10 inset-0 bg-slate-900 bg-opacity-75 flex justify-center items-center\"\n      onClick={onClose}\n      onKeyDown={(e) => {\n        if (e.key === 'Escape') {\n          onClose();\n        }\n      }}\n    >\n      <div\n        className=\"bg-slate-700 rounded-lg p-8 w-full\"\n        onClick={(e) => e.stopPropagation()}\n        style={{ marginTop: 'calc(-1 * env(keyboard-inset-height))', maxWidth: 'min(80vw, 600px)' }}\n      >\n        <div className=\"flex items-center mb-8\">\n          <h2 className=\"flex-1 text-xl font-medium\">{title}</h2>\n          <button onClick={onClose} className=\"px-2 bg-slate-600 border-2 border-slate-800\">\n            <FaTimes />\n          </button>\n        </div>\n\n        {children}\n      </div>\n    </div>\n  );\n}\n","// Function from https://usehooks-ts.com/react-hook/use-copy-to-clipboard\nimport { useCallback, useState } from 'react';\n\ntype CopiedValue = string | null;\n\ntype CopyFn = (text: string) => Promise<boolean>;\n\nexport function useCopyToClipboard(): [CopyFn, CopiedValue] {\n  const [copiedText, setCopiedText] = useState<CopiedValue>(null);\n\n  const copy: CopyFn = useCallback(async (text) => {\n    if (!navigator?.clipboard) {\n      console.warn('Clipboard not supported');\n      return false;\n    }\n\n    // Try to save to clipboard then save it in the state if worked\n    try {\n      await navigator.clipboard.writeText(text);\n      setCopiedText(text);\n      return true;\n    } catch (error) {\n      console.warn('Copy failed', error);\n      setCopiedText(null);\n      return false;\n    }\n  }, []);\n\n  return [copy, copiedText];\n}\n","import { useEffect, useState } from 'react';\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = useState(false);\n\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 500);\n    };\n\n    handleResize();\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  return isMobile;\n}\n","import { decrypt } from '@metamask/browser-passworder';\nimport { DocumentReference, arrayRemove, updateDoc } from 'firebase/firestore';\nimport { useCallback, useContext, useEffect, useMemo, useState } from 'react';\nimport { FaTimes } from 'react-icons/fa';\nimport { toast } from 'react-toastify';\nimport { twJoin } from 'tailwind-merge';\nimport { TOTP } from 'totp-generator';\n\nimport { CodeContext } from '../contexts/CodeContext';\nimport { useCopyToClipboard } from '../hooks/useCopyToClipboard';\nimport { useIsMobile } from '../hooks/useIsMobile';\nimport { useOnHold } from '../hooks/useOnHold';\nimport { Key } from '../hooks/useUserData';\nimport { AppIcon } from './AppIcon';\n\nenum HiddenType {\n  Hidden,\n  FirstVisible,\n  Visible,\n}\n\nexport function TokenCard({\n  data,\n  userRef,\n  timestamp,\n  onEdit,\n  setEditMode,\n  editMode,\n}: {\n  data: Key;\n  userRef: DocumentReference;\n  timestamp: Date;\n  onEdit: () => void;\n  setEditMode: (value: boolean) => void;\n  editMode: boolean;\n}) {\n  const encryptionToken = useContext(CodeContext) || '';\n  const [secret, setSecret] = useState('');\n  const [hidden, setHidden] = useState<HiddenType>(HiddenType.Hidden);\n  const isMobile = useIsMobile();\n  const [copy] = useCopyToClipboard();\n\n  const onClick = () => {\n    if (editMode) onEdit();\n    else if (hidden === HiddenType.Hidden) setHidden(HiddenType.FirstVisible);\n    else copyToken();\n  };\n\n  const bindHold = useOnHold(() => setEditMode(!editMode), onClick);\n\n  useEffect(() => {\n    if (hidden === HiddenType.Hidden) return;\n\n    decrypt(encryptionToken, data.secret)\n      .then((decrypted) => setSecret((decrypted as { secret: string }).secret))\n      .catch((err) => {\n        console.error(err);\n        setSecret('Error');\n      });\n  }, [data.secret, encryptionToken, hidden]);\n\n  const timeChunk = Math.floor(timestamp.getTime() / 30000);\n\n  const token = useMemo(() => {\n    if (secret.length === 0 || secret === 'Error' || hidden === HiddenType.Hidden) return 'Token Error';\n\n    try {\n      return TOTP.generate(secret.replace(/\\s+/g, ''), { timestamp: timeChunk * 30000 }).otp;\n    } catch (err) {\n      console.error(err);\n      return 'Token Error';\n    }\n  }, [secret, timeChunk, hidden]);\n\n  const copyToken = useCallback(\n    () =>\n      copy(token).then((result) => {\n        if (result && token !== 'Token Error')\n          toast.success(data.name + ' code copied', { bodyClassName: isMobile ? 'text-right' : '', autoClose: 2500 });\n        else toast.error('Failed to copy code', { autoClose: 2500 });\n      }),\n    [token, data, isMobile, copy]\n  );\n\n  useEffect(() => {\n    if (hidden === HiddenType.FirstVisible && token !== 'Token Error') {\n      copyToken();\n      setHidden(HiddenType.Visible);\n    }\n  }, [hidden, token]);\n\n  return (\n    <div\n      className={twJoin(\n        'p-3 bg-slate-800 border border-slate-700 rounded-md select-none flex gap-6 justify-between items-center hover:brightness-[90%] relative cursor-pointer transition-all rotate-0',\n        editMode && 'animate-wiggle'\n      )}\n      style={{ animationDelay: `${Math.random() * 250}ms` }}\n      tabIndex={0}\n      {...bindHold()}\n      onKeyDown={(e) => {\n        if (e.key === 'Enter' || e.key === ' ') onClick();\n      }}\n    >\n      <div className=\"flex gap-4\">\n        <AppIcon name={data.name} />\n        <div className=\"flex flex-col items-start justify-center\">\n          <h2 className=\"font-bold capitalize\">{data.name}</h2>\n          <div>\n            {hidden === HiddenType.Hidden ? (\n              '*** ***'\n            ) : secret.length === 0 ? (\n              'Decrypting...'\n            ) : token === 'Token Error' ? (\n              'Token Error'\n            ) : (\n              <>\n                <span className=\"mr-2\">{token.slice(0, 3)}</span>\n                <span>{token.slice(3, 6)}</span>\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n\n      <button\n        className=\"absolute -top-3 -right-3 !p-1 text-slate-800 bg-white border border-slate-400 rounded-full hover:text-white hover:brightness-100 sm:hover:bg-danger transition-all duration-300\"\n        style={{ pointerEvents: editMode ? 'auto' : 'none', opacity: editMode ? 1 : 0 }}\n        tabIndex={editMode ? 0 : -1}\n        onClick={(e) => {\n          e.stopPropagation();\n\n          const confirm = window.confirm(`Are you sure you want to remove ${data.name}? This cannot be undone!`);\n          if (confirm) {\n            const confirm2 = window.confirm('Are you really sure?');\n            if (confirm2) updateDoc(userRef, { keys: arrayRemove(data) });\n          }\n        }}\n        onMouseDown={(e) => e.stopPropagation()}\n        onTouchStart={(e) => e.stopPropagation()}\n        onPointerDown={(e) => e.stopPropagation()}\n      >\n        <FaTimes />\n      </button>\n    </div>\n  );\n}\n","import { decrypt } from '@metamask/browser-passworder';\nimport { DocumentReference } from 'firebase/firestore';\nimport { useContext, useEffect, useMemo, useState } from 'react';\nimport { CircularProgressbar, buildStyles } from 'react-circular-progressbar';\nimport 'react-circular-progressbar/dist/styles.css';\nimport { toast } from 'react-toastify';\n\nimport { CodeContext } from '../contexts/CodeContext';\nimport { useRefreshTimer } from '../hooks/useRefreshTimer';\nimport { useTailwind } from '../hooks/useTailwind';\nimport { Key, UserData } from '../hooks/useUserData';\nimport logo from '../images/logo.png';\nimport { EditKey } from './EditKey';\nimport { Modal } from './Modal';\nimport { TokenCard } from './TokenCard';\n\nexport function TokenList({\n  userData,\n  userRef,\n  editMode,\n  setEditMode,\n  editKey,\n  setEditKey,\n}: {\n  userData: UserData;\n  userRef: DocumentReference;\n  editMode: boolean;\n  setEditMode: (value: boolean) => void;\n  editKey: boolean;\n  setEditKey: (value: boolean) => void;\n}) {\n  const { time, timestamp } = useRefreshTimer();\n  const encryptionToken = useContext(CodeContext) || '';\n\n  const [search, setSearch] = useState('');\n  const [keyToEdit, setKeyToEdit] = useState<Key>();\n  const tailwind = useTailwind();\n\n  const remainingMs = 30000 - (time.getTime() % 30000);\n  const remainingSeconds = Math.ceil(remainingMs / 1000);\n  const elapsedSeconds = 30 - remainingSeconds;\n\n  useEffect(() => {\n    return () => {\n      setEditMode(false);\n      setEditKey(false);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (editMode && navigator.vibrate) navigator.vibrate(200);\n  }, [editMode]);\n\n  const tokens = useMemo(\n    () => (\n      <>\n        {userData.keys.length === 0 && (\n          <div className=\"text-center text-lg bg-slate-800 p-8 w-full rounded-md\">No keys added yet</div>\n        )}\n        {userData.keys.length > 0 && (\n          <div className=\"w-full max-w-screen-lg\">\n            <div className=\"flex gap-4 sm:gap-6 items-center mb-6\">\n              <img src={logo} className=\"h-10 aspect-square -mb-0.5\" />\n\n              <div className=\"relative w-full\">\n                <input\n                  className=\"pl-10\"\n                  type=\"search\"\n                  value={search}\n                  placeholder=\"Search tokens\"\n                  onChange={(e) => setSearch(e.target.value)}\n                />\n                {/* Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc. */}\n                <svg\n                  className=\"fill-slate-400 absolute left-3 top-[11px] h-4\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  viewBox=\"0 0 512 512\"\n                >\n                  <path d=\"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z\" />\n                </svg>\n              </div>\n            </div>\n\n            <div className=\"w-full grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6\">\n              {userData.keys\n                .filter((k) => search.length === 0 || k.name.toLowerCase().includes(search.toLowerCase()))\n                .sort((a, b) => a.name.localeCompare(b.name))\n                .map((key: Key) => {\n                  try {\n                    return (\n                      <TokenCard\n                        key={key.name}\n                        data={key}\n                        userRef={userRef}\n                        timestamp={timestamp}\n                        onEdit={() => {\n                          const ref = toast.info('Decrypting token...', { autoClose: 1500 });\n                          decrypt(encryptionToken, key.secret)\n                            .then((decrypted) => {\n                              toast.dismiss(ref);\n\n                              setEditKey(true);\n                              setKeyToEdit({ name: key.name, secret: (decrypted as { secret: string }).secret });\n                            })\n                            .catch((err) => {\n                              toast.dismiss(ref);\n\n                              console.error(err);\n                              toast.error('Failed to decrypt token', { autoClose: 2500 });\n                            });\n                        }}\n                        setEditMode={setEditMode}\n                        editMode={editMode}\n                      />\n                    );\n                  } catch (err) {\n                    console.error(err);\n                    return <div>Error Loading Token ({key.name})</div>;\n                  }\n                })}\n            </div>\n          </div>\n        )}\n      </>\n    ),\n    [userData.keys, search, timestamp, userRef, editMode]\n  );\n\n  // Originally, this was: const progressOffset = (elapsedSeconds / 30) * 50;\n  // These magic number make things look good at the start / end points\n  const progressOffset = ((elapsedSeconds + 0.15) / 29.4) * 50;\n\n  return (\n    <>\n      <div className=\"flex sm:justify-center pl-8 sm:pl-0 fixed bottom-0 left-0 right-0 z-10 backdrop-blur-lg bg-slate-900 bg-opacity-30 pt-4 border-t-2 border-secondary\">\n        <div className=\"w-16 h-16 p-1 mb-6\">\n          <CircularProgressbar\n            value={remainingSeconds - 1}\n            maxValue={30}\n            text={remainingSeconds.toString()}\n            styles={buildStyles({\n              textSize: '40px',\n              trailColor: tailwind.theme.colors.slate[700],\n              textColor: tailwind.theme.colors.primary,\n              pathColor: tailwind.theme.colors.primary,\n            })}\n            strokeWidth={10}\n          />\n        </div>\n        <div\n          className=\"fixed bottom-1 h-1.5 bg-primary transition-all duration-700 z-20 rounded\"\n          style={{ left: `${progressOffset}%`, right: `${progressOffset}%` }}\n        ></div>\n      </div>\n\n      <div className=\"flex flex-col gap-4 m-6 sm:m-8 items-center pb-24\">{tokens}</div>\n\n      {editKey && (\n        <Modal\n          title={keyToEdit?.name || keyToEdit?.secret ? 'Edit existing key' : 'Add a new key'}\n          onClose={() => {\n            setEditKey(false);\n            setKeyToEdit(undefined);\n          }}\n        >\n          <EditKey\n            name={keyToEdit?.name}\n            secret={keyToEdit?.secret}\n            userRef={userRef}\n            close={() => {\n              setEditKey(false);\n              setKeyToEdit(undefined);\n            }}\n          />\n        </Modal>\n      )}\n    </>\n  );\n}\n","import { encrypt } from '@metamask/browser-passworder';\nimport { User } from 'firebase/auth';\nimport { setDoc, updateDoc } from 'firebase/firestore';\nimport { useEffect, useState } from 'react';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { FaBroadcastTower } from 'react-icons/fa';\nimport { toast } from 'react-toastify';\nimport { twMerge } from 'tailwind-merge';\n\nimport { CodeContext } from '../contexts/CodeContext';\nimport { useOnline } from '../hooks/useOnline';\nimport { useUserData } from '../hooks/useUserData';\nimport { useVisibilityChange } from '../hooks/useVisibilityChange';\nimport { auth } from '../util/firebase';\nimport { exportKeys, importKeys } from '../util/keys';\nimport { Lock } from './Lock/Lock';\nimport { Login } from './Login';\nimport { LogoPage } from './Logo';\nimport { Menu } from './Menu';\nimport { TokenList } from './TokenList';\n\nexport function App() {\n  const [user, loading, error] = useAuthState(auth);\n\n  if (loading || error) return <LogoPage>{error && <p>Error: {error.message}</p>}</LogoPage>;\n\n  if (!user)\n    return (\n      <LogoPage>\n        <Login />\n      </LogoPage>\n    );\n  return <Authorized user={user} />;\n}\n\nasync function promptPin(token?: string): Promise<string | undefined> {\n  let code = '';\n  let tries = 0;\n  while (code.length !== 6 && tries < 3) {\n    code = prompt('Set a new 6 digit pin') || '';\n    tries++;\n  }\n  if (code.length === 6) {\n    const newCode = prompt('Re-enter 6 digit pin') || '';\n    if (newCode !== code) {\n      toast.error('Pins do not match');\n      return;\n    }\n  }\n\n  if (code.length === 6) {\n    if (!token) {\n      token = crypto.getRandomValues(new Uint32Array(32)).toString();\n    }\n\n    try {\n      const blob = await encrypt(code, { token });\n      return blob;\n    } catch (err) {\n      console.error(err);\n    }\n  }\n}\n\nfunction OnlineStatus({ className }: { className?: string }) {\n  const online = useOnline();\n\n  if (online) return null;\n  return (\n    <FaBroadcastTower\n      className={twMerge('text-danger fixed top-2 right-2 text-2xl z-10 ' + className)}\n      title=\"You are currently offline. It is not recommend to add/edit keys offline to avoid conflicts.\"\n    />\n  );\n}\n\nfunction Authorized({ user }: { user: User }) {\n  const { value, loading, error, userRef } = useUserData();\n\n  const [token, setToken] = useState<string>();\n  const [editMode, setEditMode] = useState(false);\n  const [editKey, setEditKey] = useState(false);\n\n  useVisibilityChange((visible) => {\n    if (!visible) setToken(undefined);\n  });\n\n  useEffect(() => {\n    if (!loading && !error && value?.data() === undefined) {\n      promptPin().then((code) => {\n        if (code) setDoc(userRef, { keys: [], email: user.email || '', code, webauthn: [] });\n        else toast.error('Failed to create user');\n      });\n    }\n  }, [value, loading, error]);\n\n  const updatePin = async () => {\n    if (!confirm('Would you like to update your pin?')) return;\n    const code = await promptPin(token);\n\n    if (code) updateDoc(userRef, { code });\n    else toast.error('Failed to update pin');\n  };\n\n  if (loading || error || !value || value.data() === undefined)\n    return (\n      <LogoPage>\n        {error && <p>Error: {error.message}</p>}\n        {!value || (value.data() === undefined && <p>No data</p>)}\n      </LogoPage>\n    );\n\n  if (!token)\n    return (\n      <>\n        <OnlineStatus className=\"!bottom-4 !right-5 top-auto\" />\n        <Lock\n          unlock={(code) => setToken(code)}\n          encryptedCode={value.data()?.code!}\n          data={value.data()}\n          userRef={userRef}\n        />\n      </>\n    );\n\n  return (\n    <CodeContext.Provider value={token}>\n      <OnlineStatus />\n      <TokenList\n        userData={value.data()!}\n        userRef={userRef}\n        editMode={editMode}\n        setEditMode={setEditMode}\n        editKey={editKey}\n        setEditKey={setEditKey}\n      />\n      <Menu\n        lock={() => setToken(undefined)}\n        updateCode={updatePin}\n        editMode={editMode}\n        setEditKey={setEditKey}\n        setEditMode={setEditMode}\n        exportKeys={() => exportKeys(token, value.data()!)}\n        importKeys={() => importKeys(token, value.data()!, userRef)}\n      />\n    </CodeContext.Provider>\n  );\n}\n","import { Buffer } from 'buffer';\nimport { StrictMode } from 'react';\nimport { createRoot } from 'react-dom/client';\nimport { Id, ToastContainer, Zoom, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { registerSW } from 'virtual:pwa-register';\n\nimport { App } from './components/App';\n\n// Fixes for browser-passworder\nwindow.global ||= window;\nglobalThis.Buffer = Buffer;\n\n// If a pwa on desktop, resize window a bit smaller\nconst isBrowser = matchMedia('(display-mode: browser)').matches;\nif (!isBrowser) {\n  window.resizeTo(500, 760);\n}\n\n// Enable virtual keyboard api\nconst nav = navigator as any;\nif (nav.virtualKeyboard) nav.virtualKeyboard.overlaysContent = true;\n\nfunction Container() {\n  return (\n    <StrictMode>\n      <App />\n      <ToastContainer theme=\"dark\" position=\"bottom-center\" transition={Zoom} hideProgressBar closeButton={false} />\n    </StrictMode>\n  );\n}\n\nfunction onLoad() {\n  // keep track of updating toast\n  let updateToast: Id;\n\n  // add this to prompt for a refresh\n  const updateSW = registerSW({\n    onNeedRefresh() {\n      if (updateToast) toast.dismiss(updateToast);\n\n      updateToast = toast.warn('New version installed, tap to update.', {\n        autoClose: false,\n        onClick: () => {\n          if (updateToast) toast.dismiss(updateToast);\n\n          updateSW();\n          toast.warn('Updating...', { autoClose: false });\n        },\n        closeOnClick: true,\n      });\n    },\n    onRegistered(r) {\n      // try to update every 5 minutes\n      if (r) {\n        setInterval(\n          () => {\n            r.update();\n          },\n          5 * 60 * 1000\n        );\n\n        // TODO: Test that this works\n        r.addEventListener('updatefound', () => {\n          updateToast = toast.info('Downloading new version...');\n        });\n      }\n    },\n  });\n}\n\ncreateRoot(document.getElementById('root')!).render(<Container />);\nsetTimeout(() => onLoad(), 50);\n"],"file":"assets/index-DE_3cFAn.js"}