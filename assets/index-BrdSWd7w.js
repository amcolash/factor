const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendor-Bo6X8C8w.css"])))=>i.map(i=>d[i]);
import{r as c,j as t,c as ae}from"./react-CAPhFU6l.js";import{y,u as U,a as ie,t as B,b as T,c as ce,F as le,W as ue,d as _,V as de,l as fe,e as ge,f as me,g as he,h as pe,i as $,r as ye,C as ve,j as we,k as F,m as Z,T as xe,n as be,p as Ae,q as je,s as Ce,v as Ne,w as ke,x as Ee,L as Se,z as Be}from"./vendor-DXGMQpZB.js";import{d as k}from"./metamask-CLEHnUt9.js";import{u as j,i as Ie,g as Te,a as ze,p as Le,d as Pe,b as R,t as Re,c as De,e as z,s as Fe}from"./firebase-SfmEeG7v.js";import{i as Oe,s as We,a as Me}from"./simple-icons-Dc9JY54d.js";import{u as Ue}from"./qr-scanner-BYaHm3-j.js";import"./index-BrdSWd7w.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();var _t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function en(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var n=e.default;if(typeof n=="function"){var r=function s(){var o=!1;try{o=this instanceof s}catch{}return o?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};r.prototype=n.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var o=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,o.get?o:{enumerable:!0,get:function(){return e[s]}})}),r}function ee(e){c.useEffect(()=>{const n=()=>e(!document.hidden);return document.addEventListener("visibilitychange",n),()=>document.removeEventListener("visibilitychange",n)},[e])}function Ze(e){const n=c.useRef(null);ee(r=>{r?(n.current&&clearTimeout(n.current),n.current=null):(n.current&&clearTimeout(n.current),n.current=setTimeout(()=>e(void 0),15*1e3))})}function He(e,n){const[r,s]=c.useState(!1),o=async a=>{const i=a.keys.map(l=>({...l,archived:l.archived??!1}));JSON.stringify(i)!==JSON.stringify(a.keys)&&(console.log("Upgrading user data keys to include archived property"),await j(e,{keys:i}))};c.useEffect(()=>{n&&!r&&(s(!0),o(n))},[n,r])}const D=c.createContext(void 0);function Qe(){const[e,n]=c.useState(navigator.onLine);return c.useEffect(()=>{function r(){n(navigator.onLine)}return window.addEventListener("online",r),window.addEventListener("offline",r),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",r)}},[]),e}const Ge="modulepreload",Ke=function(e){return"/factor/"+e},Q={},Ye=function(n,r,s){let o=Promise.resolve();if(r&&r.length>0){let f=function(h){return Promise.all(h.map(g=>Promise.resolve(g).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=i?.nonce||i?.getAttribute("nonce");o=f(r.map(h=>{if(h=Ke(h),h in Q)return;Q[h]=!0;const g=h.endsWith(".css"),v=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${v}`))return;const u=document.createElement("link");if(u.rel=g?"stylesheet":Ge,g||(u.as="script"),u.crossOrigin="",u.href=h,l&&u.setAttribute("nonce",l),document.head.appendChild(u),g)return new Promise((x,p)=>{u.addEventListener("load",x),u.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&a(l.reason);return n().catch(a)})};function Xe(e={}){const{immediate:n=!1,onNeedRefresh:r,onOfflineReady:s,onRegistered:o,onRegisteredSW:a,onRegisterError:i}=e;let l,f,h;const g=async(u=!0)=>{await f,h?.()};async function v(){if("serviceWorker"in navigator){if(l=await Ye(async()=>{const{Workbox:u}=await import("./vendor-DXGMQpZB.js").then(x=>x.I);return{Workbox:u}},__vite__mapDeps([0])).then(({Workbox:u})=>new u("/factor/sw.js",{scope:"/factor/",type:"classic"})).catch(u=>{i?.(u)}),!l)return;h=()=>{l?.messageSkipWaiting()};{let u=!1;const x=()=>{u=!0,l?.addEventListener("controlling",p=>{p.isUpdate&&window.location.reload()}),r?.()};l.addEventListener("installed",p=>{typeof p.isUpdate>"u"?typeof p.isExternal<"u"&&p.isExternal?x():!u&&s?.():p.isUpdate||s?.()}),l.addEventListener("waiting",x)}l.register({immediate:n}).then(u=>{a?a("/factor/sw.js",u):o?.(u)}).catch(u=>{i?.(u)})}}return f=v(),g}let S;function Ve(){const e=Xe({onNeedRefresh(){const n="New version installed, tap to update.",r={autoClose:!1,closeOnClick:!0,type:"warning",onClick:()=>{const s="Updating...";S?y.update(S,{render:s,onClick:void 0}):y.warn(s,{autoClose:!1}),e()}};S?y.update(S,{render:n,type:"warning",...r}):S=y.warn(n,r)},onRegistered(n){n&&(setInterval(()=>{n.update()},3e5),n.addEventListener("updatefound",()=>{S||(S=y.info("Downloading new version..."))}))}})}const qe={apiKey:"AIzaSyDMQ4jffBbrLTjdhy_qS4GeZdbYtzEKHp4",authDomain:"factor-97c20.firebaseapp.com",projectId:"factor-97c20",storageBucket:"factor-97c20.appspot.com",messagingSenderId:"524844196447",appId:"1:524844196447:web:9d5f59006ec0b8e68d31ea"},te=Ie(qe),I=Te(te),W=ze(te,{localCache:Le()});function Je(){const[e]=U(I),n=Pe(W,"users",e?.uid||""),[r,s,o,a]=ie(n);return{data:r,loading:s,error:o,userRef:n}}async function _e(e,n){const r=y(`Exporting keys ⏳️
This might take some time...`,{autoClose:!1,progress:1/n.keys.length,hideProgressBar:!1}),s=[];for(let l=0;l<n.keys.length;l++){const f=n.keys[l],h=await k.decrypt(e,f.secret);s.push({...f,secret:h.secret}),y.update(r,{progress:l/n.keys.length})}y.done(r);const o=new Blob([JSON.stringify(s,void 0,2)],{type:"text/json"}),a=URL.createObjectURL(o),i=document.createElement("a");i.href=a,i.download="keys.json",i.click(),URL.revokeObjectURL(a)}async function $e(e,n,r){const s=document.createElement("input");s.type="file",s.addEventListener("change",o=>{if(s.files&&s.files[0]){const a=s.files[0],i=new FileReader;i.onload=async l=>{try{if(l.target){const f=JSON.parse(l.target.result);let h=0,g=0;for(const v of f){if(!v.name||!v.secret)throw"Invalid file format";const{archived:u,name:x}=v;if(n.keys.some(p=>p.name.toLowerCase()===x.toLowerCase()))h++;else{const p=await k.encrypt(e,v.secret);await j(r,{keys:R({name:x,secret:p,archived:u})}),g++}}h>0&&y.warning(`${h} keys were skipped because they already exist`),g>0&&y.success(`Imported ${f.length-h} keys`)}}catch(f){console.error(f),y.error(f||"Error importing keys")}},i.readAsText(a)}}),s.click()}const G="device-uuid";function ne(){let e=localStorage.getItem(G);return e||(e=crypto.getRandomValues(new Uint32Array(32)).toString(),localStorage.setItem(G,e)),e}const re="/factor/assets/logo-lomxQ9_I.png";function et({className:e}){return t.jsx("img",{src:re,className:T("h-52",e)})}function L({className:e,children:n,...r}){return t.jsxs("div",{className:"w-screen h-[100svh] flex flex-col justify-center items-center gap-5",...r,children:[t.jsx("h1",{className:"text-center m-0 -mb-1",children:"Factor 2FA"}),t.jsx(et,{className:e}),n,t.jsx("span",{className:B("absolute bottom-1.5 right-2 leading-tight whitespace-pre text-right","text-[8px]"),children:new Date("2026-01-04T04:17:00.295Z").toLocaleString().replace(", ",`
`)})]})}function tt(){const[e]=ce(I);return t.jsx("button",{className:"icon bg-danger",onClick:async()=>{try{await e(),await Re(W),await De(W),window.location.reload()}catch(n){console.error(n)}},children:t.jsx(le,{})})}function nt({pinRef:e,encryptedCode:n,unlock:r,className:s}){c.useEffect(()=>{setTimeout(()=>e.current?.[0].focus(),250)},[]);const o=async a=>{if(a?.length===6)try{const i=await k.decrypt(a,n);r(i.token)}catch(i){console.log(i,a),y.error("Invalid code")}e.current&&(e.current.forEach(i=>{i.value=""}),e.current[0].focus())};return t.jsx("div",{className:T("flex",s),children:t.jsx(ue,{length:6,className:"border border-slate-500 w-10 sm:w-12 h-14 m-1.5 rounded-lg text-center text-6xl p-1",type:"password",inputMode:"numeric",ref:e,onComplete:o})})}const se=Uint8Array.from(window.crypto.getRandomValues(new Uint8Array(32)));async function rt(){try{const e=Uint8Array.from(window.crypto.getRandomValues(new Uint8Array(32))),n=I.currentUser,r={challenge:se,rp:{name:"Factor"},user:{id:e,name:n?.email||"user@email.com",displayName:n?.displayName||"User"},pubKeyCredParams:[{type:"public-key",alg:-7}],authenticatorSelection:{requireResidentKey:!0}},s=await navigator.credentials.create({publicKey:r});return{userHandle:M(e),credentialId:M(s.rawId)}}catch(e){console.error("Error registering credential:",e)}return null}async function st(e){try{const n=at(e),r={challenge:se,allowCredentials:[{type:"public-key",id:n}]},s=await navigator.credentials.get({publicKey:r});if(s?.response)return M(s.response.userHandle)}catch(n){console.error("Error authenticating:",n)}return null}function ot(e){const n=new Uint8Array(e),r=Array.from(n);return String.fromCharCode.apply(null,r)}function M(e){return btoa(ot(e))}function at(e){const n=atob(e),r=n.length,s=new ArrayBuffer(r),o=new Uint8Array(s);for(let a=0;a<r;a++)o[a]=n.charCodeAt(a);return s}function it({userRef:e,encryptedCode:n}){const r=ne(),s=async()=>{try{const o=prompt("Enter pin to register biometric login")||"",a=await k.decrypt(o,n),i=await rt(),l=i?.userHandle||"",f=await k.encrypt(l,a);j(e,{webauthn:R({credentialId:i?.credentialId,uuid:r,secret:f,userAgent:navigator.userAgent})}),y.success("Successfully enrolled biometric login")}catch(o){console.error(o),y.error("Error registering fingerprint")}};return t.jsx("button",{className:"icon bg-primary text-slate-200",onClick:s,children:t.jsx(_,{})})}const K=new Set;function ct(e,n){c.useEffect(()=>{K.has(e)||(n(),K.add(e))},[])}function P(e,n,r=600){const s=de(e,{threshold:r,onCancel:(o,{reason:a})=>{a===fe.CancelledByRelease&&n()}});return()=>({onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&e()},...s()})}function lt({webauthn:e,userRef:n,unlock:r}){ee(a=>{a&&e&&o()}),ct("webauthn",()=>{e&&o()});const s=P(()=>{e&&confirm("Reset Biometric Auth?")&&j(n,{webauthn:z({...e})})},()=>o(),3e3),o=async()=>{try{if(!e)throw"webauthn not defined";const a=await st(e.credentialId).catch(console.error),i=await k.decrypt(a||"",e.secret);r(i.token)}catch(a){console.error(a),y.error("Invalid biometric login")}};return t.jsx("button",{className:"p-3 rounded-full bg-tertiary text-slate-200 border-2 border-slate-600",...s(),children:t.jsx(_,{size:30})})}function ut({unlock:e,encryptedCode:n,data:r,userRef:s}){const o=c.useRef(null),a=ne(),i=r?.webauthn?.find(l=>l.uuid===a);return t.jsxs(L,{onClick:l=>{const f=l.target?.nodeName;o.current&&(f==="DIV"||f==="IMG"||f==="H1")&&o.current[0].focus()},style:{marginTop:"calc(-1 * env(keyboard-inset-height) / 2)"},children:[t.jsxs("div",{className:"flex fixed top-4 right-4 gap-2",children:[!i&&t.jsx(it,{encryptedCode:n,userRef:s}),t.jsx(tt,{})]}),t.jsx(nt,{pinRef:o,encryptedCode:n,unlock:e}),i&&t.jsx(lt,{unlock:e,userRef:s,webauthn:i})]})}function dt(){const[e]=U(I),[n,,r,s]=ge(I);return t.jsxs("div",{className:"flex justify-center items-center flex-col",children:[!e&&!r&&t.jsx(ft,{signin:()=>n()}),r&&t.jsx("p",{children:"Loading..."}),s&&t.jsxs("p",{children:["Error: ",s.message]})]})}function ft({signin:e}){return t.jsxs("button",{className:"gsi-material-button",onClick:e,children:[t.jsx("div",{className:"gsi-material-button-state"}),t.jsxs("div",{className:"gsi-material-button-content-wrapper",children:[t.jsx("div",{className:"gsi-material-button-icon",children:t.jsxs("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",style:{display:"block"},children:[t.jsx("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),t.jsx("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),t.jsx("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),t.jsx("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),t.jsx("path",{fill:"none",d:"M0 0h48v48H0z"})]})}),t.jsx("span",{className:"gsi-material-button-contents",children:"Sign in with Google"}),t.jsx("span",{style:{display:"none"},children:"Sign in with Google"})]})]})}function gt({lock:e,updateCode:n,editMode:r,setEditMode:s,setEditKey:o,exportKeys:a,importKeys:i}){const l="p-4 rounded-full ",f=l+" !bg-slate-800 !text-primary",h=P(n,e),g=P(()=>s(!r),()=>{r?s(!1):o(!0)});return t.jsxs("div",{className:"fixed bottom-8 right-8 flex gap-4 z-20",children:[r&&t.jsxs(t.Fragment,{children:[t.jsx("button",{className:f,onClick:()=>i(),children:t.jsx(me,{})}),t.jsx("button",{className:f+" mr-4",onClick:()=>a(),children:t.jsx(he,{})})]}),t.jsx("button",{className:B(f,r&&"rotate-45"),...g(),children:t.jsx(pe,{})}),t.jsx("button",{className:B("transition-transform",l),...h(),children:t.jsx($,{})})]})}function mt(){const[e,n]=c.useState(new Date);return c.useEffect(()=>{let r;return setTimeout(()=>{n(new Date),r=setInterval(()=>n(new Date),3e4)},3e4-new Date().getTime()%3e4),()=>{r&&clearInterval(r)}},[]),{timestamp:e}}function ht(){const[e,n]=c.useState(new Date);return c.useEffect(()=>{const r=setInterval(()=>n(new Date),1e3);return()=>{clearInterval(r)}},[]),{time:e}}const Y={content:["./index.html","./src/**/*.{js,ts,jsx,tsx}"],theme:{extend:{colors:{primary:"#4b888d",secondary:"#051524",tertiary:"#2c2155",danger:"#f07f7b",warning:"#f0c27b"},keyframes:{wiggle:{"0%, 100%":{transform:"rotate(-0.5deg)"},"50%":{transform:"rotate(0.5deg)"}}},animation:{wiggle:"wiggle 400ms ease-in-out infinite"}}},plugins:[]};function pt(){return c.useMemo(()=>ye(Y),[Y])}function yt(){const e=pt(),{time:n}=ht(),r=3e4-n.getTime()%3e4,s=Math.ceil(r/1e3),a=(30-s+.15)/29.4*50;return t.jsxs("div",{className:"flex sm:justify-center pl-8 sm:pl-0 fixed bottom-0 left-0 right-0 z-10 backdrop-blur-lg bg-slate-900 bg-opacity-30 pt-4 border-t-2 border-secondary",children:[t.jsx("div",{className:"w-16 h-16 p-1 mb-6",children:t.jsx(ve,{value:s-1,maxValue:30,text:s.toString(),styles:we({textSize:"40px",trailColor:e.theme.colors.slate[700],textColor:e.theme.colors.primary,pathColor:e.theme.colors.primary}),className:"text-shadow",strokeWidth:10})}),t.jsx("div",{className:"fixed bottom-1 h-1.5 bg-primary transition-all duration-700 z-20 rounded",style:{left:`${a}%`,right:`${a}%`}})]})}const vt=()=>{const[e,n]=c.useState(r());function r(){const s=window.innerWidth;return s<640?"sm":s<768?"md":s<1024?"lg":s<1280?"xl":"2xl"}return c.useEffect(()=>{const s=()=>{n(r())};return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),e},wt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128"><path d="M18.865 84.509c0-11.369 3.527-19.84 11.164-26.814 8.935-8.161 14.04-9.672 35.505-10.51l19.89-.777v-12.24l-20.158-.427c-19.83-.42-20.236-.498-24.864-4.822-6.297-5.379-4.706-14.057-4.706-21.528h25.52c26.61 0 33.313 1.153 40.037 6.885 7.692 6.558 7.889 8.02 7.889 58.833v47.51H86.375l-.475-5.62c-.26-3.091-.407-5.429-2.196-6.185-1.722-.727-4.24 2.662-8.158 5.62-5.47 4.129-6.729 6.18-16.64 6.053-36.927-.477-40.04-28.091-40.04-35.978zm63.276-12.94c-4.941-1.879-25.559-1.606-31.402.415-3.68 1.273-9.162 7.146-8.922 12.36s3.495 11.994 8.002 11.886c0 0 32.022 1.013 35.2-.792 1.676-.952 4.493-21.066-2.878-23.87z"/></svg>',xt='<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Amazon</title><path d="M.045 18.02c.072-.116.187-.124.348-.022 3.636 2.11 7.594 3.166 11.87 3.166 2.852 0 5.668-.533 8.447-1.595l.315-.14c.138-.06.234-.1.293-.13.226-.088.39-.046.525.13.12.174.09.336-.12.48-.256.19-.6.41-1.006.654-1.244.743-2.64 1.316-4.185 1.726a17.617 17.617 0 01-10.951-.577 17.88 17.88 0 01-5.43-3.35c-.1-.074-.151-.15-.151-.22 0-.047.021-.09.051-.13zm6.565-6.218c0-1.005.247-1.863.743-2.577.495-.71 1.17-1.25 2.04-1.615.796-.335 1.756-.575 2.912-.72.39-.046 1.033-.103 1.92-.174v-.37c0-.93-.105-1.558-.3-1.875-.302-.43-.78-.65-1.44-.65h-.182c-.48.046-.896.196-1.246.46-.35.27-.575.63-.675 1.096-.06.3-.206.465-.435.51l-2.52-.315c-.248-.06-.372-.18-.372-.39 0-.046.007-.09.022-.15.247-1.29.855-2.25 1.82-2.88.976-.616 2.1-.975 3.39-1.05h.54c1.65 0 2.957.434 3.888 1.29.135.15.27.3.405.48.12.165.224.314.283.45.075.134.15.33.195.57.06.254.105.42.135.51.03.104.062.3.076.615.01.313.02.493.02.553v5.28c0 .376.06.72.165 1.036.105.313.21.54.315.674l.51.674c.09.136.136.256.136.36 0 .12-.06.226-.18.314-1.2 1.05-1.86 1.62-1.963 1.71-.165.135-.375.15-.63.045a6.062 6.062 0 01-.526-.496l-.31-.347a9.391 9.391 0 01-.317-.42l-.3-.435c-.81.886-1.603 1.44-2.4 1.665-.494.15-1.093.227-1.83.227-1.11 0-2.04-.343-2.76-1.034-.72-.69-1.08-1.665-1.08-2.94l-.05-.076zm3.753-.438c0 .566.14 1.02.425 1.364.285.34.675.512 1.155.512.045 0 .106-.007.195-.02.09-.016.134-.023.166-.023.614-.16 1.08-.553 1.424-1.178.165-.28.285-.58.36-.91.09-.32.12-.59.135-.8.015-.195.015-.54.015-1.005v-.54c-.84 0-1.484.06-1.92.18-1.275.36-1.92 1.17-1.92 2.43l-.035-.02zm9.162 7.027c.03-.06.075-.11.132-.17.362-.243.714-.41 1.05-.5a8.094 8.094 0 011.612-.24c.14-.012.28 0 .41.03.65.06 1.05.168 1.172.33.063.09.099.228.099.39v.15c0 .51-.149 1.11-.424 1.8-.278.69-.664 1.248-1.156 1.68-.073.06-.14.09-.197.09-.03 0-.06 0-.09-.012-.09-.044-.107-.12-.064-.24.54-1.26.806-2.143.806-2.64 0-.15-.03-.27-.087-.344-.145-.166-.55-.257-1.224-.257-.243 0-.533.016-.87.046-.363.045-.7.09-1 .135-.09 0-.148-.014-.18-.044-.03-.03-.036-.047-.02-.077 0-.017.006-.03.02-.063v-.06z"/></svg>',bt="/factor/assets/bastillion-C8U43q6p.png",At="/factor/assets/betterment-qyE9Qf23.png",jt="data:image/png;base64,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",Ct="/factor/assets/guideline-BzofyXre.png",Nt="/factor/assets/id.me-DfyXe1at.png",kt="/factor/assets/justworks-BJD2k2It.jpg",Et=`<svg role="img" version="1.1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Microsoft</title><path d="m2.5 2.5h9v9h-9zm9 19h-9v-9h9zm10-19v9h-9v-9zm0 19h-9v-9h9z"/></svg>
`,St='<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Nintendo</title><path d="m4.447 12.546-1.202-1.942h-.864v2.793h.864v-1.942l1.202 1.942h.856v-2.793H4.44l.007 1.942Zm6.828-1.001v-.279h-.451v-.376h-.841v.376h-.458v.279h.458v1.852h.841v-1.852h.451Zm-5.491 1.844h.834v-1.852h-.834v1.852Zm0-2.213h.841v-.572h-.841v.572Zm14.663.233c-.676 0-1.224.467-1.224 1.039 0 .572.548 1.039 1.224 1.039.676 0 1.225-.467 1.225-1.039 0-.572-.549-1.039-1.225-1.039Zm.338 1.431c0 .293-.173.414-.338.414-.165 0-.346-.121-.346-.414v-.783c0-.294.173-.414.346-.414.165 0 .338.12.338.414v.783Zm-2.659-1.212a1.093 1.093 0 0 0-.473-.166c-.601-.053-1.067.482-1.067.971 0 .648.496.881.571.919.285.128.646.135.961-.068v.105h.827v-2.785h-.827c.008 0 .008.595.008 1.024Zm.008.828v.331c0 .286-.196.361-.331.361s-.331-.075-.331-.361v-.662c0-.287.196-.362.331-.362.128 0 .33.075.33.362v.331h.001Zm-9.556-1.001a1.02 1.02 0 0 0-.668.278v-.196h-.834v1.852h.834V12.17c0-.158.172-.339.398-.339.225 0 .383.181.383.339v1.219h.834v-1.008c0-.731-.631-.942-.947-.926Zm6.798 0a1.01 1.01 0 0 0-.668.278v-.196h-.834v1.852h.834V12.17c0-.158.173-.339.398-.339.225 0 .383.181.383.339v1.219h.834v-1.008c0-.731-.631-.942-.947-.926Zm-1.75 1.016c0-.572-.556-1.054-1.232-1.054-.683 0-1.232.467-1.232 1.039 0 .572.549 1.039 1.232 1.039.564 0 1.044-.324 1.187-.76h-.834v.112c0 .339-.225.414-.345.414-.128 0-.353-.075-.353-.413v-.385l1.577.008Zm-1.517-.655a.346.346 0 0 1 .293-.166c.112 0 .225.053.293.166.052.09.052.203.052.361h-.698c0-.158.007-.263.06-.361Zm9.893-.866c0-.09-.068-.135-.203-.135h-.188v.474h.113v-.196h.06l.09.196h.128l-.105-.211c.067-.022.105-.068.105-.128Zm-.218.068h-.06v-.136h.052c.068 0 .105.023.105.068 0 .053-.029.068-.097.068Zm.007-.392a.433.433 0 0 0-.428.43c0 .233.196.429.429.429a.429.429 0 0 0 0-.859h-.001Zm0 .776a.35.35 0 0 1-.345-.346.35.35 0 0 1 .346-.347.35.35 0 0 1 .345.347.35.35 0 0 1-.345.346h-.001Zm-.938-2.364H3.132C1.254 9.03 0 10.386 0 12.004s1.254 2.959 3.14 2.959h17.72c1.886 0 3.14-1.34 3.14-2.959-.007-1.618-1.269-2.966-3.147-2.966Zm-.008 5.202H3.14c-1.495.008-2.404-1.001-2.404-2.236 0-1.235.917-2.228 2.404-2.236h17.705c1.487 0 2.404 1.001 2.404 2.236 0 1.235-.909 2.236-2.404 2.236Z"/></svg>',Bt="data:image/png;base64,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",It='<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Twitter</title><path d="M21.543 7.104c.015.211.015.423.015.636 0 6.507-4.954 14.01-14.01 14.01v-.003A13.94 13.94 0 0 1 0 19.539a9.88 9.88 0 0 0 7.287-2.041 4.93 4.93 0 0 1-4.6-3.42 4.916 4.916 0 0 0 2.223-.084A4.926 4.926 0 0 1 .96 9.167v-.062a4.887 4.887 0 0 0 2.235.616A4.928 4.928 0 0 1 1.67 3.148 13.98 13.98 0 0 0 11.82 8.292a4.929 4.929 0 0 1 8.39-4.49 9.868 9.868 0 0 0 3.128-1.196 4.941 4.941 0 0 1-2.165 2.724A9.828 9.828 0 0 0 24 4.555a10.019 10.019 0 0 1-2.457 2.549z"/></svg>',Tt="/factor/assets/uwcu-Cguu5ZT9.png";function zt(e){if(!e)return;let n=Object.entries(Oe).filter(r=>e.toLowerCase().includes(r[1].title.toLowerCase())&&F(e.toLowerCase(),r[1].title.toLowerCase())<e.length/2).sort((r,s)=>F(e.toLowerCase(),r[1].title.toLowerCase())-F(e.toLowerCase(),s[1].title.toLowerCase()))[0];switch(e.toLowerCase()){case"accrue":return{svg:wt,title:"Accrue",hex:"ffffff",padding:"p-2",type:"Icon"};case"amazon":return{svg:xt,title:"Amazon",hex:"ff9900",padding:!0,type:"Icon"};case"bastillion":return{url:bt,padding:!0,type:"Image"};case"betterment":return{url:At,type:"Image"};case"carta":return{url:jt,type:"Image"};case"facebook":return{...Me,padding:!1,type:"Icon"};case"guideline":return{url:Ct,type:"Image"};case"id.me":return{url:Nt,type:"Image"};case"justworks":return{url:kt,type:"Image"};case"microsoft":return{svg:Et,title:"Microsoft",hex:"727272",padding:"p-1.5",type:"Icon"};case"nintendo":return{svg:St,title:"Nintendo",hex:"dd2020",padding:"p-1",type:"Icon"};case"nas":case"synology":return{...We,padding:"p-1.5",type:"Icon"};case"uw credit union":case"uwcu":return{url:Tt,padding:!0,type:"Image"};case"sequoia":return{url:Bt,padding:!0,type:"Image"};case"twitter":return{svg:It,title:"Twitter",hex:"00aced",padding:!0,type:"Icon"}}return n?{...n[1],type:"Icon",padding:!0}:void 0}const X="bg-slate-900",Lt="bg-slate-800";function Pt(e){if(!e||e.type==="Image")return{background:X,fill:Lt};const n=e;let r=X,s="#"+n.hex;switch(n.title.toLowerCase()){case"epic games":s="white";break;case"github":case"patreon":case"ubisoft":r="bg-slate-100";break}return{background:r,fill:s}}function oe({name:e,className:n}){const r=zt(e),s=Pt(r),o="w-12 h-12 rounded-full border border-slate-400 flex justify-center items-center aspect-square "+s.background+" "+n;if(!r)return console.warn(`No icon found for ${e}`),t.jsx("div",{className:o,children:t.jsx($,{})});const a=typeof r.padding=="string"?r.padding:void 0;return r.type==="Image"?t.jsx("img",{src:r.url,className:B(o,"object-cover",a||r.padding&&"p-1")}):t.jsx("div",{dangerouslySetInnerHTML:{__html:r.svg},className:B(o,a||(r.padding?"p-2.5":"p-0.5")),style:{fill:s.fill}})}function Rt({close:e,onScan:n}){return t.jsx("div",{className:"absolute inset-0 w-screen h-screen bg-black flex justify-center z-10",children:t.jsxs("div",{className:"relative w-[100vh] p-2",children:[t.jsx("div",{className:"absolute bottom-14 right-0 left-0 z-10 flex justify-center",children:t.jsx("button",{className:"icon",onClick:e,children:t.jsx(Z,{})})}),t.jsx(Ue,{sound:!1,onScan:async r=>{const s=r[0]?.rawValue;if(s)try{const o=new URL(s),a=decodeURIComponent(o.pathname.replace("//totp/","")).split(":")[0],i=o.searchParams.get("secret");if(o.protocol!=="otpauth:"||!a||!i)throw new Error(`Invalid URL: ${o.toString()}`);n(a,i),e()}catch(o){console.error(o),y.error("Failed to scan qr code")}},onError:r=>console.error(r)})]})})}function Dt(){const[e,n]=c.useState(null);return[c.useCallback(async s=>{if(!navigator?.clipboard)return console.warn("Clipboard not supported"),!1;try{return await navigator.clipboard.writeText(s),n(s),!0}catch(o){return console.warn("Copy failed",o),n(null),!1}},[]),e]}function Ft(){const[e,n]=c.useState(!1);return c.useEffect(()=>{const r=()=>{n(window.innerWidth<500)};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),e}const E=new Map;function O({data:e,userRef:n,timestamp:r,onEdit:s,setEditMode:o,editMode:a,addRecentKey:i}){const l=c.useContext(D)||"",[f,h]=c.useState(E.get(e.name)||""),[g,v]=c.useState(0),[u,x]=c.useState("Token Error"),p=Ft(),[C]=Dt(),w=c.useCallback(()=>{a?s():g===0?v(1):m()},[a,g]),A=P(()=>o(!a),w);c.useEffect(()=>{f.length>0&&v(2)},[]),c.useEffect(()=>{if(g!==0){if(E.has(e.name)){h(E.get(e.name)||"");return}k.decrypt(l,e.secret).then(d=>{h(d.secret),E.set(e.name,d.secret)}).catch(d=>{console.error(d),h("Error"),E.delete(e.name)})}},[e.secret,l,g]),c.useEffect(()=>{let d;return g!==0&&(d=setTimeout(()=>{v(0)},30*1e3)),()=>{d&&clearTimeout(d)}},[g]);const N=Math.floor(r.getTime()/3e4);c.useEffect(()=>{if(f.length===0||f==="Error"||g===0){x("Token Error");return}xe.generate(f.replace(/\s+/g,""),{timestamp:N*3e4}).then(({otp:d})=>x(d)).catch(d=>{console.error(d),x("Token Error")})},[f,N,g]);const m=c.useCallback(()=>{C(u).then(d=>{d&&u!=="Token Error"?y.success(e.name+" code copied",{autoClose:2500}):y.error("Failed to copy code",{autoClose:2500})}),i(e.name)},[u,e,p,C]);return c.useEffect(()=>{g===1&&u!=="Token Error"&&(m(),v(2))},[g,u]),e.archived&&!a?null:t.jsxs("div",{className:B("p-3 bg-slate-800 border border-slate-700 rounded-md select-none flex gap-6 justify-between items-center hover:brightness-[90%] relative cursor-pointer transition-all rotate-0",a&&"animate-wiggle",e.archived&&"opacity-50"),style:{animationDelay:`${Math.random()*250}ms`},tabIndex:0,...A(),onKeyDown:d=>{(d.key==="Enter"||d.key===" ")&&w()},children:[t.jsxs("div",{className:"flex gap-4",children:[t.jsx(oe,{name:e.name}),t.jsxs("div",{className:"flex flex-col items-start justify-center",children:[t.jsx("h2",{className:"font-bold capitalize",children:e.name}),t.jsx("div",{children:g===0?"*** ***":f.length===0?"Decrypting...":u==="Token Error"?"Token Error":t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"mr-2",children:u.slice(0,3)}),t.jsx("span",{children:u.slice(3,6)})]})})]})]}),t.jsx("button",{className:"remove absolute -top-3 right-6 !p-1 text-slate-800 bg-white border border-slate-400 rounded-full sm:hover:bg-warning transition-all duration-300",style:{pointerEvents:a?"auto":"none",opacity:a?1:0},tabIndex:a?0:-1,onClick:async d=>{d.stopPropagation(),window.confirm(`Are you sure you want to ${e.archived?"unarchive":"archive"} ${e.name}?`)&&(await j(n,{keys:z({name:e.name,secret:e.secret,archived:e.archived})}),await j(n,{keys:R({name:e.name,secret:e.secret,archived:!e.archived})}))},onMouseDown:d=>d.stopPropagation(),onTouchStart:d=>d.stopPropagation(),onPointerDown:d=>d.stopPropagation(),children:t.jsx(be,{})}),t.jsx("button",{className:"remove absolute -top-3 -right-3 !p-1 text-slate-800 bg-white border border-slate-400 rounded-full hover:text-white sm:hover:bg-danger transition-all duration-300",style:{pointerEvents:a?"auto":"none",opacity:a?1:0},tabIndex:a?0:-1,onClick:d=>{d.stopPropagation(),window.confirm(`Are you sure you want to remove ${e.name}? This cannot be undone!`)&&window.confirm(`Are you really sure you want to delete ${e.name}?`)&&j(n,{keys:z(e)})},onMouseDown:d=>d.stopPropagation(),onTouchStart:d=>d.stopPropagation(),onPointerDown:d=>d.stopPropagation(),children:t.jsx(Z,{})})]})}function Ot(e){const[n,r]=c.useState(e.name||""),[s,o]=c.useState(""),[a,i]=c.useState(!1),[l,f]=c.useState(!0),[h,g]=c.useState(!1),[v,u]=c.useState(!1),x=c.useContext(D)||"",p=e.name||e.secret;c.useEffect(()=>{if(e.name&&e.secret){if(E.has(e.name)){o(E.get(e.name));return}u(!0),k.decrypt(x,e.secret).then(w=>{o(w.secret)}).catch(w=>{console.error(w),y.error("Failed to decrypt token.",{autoClose:2500}),e.close()}).finally(()=>u(!1))}},[]);const C=async(w,A)=>{if(w===""||A===""){y.error("Name and secret are required");return}if(p&&e.name===w&&e.secret===A){e.close();return}try{g(!0),p&&(await j(e.userRef,{keys:z({name:e.name,secret:e.secret,archived:e.archived})}),e.name&&E.delete(e.name));const N=await k.encrypt(x,{secret:A});await j(e.userRef,{keys:R({name:w,secret:N,archived:e.archived})}),r(""),o(""),f(!0),e.close()}catch(N){console.error(N),y.error("Failed to add key")}finally{g(!1)}};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex flex-col gap-8",onKeyDown:w=>{w.key==="Enter"&&C(n,s)},children:[t.jsxs("div",{className:"flex gap-4 items-center",children:[t.jsx(oe,{name:n,className:"w-14 h-14 sm:w-16 sm:h-16"}),t.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[t.jsx("input",{value:n,onChange:w=>r(w.target.value),placeholder:"Site name",autoFocus:!0,autoComplete:"false",type:"text"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{value:s,onChange:w=>o(w.target.value),placeholder:v?"Decrypting":"Secret",autoComplete:"false",type:l?"password":"text",disabled:v}),t.jsx("button",{className:"absolute right-0 top-0 bottom-0 flex items-center cursor-pointer bg-transparent",onClick:()=>f(!l),children:l?t.jsx(Ae,{}):t.jsx(je,{})})]})]})]}),t.jsxs("div",{className:"flex gap-4",children:[!p&&t.jsx("button",{onClick:()=>i(!0),children:t.jsx(Ce,{})}),t.jsx("button",{onClick:()=>C(n,s),className:"flex-1",disabled:h,children:h?p?"Saving":"Adding":p?"Save":"Add"})]})]}),a&&t.jsx(Rt,{close:()=>i(!1),onScan:(w,A)=>{r(w),o(A)}})]})}function Wt({onClose:e,title:n,children:r}){return t.jsx("div",{className:"fixed z-30 inset-0 bg-slate-900 bg-opacity-75 flex justify-center items-center backdrop-blur-sm",onClick:e,onKeyDown:s=>{s.key==="Escape"&&e()},children:t.jsxs("div",{className:"bg-slate-700 rounded-lg p-8 w-full",onClick:s=>s.stopPropagation(),style:{marginTop:"calc(-1 * env(keyboard-inset-height))",maxWidth:"min(80vw, 600px)"},children:[t.jsxs("div",{className:"flex items-center mb-8",children:[t.jsx("h2",{className:"flex-1 text-xl font-medium",children:n}),t.jsx("button",{onClick:e,className:"px-2 bg-slate-600 border-2 border-slate-800",children:t.jsx(Z,{})})]}),r]})})}function Mt({userData:e,userRef:n,editMode:r,setEditMode:s,editKey:o,setEditKey:a,lock:i}){const{timestamp:l}=mt(),f=vt(),h=c.useContext(D)||"",[g,v]=c.useState(""),[u,x]=c.useState(!1),[p,C]=c.useState();c.useEffect(()=>()=>{s(!1),a(!1)},[]),c.useEffect(()=>{r&&navigator.vibrate&&navigator.vibrate(200)},[r]);const w=c.useCallback(async m=>{let b=[...e.recentKeys||[]];b.includes(m)&&(b=b.filter(H=>H!==m)),b.unshift(m),b.length>4&&(b=b.slice(0,4)),JSON.stringify(b)!==JSON.stringify(e.recentKeys)&&await j(n,{recentKeys:b})},[e.recentKeys,n]),A=c.useCallback(m=>{a(!0),C({name:m.name,secret:m.secret,archived:m.archived})},[h,a,C]),N="w-full grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6 transition-all";return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex flex-col gap-4 m-6 sm:m-8 items-center pb-24",children:e.keys?.length===0?t.jsx("div",{className:"text-center text-lg bg-slate-800 p-8 w-full rounded-md",children:"No keys added yet"}):t.jsxs("div",{className:"w-full max-w-screen-lg",children:[t.jsxs("div",{className:"flex gap-4 sm:gap-6 items-center mb-10",children:[t.jsx("button",{onClick:i,className:"p-0 bg-transparent",title:"Lock",children:t.jsx("img",{src:re,className:"h-10 aspect-square object-contain -mb-0.5"})}),t.jsxs("div",{className:"relative w-full",children:[t.jsx("input",{className:"pl-10",type:"search",value:g,placeholder:"Search tokens",onChange:m=>v(m.target.value),autoFocus:!0,onFocus:()=>x(!0),onBlur:()=>x(!1)}),t.jsx(Ne,{className:"fill-slate-400 absolute left-3 top-[11px] h-4"})]})]}),e.recentKeys.length>0&&g.length===0&&t.jsxs("div",{className:T("grid gap-4 sm:gap-6 mb-4 sm:mb-6 transition-all",u&&"opacity-50 blur-sm"),children:[t.jsx("h2",{className:"m-0 text-xl leading-none",children:"Recently Used"}),t.jsx("div",{className:N,children:e.recentKeys.slice(0,f==="sm"||f==="lg"?3:4).map(m=>{const d=e.keys.find(b=>b.name===m);if(d)return t.jsx(O,{data:d,userRef:n,timestamp:l,onEdit:()=>A(d),setEditMode:s,editMode:r,addRecentKey:w},d.name+d.secret)})}),t.jsx("hr",{className:"border-slate-700"})]}),t.jsx("div",{className:T(N,u&&g.length===0&&"opacity-50 blur-sm"),children:e.keys.filter(m=>(g.length===0||m.name.toLowerCase().includes(g.toLowerCase()))&&!m.archived).sort((m,d)=>m.name.localeCompare(d.name)).map(m=>t.jsx(O,{data:m,userRef:n,timestamp:l,onEdit:()=>A(m),setEditMode:s,editMode:r,addRecentKey:w},m.name+m.secret))}),r&&t.jsxs("div",{className:"mt-4 pt-4 sm:mt-6 sm:pt-6 border-t-2 border-slate-700",children:[t.jsx("h2",{className:"mb-4 sm:mb-6 text-xl leading-none",children:"Archived Tokens"}),t.jsx("div",{className:N,children:e.keys.filter(m=>(g.length===0||m.name.toLowerCase().includes(g.toLowerCase()))&&m.archived).sort((m,d)=>m.name.localeCompare(d.name)).map(m=>t.jsx(O,{data:m,userRef:n,timestamp:l,onEdit:()=>A(m),setEditMode:s,editMode:r,addRecentKey:w},m.name+m.secret))})]})]})}),o&&t.jsx(Wt,{title:p?.name||p?.secret?"Edit existing key":"Add a new key",onClose:()=>{a(!1),C(void 0)},children:t.jsx(Ot,{name:p?.name,secret:p?.secret,archived:p?.archived||!1,userRef:n,close:()=>{a(!1),C(void 0)}})})]})}function Ut(){const[e,n,r]=U(I);return Ve(),n||r?t.jsx(L,{children:r&&t.jsxs("p",{children:["Error: ",r.message]})}):e?t.jsx(Zt,{user:e}):t.jsx(L,{children:t.jsx(dt,{})})}async function V(e){let n="",r=0;for(;n.length!==6&&r<3;)n=prompt("Set a new 6 digit pin")||"",r++;if(n.length===6&&(prompt("Re-enter 6 digit pin")||"")!==n){y.error("Pins do not match");return}if(n.length===6){e||(e=crypto.getRandomValues(new Uint32Array(32)).toString());try{return await k.encrypt(n,{token:e})}catch(s){console.error(s)}}}function q({className:e}){const[n,r]=c.useState(!1),s=Qe(),o="It looks like you are currently offline. It is not recommend to add/edit keys offline to avoid sync conflicts.";return c.useEffect(()=>{!s&&!n&&(y.error(o,{autoClose:5e3}),r(!0))},[s,n]),s?null:t.jsx(ke,{className:T("text-danger fixed bottom-2 left-2 text-2xl z-20 "+e),title:o})}function Zt({user:e}){const{data:n,loading:r,error:s,userRef:o}=Je(),[a,i]=c.useState(),[l,f]=c.useState(!1),[h,g]=c.useState(!1);He(o,n),Ze(i),c.useEffect(()=>{!r&&!s&&!n&&V().then(u=>{u?Fe(o,{keys:[],recentKeys:[],email:e.email||"",code:u,webauthn:[]}):y.error("Failed to create user")})},[n,r,s]);const v=async()=>{if(!confirm("Would you like to update your pin?"))return;const u=await V(a);u?j(o,{code:u}):y.error("Failed to update pin")};return r||s||!n?t.jsxs(L,{children:[s&&t.jsxs("p",{children:["Error: ",s.message]}),!n&&t.jsx("p",{children:"No data"})]}):a?t.jsxs(D.Provider,{value:a,children:[t.jsx(q,{}),t.jsx(Mt,{userData:n,userRef:o,editMode:l,setEditMode:f,editKey:h,setEditKey:g,lock:()=>i(void 0)}),t.jsx(yt,{}),t.jsx(gt,{lock:()=>i(void 0),updateCode:v,editMode:l,setEditKey:g,setEditMode:f,exportKeys:()=>_e(a,n),importKeys:()=>$e(a,n,o)})]}):t.jsxs(t.Fragment,{children:[t.jsx(q,{className:"!bottom-4 !left-4 top-auto"}),t.jsx(ut,{unlock:u=>i(u),encryptedCode:n?.code,data:n,userRef:o})]})}window.global||=window;globalThis.Buffer=Ee.Buffer;const Ht=matchMedia("(display-mode: browser)").matches;Ht||window.resizeTo(500,760);const J=navigator;J.virtualKeyboard&&(J.virtualKeyboard.overlaysContent=!0);function Qt(){return t.jsxs(t.Fragment,{children:[t.jsx(Ut,{}),t.jsx(Se,{theme:"dark",position:"bottom-center",transition:Be,hideProgressBar:!0,closeButton:!1,autoClose:5e3})]})}ae.createRoot(document.getElementById("root")).render(t.jsx(Qt,{}));export{Ye as _,en as a,_t as c,$t as g};
//# sourceMappingURL=index-BrdSWd7w.js.map
