{"version":3,"mappings":"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","names":["registerSW","options","immediate","onNeedRefresh","onOfflineReady","onRegistered","onRegisteredSW","onRegisterError","wb","registerPromise","sendSkipWaitingMessage","updateServiceWorker","_reloadPage","register","__vitePreload","n","Workbox","e","onNeedRefreshCalled","showSkipWaitingPrompt","event","r","CodeContext","createContext","firebaseConfig","app","initializeApp","auth","getAuth","db","initializeFirestore","persistentLocalCache","useUserData","user","useAuthState","userRef","doc","value","loading","error","useDocument","image","Logo","className","LogoPage","children","props","jsxs","jsx","Lock","unlock","encryptedCode","ref","useRef","signOut","useSignOut","useEffect","_a","onCodeEntered","code","decrypted","decrypt","err","toast","input","terminate","clearIndexedDbPersistence","FaSignOutAlt","PinField","Login","signInWithGoogle","useSignInWithGoogle","Menu","lock","updateCode","editMode","setEditMode","setEditKey","buttonClass","bindLock","useLongPress","reason","LongPressCallbackReason","bindPlus","FaPlus","FaLock","useRefreshTimer","timestamp","setTimestamp","useState","time","setTime","timeInt","timestampInt","tailwindConfig","useTailwind","useMemo","resolveConfig","bastillion","betterment","carta","guideline","idme","justworks","uwcu","getIcon","name","icon","icons","levenshtein","a","b","icons.siSynology","darkColor","lightColor","getColors","background","fill","AppIcon","colors","imgClass","QR","close","onScan","FaTimes","Scanner","text","url","secret","EditKey","setName","setSecret","scan","setScan","token","useContext","editing","addKey","updateDoc","arrayRemove","encryptedSecret","encrypt","arrayUnion","Fragment","FaQrcode","useCopyToClipboard","copiedText","setCopiedText","useCallback","useIsMobile","isMobile","setIsMobile","handleResize","TokenCard","data","onEdit","index","encryptionToken","hidden","setHidden","copy","bindPress","copyToken","timeChunk","TOTP","result","userData","editKey","search","setSearch","keyToEdit","setKeyToEdit","tailwind","remainingMs","remainingSeconds","tokens","k","key","i","CircularProgressbar","buildStyles","App","Authorized","promptCode","tries","setToken","listener","setDoc","Buffer","updateSW","isBrowser","nav","Container","ToastContainer","Zoom","createRoot"],"ignoreList":[],"sources":["../../../../../../../@vite-plugin-pwa/virtual:pwa-register","../../src/contexts/CodeContext.tsx","../../src/util/firebase.ts","../../src/hooks/useUserData.tsx","../../src/images/logo.png","../../src/components/Logo.tsx","../../src/components/Lock.tsx","../../src/components/Login.tsx","../../src/components/Menu.tsx","../../src/hooks/useRefreshTimer.tsx","../../tailwind.config.ts","../../src/hooks/useTailwind.ts","../../src/images/bastillion.png","../../src/images/betterment.png","../../src/images/carta.png","../../src/images/guideline.png","../../src/images/id.me.png","../../src/images/justworks.jpg","../../src/images/uwcu.png","../../src/components/AppIcon.tsx","../../src/components/QR.tsx","../../src/components/EditKey.tsx","../../src/hooks/useCopyToClipboard.ts","../../src/hooks/useIsMobile.ts","../../src/components/TokenCard.tsx","../../src/components/TOTP.tsx","../../src/components/App.tsx","../../src/index.tsx"],"sourcesContent":["// src/client/build/register.ts\nvar autoUpdateMode = \"false\";\nvar selfDestroying = \"false\";\nvar auto = autoUpdateMode === \"true\";\nvar autoDestroy = selfDestroying === \"true\";\nfunction registerSW(options = {}) {\n  const {\n    immediate = false,\n    onNeedRefresh,\n    onOfflineReady,\n    onRegistered,\n    onRegisteredSW,\n    onRegisterError\n  } = options;\n  let wb;\n  let registerPromise;\n  let sendSkipWaitingMessage;\n  const updateServiceWorker = async (_reloadPage = true) => {\n    await registerPromise;\n    if (!auto) {\n      await sendSkipWaitingMessage?.();\n    }\n  };\n  async function register() {\n    if (\"serviceWorker\" in navigator) {\n      wb = await import(\"workbox-window\").then(({ Workbox }) => {\n        return new Workbox(\"/factor/sw.js\", { scope: \"/factor/\", type: \"classic\" });\n      }).catch((e) => {\n        onRegisterError?.(e);\n        return void 0;\n      });\n      if (!wb)\n        return;\n      sendSkipWaitingMessage = async () => {\n        await wb?.messageSkipWaiting();\n      };\n      if (!autoDestroy) {\n        if (auto) {\n          wb.addEventListener(\"activated\", (event) => {\n            if (event.isUpdate || event.isExternal)\n              window.location.reload();\n          });\n          wb.addEventListener(\"installed\", (event) => {\n            if (!event.isUpdate) {\n              onOfflineReady?.();\n            }\n          });\n        } else {\n          let onNeedRefreshCalled = false;\n          const showSkipWaitingPrompt = () => {\n            onNeedRefreshCalled = true;\n            wb?.addEventListener(\"controlling\", (event) => {\n              if (event.isUpdate)\n                window.location.reload();\n            });\n            onNeedRefresh?.();\n          };\n          wb.addEventListener(\"installed\", (event) => {\n            if (typeof event.isUpdate === \"undefined\") {\n              if (typeof event.isExternal !== \"undefined\") {\n                if (event.isExternal)\n                  showSkipWaitingPrompt();\n                else\n                  !onNeedRefreshCalled && onOfflineReady?.();\n              } else {\n                if (event.isExternal)\n                  window.location.reload();\n                else\n                  !onNeedRefreshCalled && onOfflineReady?.();\n              }\n            } else if (!event.isUpdate) {\n              onOfflineReady?.();\n            }\n          });\n          wb.addEventListener(\"waiting\", showSkipWaitingPrompt);\n          wb.addEventListener(\"externalwaiting\", showSkipWaitingPrompt);\n        }\n      }\n      wb.register({ immediate }).then((r) => {\n        if (onRegisteredSW)\n          onRegisteredSW(\"/factor/sw.js\", r);\n        else\n          onRegistered?.(r);\n      }).catch((e) => {\n        onRegisterError?.(e);\n      });\n    }\n  }\n  registerPromise = register();\n  return updateServiceWorker;\n}\nexport {\n  registerSW\n};\n","import { createContext } from 'react';\n\nexport const CodeContext = createContext<string | undefined>(undefined);\n","import { initializeApp } from 'firebase/app';\nimport { getAuth } from 'firebase/auth';\nimport { initializeFirestore, persistentLocalCache } from 'firebase/firestore';\n\n// Your web app's Firebase configuration\nconst firebaseConfig = {\n  apiKey: 'AIzaSyDMQ4jffBbrLTjdhy_qS4GeZdbYtzEKHp4',\n  authDomain: 'factor-97c20.firebaseapp.com',\n  projectId: 'factor-97c20',\n  storageBucket: 'factor-97c20.appspot.com',\n  messagingSenderId: '524844196447',\n  appId: '1:524844196447:web:9d5f59006ec0b8e68d31ea',\n};\n\n// Initialize Firebase\nexport const app = initializeApp(firebaseConfig);\nexport const auth = getAuth(app);\nexport const db = initializeFirestore(app, { localCache: persistentLocalCache() });\n","import { DocumentReference, doc } from 'firebase/firestore';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { useDocument } from 'react-firebase-hooks/firestore';\n\nimport { auth, db } from '../util/firebase';\n\nexport interface UserData {\n  email: string;\n  keys: Key[];\n  code: string;\n}\n\nexport interface Key {\n  name: string;\n  secret: string;\n}\n\nexport function useUserData() {\n  const [user] = useAuthState(auth);\n  const userRef = doc(db, 'users', user?.uid || '') as DocumentReference<UserData>;\n  const [value, loading, error] = useDocument(userRef);\n\n  return { value, loading, error, userRef };\n}\n","export default \"__VITE_ASSET__DacSPZ0B__\"","import image from '../images/logo.png';\n\nexport function Logo({ className }: { className?: string }) {\n  return <img src={image} className={'h-52 mb-10 mt-4 ' + className} />;\n}\n\nexport function LogoPage({\n  className,\n  children,\n  ...props\n}: {\n  className?: string;\n  children?: React.ReactNode;\n  [key: string]: any;\n}) {\n  return (\n    <div className=\"w-screen h-[100svh] flex flex-col justify-center items-center\" {...props}>\n      <h1 className=\"mt-30 text-center text-5xl font-bold mb-2\">Factor</h1>\n      <Logo className={className} />\n      {children}\n    </div>\n  );\n}\n","import { decrypt } from '@metamask/browser-passworder';\nimport { clearIndexedDbPersistence, terminate } from 'firebase/firestore';\nimport { useEffect, useRef } from 'react';\nimport { useSignOut } from 'react-firebase-hooks/auth';\nimport { FaSignOutAlt } from 'react-icons/fa';\nimport PinField from 'react-pin-field';\nimport { toast } from 'react-toastify';\n\nimport { auth, db } from '../util/firebase';\nimport { LogoPage } from './Logo';\n\nlet unlocked = false;\n\nexport function Lock({ unlock, encryptedCode }: { unlock: (code: string) => void; encryptedCode: string }) {\n  const ref = useRef<HTMLInputElement[]>(null);\n  const [signOut] = useSignOut(auth);\n\n  useEffect(() => {\n    setTimeout(() => ref.current?.[0].focus(), 250);\n\n    if (process.env.NODE_ENV === 'development' && !unlocked) {\n      onCodeEntered(import.meta.env.VITE_CODE);\n      unlocked = true;\n    }\n  }, []);\n\n  const onCodeEntered = async (code: string) => {\n    if (code?.length === 6) {\n      try {\n        const decrypted = (await decrypt(code, encryptedCode)) as { token: string };\n        unlock(decrypted.token);\n      } catch (err) {\n        console.log(err, code);\n        toast.error('Invalid code');\n      }\n    }\n\n    if (ref.current) {\n      ref.current.forEach((input) => {\n        input.value = '';\n      });\n      ref.current[0].focus();\n    }\n  };\n\n  return (\n    <LogoPage\n      onClick={() => {\n        if (ref.current) ref.current[0].focus();\n      }}\n      style={{ marginTop: 'calc(-1 * env(keyboard-inset-height) / 2)' }}\n    >\n      <button\n        className=\"icon fixed top-4 right-4 bg-danger\"\n        onClick={async () => {\n          try {\n            await signOut();\n            await terminate(db);\n            await clearIndexedDbPersistence(db);\n          } catch (err) {\n            console.error(err);\n          }\n        }}\n      >\n        <FaSignOutAlt />\n      </button>\n\n      <div className=\"flex\">\n        <PinField\n          length={6}\n          className=\"border border-slate-500 w-11 sm:w-12 h-14 m-1.5 rounded-lg text-center text-6xl p-1\"\n          type=\"password\"\n          inputMode=\"numeric\"\n          ref={ref}\n          onComplete={onCodeEntered}\n          onClick={(e) => e.stopPropagation()}\n        />\n      </div>\n    </LogoPage>\n  );\n}\n","import { useAuthState, useSignInWithGoogle } from 'react-firebase-hooks/auth';\n\nimport { auth } from '../util/firebase';\nimport './Login.css';\n\nexport function Login() {\n  const [user] = useAuthState(auth);\n  const [signInWithGoogle, , loading, error] = useSignInWithGoogle(auth);\n\n  return (\n    <div className=\"w-screen h-screen flex justify-center items-center flex-col\">\n      {!user && !loading && (\n        <button onClick={() => signInWithGoogle()} className=\"gsi-material-button\">\n          <div className=\"gsi-material-button-state\"></div>\n          <div className=\"gsi-material-button-content-wrapper\">\n            <div className=\"gsi-material-button-icon\">\n              <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\" style={{ display: 'block' }}>\n                <path\n                  fill=\"#EA4335\"\n                  d=\"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z\"\n                ></path>\n                <path\n                  fill=\"#4285F4\"\n                  d=\"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z\"\n                ></path>\n                <path\n                  fill=\"#FBBC05\"\n                  d=\"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z\"\n                ></path>\n                <path\n                  fill=\"#34A853\"\n                  d=\"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z\"\n                ></path>\n                <path fill=\"none\" d=\"M0 0h48v48H0z\"></path>\n              </svg>\n            </div>\n            <span className=\"gsi-material-button-contents\">Sign in with Google</span>\n            <span style={{ display: 'none' }}>Sign in with Google</span>\n          </div>\n        </button>\n      )}\n\n      {loading && <p>Loading...</p>}\n      {error && <p>Error: {error.message}</p>}\n    </div>\n  );\n}\n","import { FaLock, FaPlus } from 'react-icons/fa';\nimport { LongPressCallbackReason, useLongPress } from 'use-long-press';\n\nexport function Menu({\n  lock,\n  updateCode,\n  editMode,\n  setEditMode,\n  setEditKey,\n}: {\n  lock: () => void;\n  updateCode: () => void;\n  editMode: boolean;\n  setEditMode: (value: boolean) => void;\n  setEditKey: (value: boolean) => void;\n}) {\n  const buttonClass = 'p-4 rounded-full';\n\n  const bindLock = useLongPress(updateCode, {\n    threshold: 600,\n    onCancel: (e, { reason }) => {\n      if (reason === LongPressCallbackReason.CancelledByRelease) {\n        lock();\n      }\n    },\n  });\n\n  const bindPlus = useLongPress(\n    () => {\n      setEditMode(true);\n    },\n    {\n      threshold: 600,\n      onCancel: (e, { reason }) => {\n        if (reason === LongPressCallbackReason.CancelledByRelease) {\n          if (editMode) {\n            setEditMode(false);\n          } else {\n            setTimeout(() => setEditKey(true), 10); // Delay to prevent immediate closing of modal (not sure why)\n          }\n        }\n      },\n    }\n  );\n\n  return (\n    <div className=\"fixed bottom-8 right-8 flex gap-4 z-20\">\n      <button\n        className={buttonClass + ' !bg-slate-800 !text-primary outline outline-primary outline-2 -outline-offset-2'}\n        {...bindPlus()}\n      >\n        <FaPlus />\n      </button>\n      <button className={'transition-transform ' + buttonClass + (editMode ? ' rotate-45' : '')} {...bindLock()}>\n        <FaLock />\n      </button>\n    </div>\n  );\n}\n","import { useEffect, useState } from 'react';\n\nexport function useRefreshTimer() {\n  const [timestamp, setTimestamp] = useState(new Date());\n  const [time, setTime] = useState(new Date());\n\n  useEffect(() => {\n    // 1 second refresh\n    const timeInt: NodeJS.Timeout = setInterval(() => setTime(new Date()), 1000);\n\n    // 30 second refresh (updated at 0 seconds, 30 seconds, 60 seconds, etc.)\n    let timestampInt: NodeJS.Timeout;\n    setTimeout(\n      () => {\n        setTimestamp(new Date());\n        timestampInt = setInterval(() => setTimestamp(new Date()), 30000);\n      },\n      30000 - (new Date().getTime() % 30000)\n    );\n\n    return () => {\n      if (timestampInt) clearInterval(timestampInt);\n      clearInterval(timeInt);\n    };\n  }, []);\n\n  return { time, timestamp };\n}\n","import type { Config } from 'tailwindcss';\n\nexport default {\n  content: ['./index.html', './src/**/*.{js,ts,jsx,tsx}'],\n  theme: {\n    extend: {\n      colors: {\n        primary: '#4b888d',\n        secondary: '#051524',\n        danger: '#f07f7b',\n      },\n      keyframes: {\n        wiggle: {\n          '0%, 100%': { transform: 'rotate(-0.5deg)' },\n          '50%': { transform: 'rotate(0.5deg)' },\n        },\n      },\n      animation: {\n        wiggle: 'wiggle 400ms ease-in-out infinite',\n      },\n    },\n  },\n  plugins: [],\n} satisfies Config;\n","// From https://stackoverflow.com/a/77346945/2303432\nimport { useMemo } from 'react';\nimport resolveConfig from 'tailwindcss/resolveConfig';\n\nimport tailwindConfig from '../../tailwind.config';\n\nexport function useTailwind() {\n  const tailwind = useMemo(() => resolveConfig(tailwindConfig), [tailwindConfig]);\n\n  return tailwind;\n}\n","export default \"__VITE_ASSET__99MNPCbu__\"","export default \"__VITE_ASSET__CrsehJcA__\"","export default \"data:image/png;base64,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\"","export default \"__VITE_ASSET__BLZOQSg___\"","export default \"__VITE_ASSET__DCoqmqOO__\"","export default \"__VITE_ASSET__B7uRQWw___\"","export default \"__VITE_ASSET__BV6AmmmG__\"","import levenshtein from 'js-levenshtein';\nimport { FaLock } from 'react-icons/fa';\nimport * as icons from 'simple-icons';\n\nimport bastillion from '../images/bastillion.png';\nimport betterment from '../images/betterment.png';\nimport carta from '../images/carta.png';\nimport guideline from '../images/guideline.png';\nimport idme from '../images/id.me.png';\nimport justworks from '../images/justworks.jpg';\nimport uwcu from '../images/uwcu.png';\n\ninterface Icon {\n  svg: string;\n  hex: string;\n  title: string;\n}\n\nfunction getIcon(name?: string): Icon | string | undefined {\n  if (!name) return undefined;\n\n  let icon = Object.entries(icons)\n    .filter(\n      (e) =>\n        name.toLowerCase().includes(e[1].title.toLowerCase()) &&\n        levenshtein(name.toLowerCase(), e[1].title.toLowerCase()) < name.length / 2\n    )\n    .sort((a, b) => {\n      return (\n        levenshtein(name.toLowerCase(), a[1].title.toLowerCase()) -\n        levenshtein(name.toLowerCase(), b[1].title.toLowerCase())\n      );\n    })[0];\n\n  // handle one-off cases\n  switch (name) {\n    case 'Bastillion':\n      return bastillion;\n    case 'Betterment':\n      return betterment;\n    case 'Carta':\n      return carta;\n    case 'Guideline':\n      return guideline;\n    case 'ID.me':\n      return idme;\n    case 'Justworks':\n      return justworks;\n    case 'NAS':\n      return icons.siSynology;\n    case 'UW Credit Union':\n      return uwcu;\n    default:\n      break;\n  }\n\n  return icon ? icon[1] : undefined;\n}\n\nconst darkColor = 'bg-slate-900';\nconst lightColor = 'bg-slate-800';\nfunction getColors(icon?: Icon | string): { background: string; fill?: string } {\n  if (!icon || typeof icon === 'string') return { background: darkColor, fill: lightColor };\n\n  // const dark = icon ? isDarkColor('#' + icon.hex) : false;\n  // let background = dark ? darkColor : lightColor;\n  let background = darkColor;\n  let fill = '#' + icon.hex;\n\n  // handle one-off cases\n  switch (icon.title) {\n    case 'Amazon':\n      background = darkColor;\n      break;\n    case 'GitHub':\n    case 'Patreon':\n    case 'Ubisoft':\n      background = 'bg-slate-300';\n      break;\n  }\n\n  return { background, fill };\n}\n\nexport function AppIcon({ name }: { name: string }) {\n  const icon = getIcon(name);\n  const colors = getColors(icon);\n\n  const imgClass = 'w-12 h-12 rounded-full border border-slate-400 ' + colors.background;\n\n  if (typeof icon === 'string') return <img src={icon} className={imgClass + ' object-cover'} />;\n\n  return icon ? (\n    <div\n      dangerouslySetInnerHTML={{ __html: icon.svg }}\n      className={`${imgClass} p-3 flex justify-center items-center`}\n      style={{ fill: colors.fill }}\n    />\n  ) : (\n    <div className={imgClass + ' flex justify-center items-center'}>\n      <FaLock />\n    </div>\n  );\n}\n","import { Scanner } from '@yudiel/react-qr-scanner';\nimport { FaTimes } from 'react-icons/fa';\nimport { toast } from 'react-toastify';\n\nexport function QR({ close, onScan }: { close: () => void; onScan: (name: string, secret: string) => void }) {\n  return (\n    <div className=\"absolute inset-0 w-screen h-screen bg-black flex justify-center z-10\">\n      <div className=\"relative w-[100vh] p-2\">\n        <div className=\"absolute bottom-14 right-0 left-0 z-10 flex justify-center\">\n          <button className=\"icon\" onClick={close}>\n            <FaTimes />\n          </button>\n        </div>\n        <Scanner\n          onResult={async (text: string) => {\n            try {\n              const url = new URL(text);\n\n              const name = decodeURIComponent(url.pathname.replace('//totp/', '')).split(':')[0];\n              const secret = url.searchParams.get('secret');\n\n              if (url.protocol !== 'otpauth:' || !name || !secret) throw new Error(`Invalid URL: ${url.toString()}`);\n\n              onScan(name, secret);\n              close();\n            } catch (err) {\n              console.error(err);\n              toast.error('Failed to scan key');\n            }\n          }}\n          onError={(error) => console.error(error?.message)}\n          components={{ audio: false }}\n        />\n      </div>\n    </div>\n  );\n}\n","import { encrypt } from '@metamask/browser-passworder';\nimport { DocumentReference, arrayRemove, arrayUnion, updateDoc } from 'firebase/firestore';\nimport { useContext, useState } from 'react';\nimport { FaQrcode, FaTimes } from 'react-icons/fa';\nimport { toast } from 'react-toastify';\n\nimport { CodeContext } from '../contexts/CodeContext';\nimport { AppIcon } from './AppIcon';\nimport { QR } from './QR';\n\ninterface EditKeyProps {\n  name?: string;\n  secret?: string;\n  userRef: DocumentReference;\n  close: () => void;\n}\n\nexport function EditKey(props: EditKeyProps) {\n  const [name, setName] = useState(props.name || '');\n  const [secret, setSecret] = useState(props.secret || '');\n  const [scan, setScan] = useState(false);\n\n  const token = useContext(CodeContext) || '';\n\n  const editing = props.name || props.secret;\n\n  const addKey = async (name: string, secret: string) => {\n    if (name === '' || secret === '') {\n      toast.error('Name and secret are required');\n      return;\n    }\n\n    try {\n      if (editing && (props.name !== name || props.secret !== secret)) {\n        await updateDoc(props.userRef, { keys: arrayRemove({ name: props.name, secret: props.secret }) });\n      }\n\n      const encryptedSecret = await encrypt(token, { secret });\n      await updateDoc(props.userRef, { keys: arrayUnion({ name, secret: encryptedSecret }) });\n      setName('');\n      setSecret('');\n      props.close();\n    } catch (err) {\n      console.error(err);\n      toast.error('Failed to add key');\n    }\n  };\n\n  return (\n    <>\n      <div\n        className=\"flex flex-col w-full gap-8\"\n        onKeyDown={(e) => {\n          if (e.key === 'Enter') addKey(name, secret);\n        }}\n      >\n        <div className=\"flex items-center\">\n          <h2 className=\"flex-1 text-lg font-medium\">{editing ? 'Edit existing key' : 'Add a new key'}</h2>\n          <button onClick={props.close} className=\"px-2\">\n            <FaTimes />\n          </button>\n        </div>\n\n        <div className=\"flex gap-4 items-center\">\n          <AppIcon name={name} />\n          <div className=\"flex flex-col gap-2\">\n            <input\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              placeholder=\"Site name\"\n              autoFocus\n              autoComplete=\"false\"\n              type=\"text\"\n            />\n            <input\n              value={secret}\n              onChange={(e) => setSecret(e.target.value)}\n              placeholder=\"Secret\"\n              autoComplete=\"false\"\n              type=\"password\"\n            />\n          </div>\n        </div>\n\n        <div className=\"flex gap-4\">\n          {!editing && (\n            <button onClick={() => setScan(true)}>\n              <FaQrcode />\n            </button>\n          )}\n          <button onClick={() => addKey(name, secret)} className=\"flex-1\">\n            {props.name || props.secret ? 'Save' : 'Add'}\n          </button>\n        </div>\n      </div>\n\n      {scan && (\n        <QR\n          close={() => setScan(false)}\n          onScan={(name, secret) => {\n            setName(name);\n            setSecret(secret);\n          }}\n        />\n      )}\n    </>\n  );\n}\n","// Function from https://usehooks-ts.com/react-hook/use-copy-to-clipboard\nimport { useCallback, useState } from 'react';\n\ntype CopiedValue = string | null;\n\ntype CopyFn = (text: string) => Promise<boolean>;\n\nexport function useCopyToClipboard(): [CopyFn, CopiedValue] {\n  const [copiedText, setCopiedText] = useState<CopiedValue>(null);\n\n  const copy: CopyFn = useCallback(async (text) => {\n    if (!navigator?.clipboard) {\n      console.warn('Clipboard not supported');\n      return false;\n    }\n\n    // Try to save to clipboard then save it in the state if worked\n    try {\n      await navigator.clipboard.writeText(text);\n      setCopiedText(text);\n      return true;\n    } catch (error) {\n      console.warn('Copy failed', error);\n      setCopiedText(null);\n      return false;\n    }\n  }, []);\n\n  return [copy, copiedText];\n}\n","import { useEffect, useState } from 'react';\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = useState(false);\n\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 500);\n    };\n\n    handleResize();\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  return isMobile;\n}\n","import { decrypt } from '@metamask/browser-passworder';\nimport { DocumentReference, arrayRemove, updateDoc } from 'firebase/firestore';\nimport { useCallback, useContext, useEffect, useMemo, useState } from 'react';\nimport { FaTimes } from 'react-icons/fa';\nimport { toast } from 'react-toastify';\nimport { TOTP } from 'totp-generator';\nimport { LongPressCallbackReason, useLongPress } from 'use-long-press';\n\nimport { CodeContext } from '../contexts/CodeContext';\nimport { useCopyToClipboard } from '../hooks/useCopyToClipboard';\nimport { useIsMobile } from '../hooks/useIsMobile';\nimport { Key } from '../hooks/useUserData';\nimport { AppIcon } from './AppIcon';\n\nenum HiddenType {\n  Hidden,\n  FirstVisible,\n  Visible,\n}\n\nexport function TokenCard({\n  data,\n  userRef,\n  timestamp,\n  onEdit,\n  setEditMode,\n  editMode,\n  index,\n}: {\n  data: Key;\n  userRef: DocumentReference;\n  timestamp: Date;\n  onEdit: () => void;\n  setEditMode: (value: boolean) => void;\n  editMode: boolean;\n  index: number;\n}) {\n  const encryptionToken = useContext(CodeContext) || '';\n  const [secret, setSecret] = useState('');\n  const [hidden, setHidden] = useState<HiddenType>(HiddenType.Hidden);\n  const isMobile = useIsMobile();\n  const [copy] = useCopyToClipboard();\n\n  const bindPress = useLongPress(() => setEditMode(true), {\n    threshold: 600,\n    onCancel: (e, { reason }) => {\n      if (reason === LongPressCallbackReason.CancelledByRelease) {\n        if (hidden === HiddenType.Hidden) setHidden(HiddenType.FirstVisible);\n        else if (editMode) onEdit();\n        else copyToken();\n      }\n    },\n  });\n\n  useEffect(() => {\n    if (hidden === HiddenType.Hidden) return;\n\n    decrypt(encryptionToken, data.secret)\n      .then((decrypted) => setSecret((decrypted as { secret: string }).secret))\n      .catch((err) => {\n        console.error(err);\n        setSecret('Error');\n      });\n  }, [data.secret, encryptionToken, hidden]);\n\n  const timeChunk = Math.floor(timestamp.getTime() / 30000);\n\n  const token = useMemo(() => {\n    if (secret.length === 0 || secret === 'Error' || hidden === HiddenType.Hidden) return 'Token Error';\n\n    try {\n      return TOTP.generate(secret.replace(/\\s+/g, ''), { timestamp: timeChunk * 30000 }).otp;\n    } catch (err) {\n      console.error(err);\n      return 'Token Error';\n    }\n  }, [secret, timeChunk, hidden]);\n\n  const copyToken = useCallback(\n    () =>\n      copy(token).then((result) => {\n        if (result && token !== 'Token Error')\n          toast.info(data.name + ' code copied', { bodyClassName: isMobile ? 'text-right' : '' });\n        else toast.error('Failed to copy code');\n      }),\n    [token, data, isMobile, copy]\n  );\n\n  useEffect(() => {\n    if (hidden === HiddenType.FirstVisible && token !== 'Token Error') {\n      copyToken();\n      setHidden(HiddenType.Visible);\n    }\n  }, [hidden, token]);\n\n  return (\n    <div\n      className={\n        'p-3 bg-slate-800 border border-slate-700 rounded-md select-none flex gap-6 justify-between items-center hover:brightness-[97%] relative cursor-pointer transition-transform duration-1000 rotate-0' +\n        (editMode ? ' animate-wiggle' : '')\n      }\n      style={{ animationDelay: `${index * 100}ms` }}\n      {...bindPress()}\n    >\n      <div className=\"flex gap-4\">\n        <AppIcon name={data.name} />\n        <div className=\"flex flex-col items-start justify-center\">\n          <h2 className=\"font-bold capitalize\">{data.name}</h2>\n          <div>\n            {hidden === HiddenType.Hidden ? (\n              '*** ***'\n            ) : secret.length === 0 ? (\n              'Decrypting...'\n            ) : token === 'Token Error' ? (\n              'Token Error'\n            ) : (\n              <>\n                <span className=\"mr-2\">{token.slice(0, 3)}</span>\n                <span>{token.slice(3, 6)}</span>\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n\n      <button\n        className=\"absolute -top-3 -right-3 !p-1 text-slate-800 bg-white border border-slate-400 rounded-full hover:text-white hover:brightness-100 sm:hover:bg-danger transition-all duration-300\"\n        style={{ pointerEvents: editMode ? 'auto' : 'none', opacity: editMode ? 1 : 0 }}\n        onClick={(e) => {\n          e.stopPropagation();\n\n          const confirm = window.confirm('Are you sure you want to remove this token?');\n          if (confirm) {\n            const confirm2 = window.confirm('Are you really sure?');\n            if (confirm2) updateDoc(userRef, { keys: arrayRemove(data) });\n          }\n        }}\n        onMouseDown={(e) => e.stopPropagation()}\n        onTouchStart={(e) => e.stopPropagation()}\n        onPointerDown={(e) => e.stopPropagation()}\n      >\n        <FaTimes />\n      </button>\n    </div>\n  );\n}\n","import { DocumentReference } from 'firebase/firestore';\nimport { useMemo, useState } from 'react';\nimport { CircularProgressbar, buildStyles } from 'react-circular-progressbar';\nimport 'react-circular-progressbar/dist/styles.css';\n\nimport { useRefreshTimer } from '../hooks/useRefreshTimer';\nimport { useTailwind } from '../hooks/useTailwind';\nimport { Key, UserData } from '../hooks/useUserData';\nimport { EditKey } from './EditKey';\nimport { TokenCard } from './TokenCard';\n\nexport function TOTP({\n  userData,\n  userRef,\n  editMode,\n  setEditMode,\n  editKey,\n  setEditKey,\n}: {\n  userData: UserData;\n  userRef: DocumentReference;\n  editMode: boolean;\n  setEditMode: (value: boolean) => void;\n  editKey: boolean;\n  setEditKey: (value: boolean) => void;\n}) {\n  const { time, timestamp } = useRefreshTimer();\n\n  const [search, setSearch] = useState('');\n  const [keyToEdit, setKeyToEdit] = useState<Key>();\n  const tailwind = useTailwind();\n\n  const remainingMs = 30000 - (time.getTime() % 30000);\n  const remainingSeconds = Math.ceil(remainingMs / 1000);\n\n  const tokens = useMemo(\n    () => (\n      <>\n        {userData.keys.length === 0 && (\n          <div className=\"text-center text-lg bg-slate-800 p-8 w-full rounded-md\">No keys added yet</div>\n        )}\n        {userData.keys.length > 0 && (\n          <div className=\"w-full max-w-screen-lg\">\n            <div className=\"relative\">\n              <input\n                className=\"mb-6 pl-10\"\n                type=\"search\"\n                value={search}\n                placeholder=\"Search tokens\"\n                onChange={(e) => setSearch(e.target.value)}\n              />\n              {/* Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc. */}\n              <svg\n                className=\"fill-slate-400 absolute left-3 top-[11px] h-4\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                viewBox=\"0 0 512 512\"\n              >\n                <path d=\"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z\" />\n              </svg>\n            </div>\n\n            <div className=\"w-full grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 sm:gap-6\">\n              {userData.keys\n                .filter((k) => search.length === 0 || k.name.toLowerCase().includes(search.toLowerCase()))\n                .sort((a, b) => a.name.localeCompare(b.name))\n                .map((key: Key, i: number) => {\n                  try {\n                    return (\n                      <TokenCard\n                        key={key.name}\n                        data={key}\n                        userRef={userRef}\n                        timestamp={timestamp}\n                        onEdit={() => {\n                          setEditKey(true);\n                          setKeyToEdit(key);\n                        }}\n                        setEditMode={setEditMode}\n                        editMode={editMode}\n                        index={i}\n                      />\n                    );\n                  } catch (err) {\n                    console.error(err);\n                    return <div>Error Loading Token ({key.name})</div>;\n                  }\n                })}\n            </div>\n          </div>\n        )}\n      </>\n    ),\n    [userData.keys, search, timestamp, userRef, editMode]\n  );\n\n  return (\n    <>\n      <div\n        className=\"fixed bottom-0 left-0 h-1.5 bg-primary transition-transform duration-700 w-screen z-20 rounded\"\n        style={{ transform: `scaleX(${(remainingSeconds / 30) * 100}%)` }}\n      ></div>\n\n      <div className=\"flex sm:justify-center pl-8 sm:pl-0 w-full fixed bottom-0 left-0 right-0 pointer-events-none z-10 backdrop-blur-lg bg-slate-900 bg-opacity-30 pt-4\">\n        <div className=\"w-16 h-16 p-1 mb-6\">\n          <CircularProgressbar\n            value={remainingSeconds - 1}\n            maxValue={30}\n            text={remainingSeconds.toString()}\n            styles={buildStyles({\n              textSize: '40px',\n              trailColor: tailwind.theme.colors.slate[700],\n              textColor: tailwind.theme.colors.primary,\n              pathColor: tailwind.theme.colors.primary,\n            })}\n            strokeWidth={10}\n          />\n        </div>\n      </div>\n\n      <div className=\"flex flex-col gap-4 m-6 sm:m-8 items-center pb-24\">{tokens}</div>\n\n      {editKey && (\n        <div\n          className=\"fixed z-10 inset-0 bg-slate-900 bg-opacity-75 flex justify-center items-center\"\n          onClick={() => {\n            setEditKey(false);\n            setKeyToEdit(undefined);\n          }}\n        >\n          <div\n            className=\"max-w-screen-md bg-slate-700 rounded-lg p-8\"\n            onClick={(e) => e.stopPropagation()}\n            style={{ marginTop: 'calc(-1 * env(keyboard-inset-height))' }}\n          >\n            <EditKey\n              name={keyToEdit?.name}\n              secret={keyToEdit?.secret}\n              userRef={userRef}\n              close={() => {\n                setEditKey(false);\n                setKeyToEdit(undefined);\n              }}\n            />\n          </div>\n        </div>\n      )}\n    </>\n  );\n}\n","import { encrypt } from '@metamask/browser-passworder';\nimport { User } from 'firebase/auth';\nimport { setDoc, updateDoc } from 'firebase/firestore';\nimport { useEffect, useState } from 'react';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { toast } from 'react-toastify';\n\nimport { CodeContext } from '../contexts/CodeContext';\nimport { useUserData } from '../hooks/useUserData';\nimport { auth } from '../util/firebase';\nimport { Lock } from './Lock';\nimport { Login } from './Login';\nimport { LogoPage } from './Logo';\nimport { Menu } from './Menu';\nimport { TOTP } from './TOTP';\n\nexport function App() {\n  const [user, loading, error] = useAuthState(auth);\n\n  if (loading || error) return <LogoPage>{error && <p>Error: {error.message}</p>}</LogoPage>;\n\n  if (!user) return <Login />;\n  return <Authorized user={user} />;\n}\n\nasync function promptCode(token?: string): Promise<string | undefined> {\n  let code = '';\n  let tries = 0;\n  while (code.length !== 6 && tries < 3) {\n    code = prompt('Enter 6 digit pin') || '';\n    tries++;\n  }\n  if (code.length === 6) {\n    const newCode = prompt('Re-enter 6 digit pin') || '';\n    if (newCode !== code) {\n      toast.error('Codes do not match', { autoClose: 5000 });\n      return;\n    }\n  }\n\n  if (code.length === 6) {\n    if (!token) {\n      token = crypto.getRandomValues(new Uint32Array(32)).toString();\n    }\n\n    try {\n      const blob = await encrypt(code, { token });\n      return blob;\n    } catch (err) {\n      console.error(err);\n    }\n  }\n}\n\nfunction Authorized({ user }: { user: User }) {\n  const { value, loading, error, userRef } = useUserData();\n\n  const [token, setToken] = useState<string>();\n  const [editMode, setEditMode] = useState(false);\n  const [editKey, setEditKey] = useState(false);\n\n  useEffect(() => {\n    const listener = () => {\n      if (document.visibilityState === 'visible') {\n        setToken(undefined);\n      }\n    };\n\n    document.addEventListener('visibilitychange', listener);\n    return () => document.removeEventListener('visibilitychange', listener);\n  }, []);\n\n  useEffect(() => {\n    if (!loading && !error && value?.data() === undefined) {\n      promptCode().then((code) => {\n        if (code) setDoc(userRef, { keys: [], email: user.email || '', code });\n        else toast.error('Failed to create user');\n      });\n    }\n  }, [value, loading, error]);\n\n  const updateCode = async () => {\n    const code = await promptCode(token);\n\n    if (code) updateDoc(userRef, { code });\n    else toast.error('Failed to update code');\n  };\n\n  if (loading || error || !value || value.data() === undefined)\n    return (\n      <LogoPage>\n        {error && <p>Error: {error.message}</p>}\n        {!value || (value.data() === undefined && <p>No data</p>)}\n      </LogoPage>\n    );\n\n  if (!token) return <Lock unlock={(code) => setToken(code)} encryptedCode={value.data()?.code!} />;\n\n  return (\n    <CodeContext.Provider value={token}>\n      <Menu\n        lock={() => setToken(undefined)}\n        updateCode={updateCode}\n        editMode={editMode}\n        setEditKey={setEditKey}\n        setEditMode={setEditMode}\n      />\n      <TOTP\n        userData={value.data()!}\n        userRef={userRef}\n        editMode={editMode}\n        setEditMode={setEditMode}\n        editKey={editKey}\n        setEditKey={setEditKey}\n      />\n    </CodeContext.Provider>\n  );\n}\n","import { Buffer } from 'buffer';\nimport { createRoot } from 'react-dom/client';\nimport { ToastContainer, Zoom } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { registerSW } from 'virtual:pwa-register';\n\nimport { App } from './components/App';\n\n// Fixes for browser-passworder\nwindow.global ||= window;\nglobalThis.Buffer = Buffer;\n\n// add this to prompt for a refresh\nconst updateSW = registerSW({\n  onNeedRefresh() {\n    if (confirm('New content available. Reload?')) {\n      updateSW();\n    }\n  },\n});\n\n// If a pwa on desktop, resize window a bit smaller\nconst isBrowser = matchMedia('(display-mode: browser)').matches;\nif (!isBrowser) {\n  // window.moveTo(16, 16);\n  window.resizeTo(500, 760);\n}\n\n// Enable virtual keyboard api\nconst nav = navigator as any;\nif (nav.virtualKeyboard) nav.virtualKeyboard.overlaysContent = true;\n\nfunction Container() {\n  return (\n    <>\n      <App />\n      <ToastContainer\n        theme=\"dark\"\n        position=\"bottom-center\"\n        transition={Zoom}\n        autoClose={1000}\n        hideProgressBar\n        closeButton={false}\n      />\n    </>\n  );\n}\n\ncreateRoot(document.getElementById('root')!).render(<Container />);\n"],"file":"assets/index-DCWOuYB8.js"}