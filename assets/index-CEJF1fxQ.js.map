{"version":3,"mappings":"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","names":["useVisibilityChange","callback","useEffect","listener","useLockTimer","setToken","timer","useRef","visible","useMigrateData","userRef","data","migrated","setMigrated","useState","migrateData","oldData","updatedKeys","key","updateDoc","CodeContext","createContext","useOnline","online","setOnline","onStatus","registerSW","options","immediate","onNeedRefresh","onOfflineReady","onRegistered","onRegisteredSW","onRegisterError","wb","registerPromise","sendSkipWaitingMessage","updateServiceWorker","_reloadPage","register","__vitePreload","Workbox","e","onNeedRefreshCalled","showSkipWaitingPrompt","event","r","updateToast","useServiceWorker","updateSW","content","toast","firebaseConfig","app","initializeApp","auth","getAuth","db","initializeFirestore","persistentLocalCache","useUserData","user","useAuthState","doc","value","loading","error","snapshot","useDocumentData","exportKeys","token","toastId","keys","i","decoded","decrypt","blob","url","a","importKeys","input","file","reader","skipped","imported","archived","name","k","encryptedSecret","encrypt","arrayUnion","err","useUUID","uuid","logo","Logo","className","jsx","image","twMerge","LogoPage","children","props","twJoin","Logout","signOut","useSignOut","terminate","clearIndexedDbPersistence","FaSignOutAlt","PinCode","pinRef","encryptedCode","unlock","onCodeEntered","code","decrypted","PinField","challenge","userHandle","currentUser","publicKey","credential","arrayBufferToBase64","authenticate","credentialId","id","base64ToArrayBuffer","arrayBufferToString","buffer","uint8Array","array","base64","binaryString","length","bufferView","WebauthnEnroll","biometricRegister","pin","decryptedSecret","FaFingerprint","useEffectOnce","useOnHold","onClick","onHold","duration","longPress","useLongPress","reason","LongPressCallbackReason","WebauthnLogin","webauthn","biometricLogin","bindHold","arrayRemove","Lock","jsxs","node","Login","signInWithGoogle","useSignInWithGoogle","GoogleLogin","signin","Menu","lock","updateCode","editMode","setEditMode","setEditKey","buttonClass","buttonColor","bindLock","bindPlus","Fragment","FaUpload","FaSave","FaPlus","FaLock","useRefreshTimer","timestamp","setTimestamp","timestampInt","useSecondTimer","time","setTime","timeInt","tailwindConfig","useTailwind","useMemo","resolveConfig","Progress","tailwind","remainingMs","remainingSeconds","progressOffset","CircularProgressbar","buildStyles","useTailwindSize","screenSize","setScreenSize","getScreenSize","width","handleResize","accrue","amazon","bastillion","betterment","carta","guideline","idme","justworks","microsoft","nintendo","sequoia","twitter","uwcu","getIcon","icon","icons","levenshtein","b","icons.siFacebook","icons.siSynology","darkColor","lightColor","getColors","background","fill","AppIcon","colors","imgClass","padding","QR","close","onScan","FaTimes","Scanner","detectedCodes","text","secret","useCopyToClipboard","copiedText","setCopiedText","useCallback","useIsMobile","isMobile","setIsMobile","secretCache","TokenCard","onEdit","addRecentKey","encryptionToken","useContext","setSecret","hidden","setHidden","copy","copyToken","timeout","timeChunk","TOTP","otp","result","FaArchive","EditKey","setName","scan","setScan","masked","setMasked","updating","setUpdating","decrypting","setDecrypting","editing","addKey","FaEyeSlash","FaEye","FaQrcode","Modal","onClose","title","TokenList","userData","editKey","size","search","setSearch","searchFocused","setSearchFocused","keyToEdit","setKeyToEdit","recentKeys","gridClass","FaSearch","App","Authorized","promptPin","tries","OnlineStatus","toastShown","setToastShown","warning","FaBroadcastTower","setDoc","updatePin","Buffer","isBrowser","nav","Container","ToastContainer","Zoom","createRoot"],"ignoreList":[],"sources":["../../src/hooks/useVisibilityChange.ts","../../src/hooks/useLockTimer.ts","../../src/hooks/useMigrateData.ts","../../src/contexts/CodeContext.tsx","../../src/hooks/useOnline.ts","../../../../../../../@vite-plugin-pwa/virtual:pwa-register","../../src/hooks/useServiceWorker.ts","../../src/util/firebase.ts","../../src/hooks/useUserData.tsx","../../src/util/keys.ts","../../src/hooks/useUUID.ts","../../src/images/logo.png","../../src/components/Logo.tsx","../../src/components/Lock/Logout.tsx","../../src/components/Lock/PinCode.tsx","../../src/util/webauthn.ts","../../src/components/Lock/WebauthnEnroll.tsx","../../src/hooks/useEffectOnce.ts","../../src/hooks/useOnHold.ts","../../src/components/Lock/WebauthnLogin.tsx","../../src/components/Lock/Lock.tsx","../../src/components/Login.tsx","../../src/components/Menu.tsx","../../src/hooks/useRefreshTimer.tsx","../../tailwind.config.ts","../../src/hooks/useTailwind.ts","../../src/components/Progress.tsx","../../src/hooks/useTailwindSize.ts","../../src/images/accrue.svg?raw","../../src/images/amazon.svg?raw","../../src/images/bastillion.png","../../src/images/betterment.png","../../src/images/carta.png","../../src/images/guideline.png","../../src/images/id.me.png","../../src/images/justworks.jpg","../../src/images/microsoft.svg?raw","../../src/images/nintendo.svg?raw","../../src/images/sequoia.png","../../src/images/twitter.svg?raw","../../src/images/uwcu.png","../../src/components/AppIcon.tsx","../../src/components/QR.tsx","../../src/hooks/useCopyToClipboard.ts","../../src/hooks/useIsMobile.ts","../../src/components/TokenCard.tsx","../../src/components/EditKey.tsx","../../src/components/Modal.tsx","../../src/components/TokenList.tsx","../../src/components/App.tsx","../../src/index.tsx"],"sourcesContent":["import { useEffect } from 'react';\n\nexport function useVisibilityChange(callback: (visible: boolean) => void) {\n  useEffect(() => {\n    const listener = () => callback(!document.hidden);\n\n    document.addEventListener('visibilitychange', listener);\n    return () => document.removeEventListener('visibilitychange', listener);\n  }, [callback]);\n}\n","import { useRef } from 'react';\n\nimport { useVisibilityChange } from './useVisibilityChange';\n\nexport function useLockTimer(setToken: (token: string | undefined) => void) {\n  const timer = useRef<NodeJS.Timeout>(null);\n\n  // Lock the token after 15 seconds of inactivity\n  useVisibilityChange((visible) => {\n    if (visible) {\n      // If coming back soon after being hidden, keep the token\n      if (timer.current) clearTimeout(timer.current);\n      timer.current = null;\n    } else {\n      // Set a timer to clear the token after 15 seconds\n      if (timer.current) clearTimeout(timer.current);\n      timer.current = setTimeout(() => setToken(undefined), 15 * 1000);\n    }\n  });\n}\n","import { DocumentData, DocumentReference, updateDoc } from 'firebase/firestore';\nimport { useEffect, useState } from 'react';\n\nimport { UserData } from './useUserData';\n\nexport function useMigrateData(userRef: DocumentReference<UserData, DocumentData>, data?: UserData) {\n  const [migrated, setMigrated] = useState(false);\n\n  const migrateData = async (oldData: UserData) => {\n    // Add archived property if it doesn't exist\n    const updatedKeys = oldData.keys.map((key) => ({\n      ...key,\n      archived: key.archived ?? false, // Default to false if not present\n    }));\n\n    // Update the user data with the new keys if necessary\n    if (JSON.stringify(updatedKeys) !== JSON.stringify(oldData.keys)) {\n      console.log('Upgrading user data keys to include archived property');\n      await updateDoc(userRef, {\n        keys: updatedKeys,\n      });\n    }\n  };\n\n  useEffect(() => {\n    if (data && !migrated) {\n      setMigrated(true);\n      migrateData(data);\n    }\n  }, [data, migrated]);\n}\n","import { createContext } from 'react';\n\nexport const CodeContext = createContext<string | undefined>(undefined);\n","import { useEffect, useState } from 'react';\n\nexport function useOnline(): boolean {\n  const [online, setOnline] = useState(navigator.onLine);\n\n  useEffect(() => {\n    function onStatus() {\n      setOnline(navigator.onLine);\n    }\n\n    window.addEventListener('online', onStatus);\n    window.addEventListener('offline', onStatus);\n\n    return () => {\n      window.removeEventListener('online', onStatus);\n      window.removeEventListener('offline', onStatus);\n    };\n  }, []);\n\n  return online;\n}\n","// src/client/build/register.ts\nvar autoUpdateMode = \"false\";\nvar selfDestroying = \"false\";\nvar auto = autoUpdateMode === \"true\";\nvar autoDestroy = selfDestroying === \"true\";\nfunction registerSW(options = {}) {\n  const {\n    immediate = false,\n    onNeedRefresh,\n    onOfflineReady,\n    onRegistered,\n    onRegisteredSW,\n    onRegisterError\n  } = options;\n  let wb;\n  let registerPromise;\n  let sendSkipWaitingMessage;\n  const updateServiceWorker = async (_reloadPage = true) => {\n    await registerPromise;\n    if (!auto) {\n      sendSkipWaitingMessage?.();\n    }\n  };\n  async function register() {\n    if (\"serviceWorker\" in navigator) {\n      wb = await import(\"workbox-window\").then(({ Workbox }) => {\n        return new Workbox(\"/factor/sw.js\", { scope: \"/factor/\", type: \"classic\" });\n      }).catch((e) => {\n        onRegisterError?.(e);\n        return void 0;\n      });\n      if (!wb)\n        return;\n      sendSkipWaitingMessage = () => {\n        wb?.messageSkipWaiting();\n      };\n      if (!autoDestroy) {\n        if (auto) {\n          wb.addEventListener(\"activated\", (event) => {\n            if (event.isUpdate || event.isExternal)\n              window.location.reload();\n          });\n          wb.addEventListener(\"installed\", (event) => {\n            if (!event.isUpdate) {\n              onOfflineReady?.();\n            }\n          });\n        } else {\n          let onNeedRefreshCalled = false;\n          const showSkipWaitingPrompt = () => {\n            onNeedRefreshCalled = true;\n            wb?.addEventListener(\"controlling\", (event) => {\n              if (event.isUpdate)\n                window.location.reload();\n            });\n            onNeedRefresh?.();\n          };\n          wb.addEventListener(\"installed\", (event) => {\n            if (typeof event.isUpdate === \"undefined\") {\n              if (typeof event.isExternal !== \"undefined\") {\n                if (event.isExternal)\n                  showSkipWaitingPrompt();\n                else\n                  !onNeedRefreshCalled && onOfflineReady?.();\n              } else {\n                !onNeedRefreshCalled && onOfflineReady?.();\n              }\n            } else if (!event.isUpdate) {\n              onOfflineReady?.();\n            }\n          });\n          wb.addEventListener(\"waiting\", showSkipWaitingPrompt);\n        }\n      }\n      wb.register({ immediate }).then((r) => {\n        if (onRegisteredSW)\n          onRegisteredSW(\"/factor/sw.js\", r);\n        else\n          onRegistered?.(r);\n      }).catch((e) => {\n        onRegisterError?.(e);\n      });\n    }\n  }\n  registerPromise = register();\n  return updateServiceWorker;\n}\nexport {\n  registerSW\n};\n","import { Id, ToastOptions, UpdateOptions, toast } from 'react-toastify';\nimport { registerSW } from 'virtual:pwa-register';\n\nlet updateToast: Id;\n\nexport function useServiceWorker() {\n  // keep track of updating toast\n\n  // add this to prompt for a refresh\n  const updateSW = registerSW({\n    onNeedRefresh() {\n      const content = 'New version installed, tap to update.';\n      const options: ToastOptions = {\n        autoClose: false,\n        closeOnClick: true,\n        type: 'warning',\n\n        onClick: () => {\n          const content = 'Updating...';\n          if (updateToast) toast.update(updateToast, { render: content, onClick: undefined });\n          else toast.warn(content, { autoClose: false });\n\n          updateSW();\n        },\n      };\n\n      if (updateToast) toast.update(updateToast, { render: content, type: 'warning', ...options } as UpdateOptions);\n      else updateToast = toast.warn(content, options as ToastOptions);\n    },\n    onRegistered(r) {\n      // try to update every 5 minutes\n      if (r) {\n        setInterval(\n          () => {\n            r.update();\n          },\n          5 * 60 * 1000\n        );\n\n        // TODO: Test that this works\n        r.addEventListener('updatefound', () => {\n          if (!updateToast) updateToast = toast.info('Downloading new version...');\n        });\n      }\n    },\n  });\n}\n","import { initializeApp } from 'firebase/app';\nimport { getAuth } from 'firebase/auth';\nimport { initializeFirestore, persistentLocalCache } from 'firebase/firestore';\n\n// Your web app's Firebase configuration\nconst firebaseConfig = {\n  apiKey: 'AIzaSyDMQ4jffBbrLTjdhy_qS4GeZdbYtzEKHp4',\n  authDomain: 'factor-97c20.firebaseapp.com',\n  projectId: 'factor-97c20',\n  storageBucket: 'factor-97c20.appspot.com',\n  messagingSenderId: '524844196447',\n  appId: '1:524844196447:web:9d5f59006ec0b8e68d31ea',\n};\n\n// Initialize Firebase\nexport const app = initializeApp(firebaseConfig);\nexport const auth = getAuth(app);\nexport const db = initializeFirestore(app, { localCache: persistentLocalCache() });\n","import { DocumentReference, doc } from 'firebase/firestore';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { useDocumentData } from 'react-firebase-hooks/firestore';\n\nimport { auth, db } from '../util/firebase';\n\nexport interface UserData {\n  email: string;\n  keys: Key[];\n  recentKeys: string[];\n  code: string;\n  webauthn: Auth[];\n}\n\nexport interface Auth {\n  credentialId: string;\n  uuid: string;\n  secret: string;\n  userAgent: string;\n}\n\nexport interface Key {\n  name: string;\n  secret: string;\n  archived: boolean;\n}\n\nexport function useUserData() {\n  const [user] = useAuthState(auth);\n  const userRef = doc(db, 'users', user?.uid || '') as DocumentReference<UserData>;\n  const [value, loading, error, snapshot] = useDocumentData(userRef);\n\n  return { data: value, loading, error, userRef };\n}\n","import { DocumentReference, arrayUnion, updateDoc } from '@firebase/firestore';\nimport { decrypt, encrypt } from '@metamask/browser-passworder';\nimport { toast } from 'react-toastify';\n\nimport { Key, UserData } from '../hooks/useUserData';\n\nexport async function exportKeys(token: string, data: UserData): Promise<void> {\n  const toastId = toast('Exporting keys ⏳️\\nThis might take some time...', {\n    autoClose: false,\n    progress: 1 / data.keys.length,\n    hideProgressBar: false,\n  });\n\n  const keys = [];\n\n  for (let i = 0; i < data.keys.length; i++) {\n    const key = data.keys[i];\n    const decoded = (await decrypt(token, key.secret)) as { secret: string };\n    keys.push({ ...key, secret: decoded.secret });\n\n    toast.update(toastId, { progress: i / data.keys.length });\n  }\n\n  toast.done(toastId);\n\n  const blob = new Blob([JSON.stringify(keys, undefined, 2)], { type: 'text/json' });\n\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement('a');\n  a.href = url;\n  a.download = 'keys.json';\n  a.click();\n  URL.revokeObjectURL(url);\n}\n\nexport async function importKeys(token: string, data: UserData, userRef: DocumentReference): Promise<void> {\n  const input = document.createElement('input');\n  input.type = 'file';\n  input.addEventListener('change', (e) => {\n    if (input.files && input.files[0]) {\n      const file = input.files[0];\n      // Read JSON file\n      const reader = new FileReader();\n      reader.onload = async (e) => {\n        try {\n          if (e.target) {\n            const keys: Key[] = JSON.parse(e.target.result as string);\n\n            let skipped = 0;\n            let imported = 0;\n            for (const key of keys) {\n              if (!key.name || !key.secret) throw 'Invalid file format';\n\n              const { archived, name } = key;\n              // Skip existing keys\n              if (data.keys.some((k) => k.name.toLowerCase() === name.toLowerCase())) {\n                skipped++;\n              } else {\n                const encryptedSecret = await encrypt(token, key.secret);\n                await updateDoc(userRef, { keys: arrayUnion({ name, secret: encryptedSecret, archived }) });\n                imported++;\n              }\n            }\n\n            if (skipped > 0) toast.warning(`${skipped} keys were skipped because they already exist`);\n            if (imported > 0) toast.success(`Imported ${keys.length - skipped} keys`);\n          }\n        } catch (err) {\n          console.error(err);\n          toast.error((err as any) || 'Error importing keys');\n        }\n      };\n\n      reader.readAsText(file);\n    }\n  });\n  input.click();\n}\n","const key = 'device-uuid';\n\nexport function useUUID(): string {\n  let uuid = localStorage.getItem(key);\n  if (!uuid) {\n    uuid = crypto.getRandomValues(new Uint32Array(32)).toString();\n    localStorage.setItem(key, uuid);\n  }\n\n  return uuid;\n}\n","export default \"__VITE_ASSET__DacSPZ0B__\"","import { twJoin, twMerge } from 'tailwind-merge';\n\nimport image from '../images/logo.png';\n\nexport function Logo({ className }: { className?: string }) {\n  return <img src={image} className={twMerge('h-52', className)} />;\n}\n\nexport function LogoPage({\n  className,\n  children,\n  ...props\n}: {\n  className?: string;\n  children?: React.ReactNode;\n  [key: string]: any;\n}) {\n  return (\n    <div className=\"w-screen h-[100svh] flex flex-col justify-center items-center gap-5\" {...props}>\n      <h1 className=\"text-center m-0 -mb-1\">Factor 2FA</h1>\n      <Logo className={className} />\n      {children}\n\n      <span\n        className={twJoin(\n          'absolute bottom-1.5 right-2 leading-tight whitespace-pre text-right',\n          process.env.NODE_ENV === 'production' ? 'text-[8px]' : 'text-sm'\n        )}\n      >\n        {new Date(__BUILD_TIME__).toLocaleString().replace(', ', '\\n')}\n      </span>\n    </div>\n  );\n}\n","import { clearIndexedDbPersistence, terminate } from 'firebase/firestore';\nimport { useSignOut } from 'react-firebase-hooks/auth';\nimport { FaSignOutAlt } from 'react-icons/fa';\n\nimport { auth, db } from '../../util/firebase';\n\nexport function Logout() {\n  const [signOut] = useSignOut(auth);\n\n  return (\n    <button\n      className=\"icon bg-danger\"\n      onClick={async () => {\n        try {\n          await signOut();\n          await terminate(db);\n          await clearIndexedDbPersistence(db);\n\n          window.location.reload();\n        } catch (err) {\n          console.error(err);\n        }\n      }}\n    >\n      <FaSignOutAlt />\n    </button>\n  );\n}\n","import { decrypt } from '@metamask/browser-passworder';\nimport { useEffect } from 'react';\nimport PinField from 'react-pin-field';\nimport { toast } from 'react-toastify';\nimport { twMerge } from 'tailwind-merge';\n\nlet unlocked = false;\nexport function PinCode({\n  pinRef,\n  encryptedCode,\n  unlock,\n  className,\n}: {\n  pinRef: React.RefObject<HTMLInputElement[] | null>;\n  encryptedCode: string;\n  unlock: (code: string) => void;\n  className?: string;\n}) {\n  useEffect(() => {\n    if (process.env.NODE_ENV === 'development' && !unlocked) {\n      onCodeEntered(import.meta.env.VITE_CODE);\n      unlocked = true;\n    } else {\n      setTimeout(() => pinRef.current?.[0].focus(), 250);\n    }\n  }, []);\n\n  const onCodeEntered = async (code: string) => {\n    if (code?.length === 6) {\n      try {\n        const decrypted = (await decrypt(code, encryptedCode)) as { token: string };\n        unlock(decrypted.token);\n      } catch (err) {\n        console.log(err, code);\n        toast.error('Invalid code');\n      }\n    }\n\n    if (pinRef.current) {\n      pinRef.current.forEach((input) => {\n        input.value = '';\n      });\n      pinRef.current[0].focus();\n    }\n  };\n\n  return (\n    <div className={twMerge('flex', className)}>\n      <PinField\n        length={6}\n        className=\"border border-slate-500 w-10 sm:w-12 h-14 m-1.5 rounded-lg text-center text-6xl p-1\"\n        type=\"password\"\n        inputMode=\"numeric\"\n        ref={pinRef}\n        onComplete={onCodeEntered}\n      />\n    </div>\n  );\n}\n","// A large portion of this code was written by chatgpt\nimport { auth } from './firebase';\n\nconst challenge = Uint8Array.from(window.crypto.getRandomValues(new Uint8Array(32)));\n\nexport interface Credential {\n  userHandle: string;\n  credentialId: string;\n}\n\nexport async function register(): Promise<Credential | null> {\n  try {\n    const userHandle = Uint8Array.from(window.crypto.getRandomValues(new Uint8Array(32)));\n    const currentUser = auth.currentUser;\n    const publicKey: PublicKeyCredentialCreationOptions = {\n      challenge, // Not really necessary since this is 100% local\n      rp: {\n        name: 'Factor',\n      },\n      user: {\n        id: userHandle, // This is both our userid, but also our encryption secret\n        name: currentUser?.email || 'user@email.com',\n        displayName: currentUser?.displayName || 'User',\n      },\n\n      pubKeyCredParams: [{ type: 'public-key', alg: -7 }],\n\n      authenticatorSelection: {\n        requireResidentKey: true,\n      },\n    };\n\n    const credential = (await navigator.credentials.create({ publicKey })) as PublicKeyCredential;\n\n    return { userHandle: arrayBufferToBase64(userHandle), credentialId: arrayBufferToBase64(credential.rawId) };\n  } catch (error) {\n    console.error('Error registering credential:', error);\n  }\n\n  return null;\n}\n\nexport async function authenticate(credentialId: string): Promise<string | null> {\n  try {\n    const id = base64ToArrayBuffer(credentialId);\n    const publicKey: PublicKeyCredentialRequestOptions = {\n      challenge,\n      allowCredentials: [{ type: 'public-key', id }],\n    };\n\n    const credential = (await navigator.credentials.get({ publicKey })) as PublicKeyCredential;\n\n    if (credential?.response) {\n      return arrayBufferToBase64((credential.response as any).userHandle);\n    }\n  } catch (error) {\n    console.error('Error authenticating:', error);\n  }\n\n  return null;\n}\n\nfunction arrayBufferToString(buffer: ArrayBuffer): string {\n  const uint8Array = new Uint8Array(buffer);\n  const array = Array.from(uint8Array);\n  return String.fromCharCode.apply(null, array);\n}\n\nfunction arrayBufferToBase64(buffer: ArrayBuffer): string {\n  return btoa(arrayBufferToString(buffer));\n}\n\nfunction base64ToArrayBuffer(base64: string): ArrayBuffer {\n  const binaryString = atob(base64);\n  const length = binaryString.length;\n  const buffer = new ArrayBuffer(length);\n  const bufferView = new Uint8Array(buffer);\n  for (let i = 0; i < length; i++) {\n    bufferView[i] = binaryString.charCodeAt(i);\n  }\n  return buffer;\n}\n","import { decrypt, encrypt } from '@metamask/browser-passworder';\nimport { DocumentReference, arrayUnion, updateDoc } from 'firebase/firestore';\nimport { FaFingerprint } from 'react-icons/fa';\nimport { toast } from 'react-toastify';\n\nimport { useUUID } from '../../hooks/useUUID';\nimport { register } from '../../util/webauthn';\n\nexport function WebauthnEnroll({ userRef, encryptedCode }: { userRef: DocumentReference; encryptedCode: string }) {\n  const uuid = useUUID();\n\n  const biometricRegister = async () => {\n    try {\n      const pin = prompt('Enter pin to register biometric login') || '';\n      const decryptedSecret = (await decrypt(pin, encryptedCode)) as { token: string };\n\n      const credential = await register();\n      const userHandle = credential?.userHandle || '';\n\n      const encryptedSecret = await encrypt(userHandle, decryptedSecret);\n\n      updateDoc(userRef, {\n        webauthn: arrayUnion({\n          credentialId: credential?.credentialId,\n          uuid,\n          secret: encryptedSecret,\n          userAgent: navigator.userAgent,\n        }),\n      });\n\n      toast.success('Successfully enrolled biometric login');\n    } catch (err) {\n      console.error(err);\n      toast.error('Error registering fingerprint');\n    }\n  };\n\n  return (\n    <button className=\"icon bg-primary text-slate-200\" onClick={biometricRegister}>\n      <FaFingerprint />\n    </button>\n  );\n}\n","import { useEffect } from 'react';\n\nconst keys = new Set();\nexport function useEffectOnce(key: string, callback: () => void) {\n  useEffect(() => {\n    if (keys.has(key)) return;\n\n    callback();\n    keys.add(key);\n  }, []);\n}\n","import { LongPressCallbackReason, useLongPress } from 'use-long-press';\n\nexport function useOnHold(onClick: () => void, onHold: () => void, duration: number = 600) {\n  const longPress = useLongPress(onClick, {\n    threshold: duration,\n    onCancel: (e, { reason }) => {\n      if (reason === LongPressCallbackReason.CancelledByRelease) {\n        onHold();\n      }\n    },\n  });\n\n  return () => {\n    return {\n      onKeyDown: (e: any) => {\n        if (e.key === 'Enter' || e.key === ' ') onClick();\n      },\n      ...longPress(),\n    };\n  };\n}\n","import { decrypt } from '@metamask/browser-passworder';\nimport { DocumentReference, arrayRemove, updateDoc } from 'firebase/firestore';\nimport { FaFingerprint } from 'react-icons/fa';\nimport { toast } from 'react-toastify';\n\nimport { useEffectOnce } from '../../hooks/useEffectOnce';\nimport { useOnHold } from '../../hooks/useOnHold';\nimport { Auth } from '../../hooks/useUserData';\nimport { useVisibilityChange } from '../../hooks/useVisibilityChange';\nimport { authenticate } from '../../util/webauthn';\n\nexport function WebauthnLogin({\n  webauthn,\n  userRef,\n  unlock,\n}: {\n  webauthn: Auth;\n  userRef: DocumentReference;\n  unlock: (code: string) => void;\n}) {\n  useVisibilityChange((visible) => {\n    if (visible && webauthn) biometricLogin();\n  });\n\n  // Attempt to login with biometric auth on startup, only once\n  useEffectOnce('webauthn', () => {\n    if (webauthn) {\n      biometricLogin();\n    }\n  });\n\n  const bindHold = useOnHold(\n    () => {\n      if (webauthn && confirm('Reset Biometric Auth?')) {\n        updateDoc(userRef, {\n          webauthn: arrayRemove({ ...webauthn }),\n        });\n      }\n    },\n    () => biometricLogin(),\n    3000\n  );\n\n  const biometricLogin = async () => {\n    try {\n      if (!webauthn) throw 'webauthn not defined';\n\n      const userHandle = await authenticate(webauthn.credentialId).catch(console.error);\n      const decryptedSecret = (await decrypt(userHandle || '', webauthn.secret)) as { token: string };\n\n      unlock(decryptedSecret.token);\n    } catch (err) {\n      console.error(err);\n      toast.error('Invalid biometric login');\n    }\n  };\n\n  return (\n    <button className=\"p-3 rounded-full bg-tertiary text-slate-200 border-2 border-slate-600\" {...bindHold()}>\n      <FaFingerprint size={30} />\n    </button>\n  );\n}\n","import { DocumentReference } from 'firebase/firestore';\nimport { useRef } from 'react';\n\n// import { OS, useOsType } from '../../hooks/useOsType';\nimport { useUUID } from '../../hooks/useUUID';\nimport { UserData } from '../../hooks/useUserData';\nimport { LogoPage } from '../Logo';\nimport { Logout } from './Logout';\nimport { PinCode } from './PinCode';\nimport { WebauthnEnroll } from './WebauthnEnroll';\nimport { WebauthnLogin } from './WebauthnLogin';\n\nexport function Lock({\n  unlock,\n  encryptedCode,\n  data,\n  userRef,\n}: {\n  unlock: (code: string) => void;\n  encryptedCode: string;\n  data?: UserData;\n  userRef: DocumentReference;\n}) {\n  const pinRef = useRef<HTMLInputElement[]>(null);\n  const uuid = useUUID();\n  // const os = useOsType();\n\n  // For now, always have option to sign up with webauthn\n  const webauthnEnabled = true;\n\n  // const devEnabled = true;\n  // TODO: Figure out a better way to determine when to show webauthn button\n  // const webauthnEnabled =\n  //   navigator.credentials &&\n  //   (os === OS.Android || os === OS.iOS || os === OS.Mac || (devEnabled && process.env.NODE_ENV === 'development'));\n  const webauthn = data?.webauthn?.find((a) => a.uuid === uuid);\n\n  return (\n    <LogoPage\n      onClick={(e: any) => {\n        const node = e.target?.nodeName;\n        if (pinRef.current && (node === 'DIV' || node === 'IMG' || node === 'H1')) pinRef.current[0].focus();\n      }}\n      style={{ marginTop: 'calc(-1 * env(keyboard-inset-height) / 2)' }}\n    >\n      <div className=\"flex fixed top-4 right-4 gap-2\">\n        {webauthnEnabled && !webauthn && <WebauthnEnroll encryptedCode={encryptedCode} userRef={userRef} />}\n        <Logout />\n      </div>\n\n      <PinCode pinRef={pinRef} encryptedCode={encryptedCode} unlock={unlock} />\n\n      {webauthnEnabled && webauthn && <WebauthnLogin unlock={unlock} userRef={userRef} webauthn={webauthn} />}\n    </LogoPage>\n  );\n}\n","import { useAuthState, useSignInWithGoogle } from 'react-firebase-hooks/auth';\n\nimport { auth } from '../util/firebase';\nimport './Login.css';\n\nexport function Login() {\n  const [user] = useAuthState(auth);\n  const [signInWithGoogle, , loading, error] = useSignInWithGoogle(auth);\n\n  return (\n    <div className=\"flex justify-center items-center flex-col\">\n      {!user && !loading && <GoogleLogin signin={() => signInWithGoogle()} />}\n\n      {loading && <p>Loading...</p>}\n      {error && <p>Error: {error.message}</p>}\n    </div>\n  );\n}\n\n// Button generated using https://developers.google.com/identity/branding-guidelines\nexport function GoogleLogin({ signin }: { signin: () => void }) {\n  return (\n    <button className=\"gsi-material-button\" onClick={signin}>\n      <div className=\"gsi-material-button-state\"></div>\n      <div className=\"gsi-material-button-content-wrapper\">\n        <div className=\"gsi-material-button-icon\">\n          <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\" style={{ display: 'block' }}>\n            <path\n              fill=\"#EA4335\"\n              d=\"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z\"\n            ></path>\n            <path\n              fill=\"#4285F4\"\n              d=\"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z\"\n            ></path>\n            <path\n              fill=\"#FBBC05\"\n              d=\"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z\"\n            ></path>\n            <path\n              fill=\"#34A853\"\n              d=\"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z\"\n            ></path>\n            <path fill=\"none\" d=\"M0 0h48v48H0z\"></path>\n          </svg>\n        </div>\n        <span className=\"gsi-material-button-contents\">Sign in with Google</span>\n        <span style={{ display: 'none' }}>Sign in with Google</span>\n      </div>\n    </button>\n  );\n}\n","import { FaLock, FaPlus, FaSave, FaUpload } from 'react-icons/fa';\nimport { twJoin } from 'tailwind-merge';\n\nimport { useOnHold } from '../hooks/useOnHold';\n\nexport function Menu({\n  lock,\n  updateCode,\n  editMode,\n  setEditMode,\n  setEditKey,\n  exportKeys,\n  importKeys,\n}: {\n  lock: () => void;\n  updateCode: () => void;\n  editMode: boolean;\n  setEditMode: (value: boolean) => void;\n  setEditKey: (value: boolean) => void;\n  exportKeys: () => void;\n  importKeys: () => void;\n}) {\n  const buttonClass = 'p-4 rounded-full ';\n  const buttonColor = buttonClass + ' !bg-slate-800 !text-primary';\n\n  const bindLock = useOnHold(updateCode, lock);\n  const bindPlus = useOnHold(\n    () => setEditMode(!editMode),\n    () => {\n      if (editMode) {\n        setEditMode(false);\n      } else {\n        setEditKey(true);\n      }\n    }\n  );\n\n  return (\n    <div className=\"fixed bottom-8 right-8 flex gap-4 z-20\">\n      {editMode && (\n        <>\n          <button className={buttonColor} onClick={() => importKeys()}>\n            <FaUpload />\n          </button>\n          <button className={buttonColor + ' mr-4'} onClick={() => exportKeys()}>\n            <FaSave />\n          </button>\n        </>\n      )}\n      <button className={twJoin(buttonColor, editMode && 'rotate-45')} {...bindPlus()}>\n        <FaPlus />\n      </button>\n      <button className={twJoin('transition-transform', buttonClass)} {...bindLock()}>\n        <FaLock />\n      </button>\n    </div>\n  );\n}\n","import { useEffect, useState } from 'react';\n\nexport function useRefreshTimer() {\n  const [timestamp, setTimestamp] = useState(new Date());\n\n  useEffect(() => {\n    // 30 second refresh (updated at 0 seconds, 30 seconds, 60 seconds, etc.)\n    let timestampInt: NodeJS.Timeout;\n    setTimeout(\n      () => {\n        setTimestamp(new Date());\n        timestampInt = setInterval(() => setTimestamp(new Date()), 30000);\n      },\n      30000 - (new Date().getTime() % 30000)\n    );\n\n    return () => {\n      if (timestampInt) clearInterval(timestampInt);\n    };\n  }, []);\n\n  return { timestamp };\n}\n\nexport function useSecondTimer() {\n  const [time, setTime] = useState(new Date());\n\n  useEffect(() => {\n    // 1 second refresh\n    const timeInt: NodeJS.Timeout = setInterval(() => setTime(new Date()), 1000);\n\n    return () => {\n      clearInterval(timeInt);\n    };\n  }, []);\n\n  return { time };\n}\n","import type { Config } from 'tailwindcss';\n\nexport default {\n  content: ['./index.html', './src/**/*.{js,ts,jsx,tsx}'],\n  theme: {\n    extend: {\n      colors: {\n        primary: '#4b888d',\n        secondary: '#051524',\n        tertiary: '#2c2155',\n        danger: '#f07f7b',\n        warning: '#f0c27b',\n      },\n      keyframes: {\n        wiggle: {\n          '0%, 100%': { transform: 'rotate(-0.5deg)' },\n          '50%': { transform: 'rotate(0.5deg)' },\n        },\n      },\n      animation: {\n        wiggle: 'wiggle 400ms ease-in-out infinite',\n      },\n    },\n  },\n  plugins: [],\n} satisfies Config;\n","// From https://stackoverflow.com/a/77346945/2303432\nimport { useMemo } from 'react';\nimport resolveConfig from 'tailwindcss/resolveConfig';\n\nimport tailwindConfig from '../../tailwind.config';\n\nexport function useTailwind() {\n  const tailwind = useMemo(() => resolveConfig(tailwindConfig), [tailwindConfig]);\n\n  return tailwind;\n}\n","import { CircularProgressbar, buildStyles } from 'react-circular-progressbar';\nimport 'react-circular-progressbar/dist/styles.css';\n\nimport { useSecondTimer } from '../hooks/useRefreshTimer';\nimport { useTailwind } from '../hooks/useTailwind';\n\nexport function Progress() {\n  const tailwind = useTailwind();\n\n  const { time } = useSecondTimer();\n\n  const remainingMs = 30000 - (time.getTime() % 30000);\n  const remainingSeconds = Math.ceil(remainingMs / 1000);\n  const elapsedSeconds = 30 - remainingSeconds;\n\n  // Originally, this was: const progressOffset = (elapsedSeconds / 30) * 50;\n  // These magic number make things look good at the start / end points\n  const progressOffset = ((elapsedSeconds + 0.15) / 29.4) * 50;\n\n  return (\n    <div className=\"flex sm:justify-center pl-8 sm:pl-0 fixed bottom-0 left-0 right-0 z-10 backdrop-blur-lg bg-slate-900 bg-opacity-30 pt-4 border-t-2 border-secondary\">\n      <div className=\"w-16 h-16 p-1 mb-6\">\n        <CircularProgressbar\n          value={remainingSeconds - 1}\n          maxValue={30}\n          text={remainingSeconds.toString()}\n          styles={buildStyles({\n            textSize: '40px',\n            trailColor: tailwind.theme.colors.slate[700],\n            textColor: tailwind.theme.colors.primary,\n            pathColor: tailwind.theme.colors.primary,\n          })}\n          className=\"text-shadow\"\n          strokeWidth={10}\n        />\n      </div>\n      <div\n        className=\"fixed bottom-1 h-1.5 bg-primary transition-all duration-700 z-20 rounded\"\n        style={{ left: `${progressOffset}%`, right: `${progressOffset}%` }}\n      ></div>\n    </div>\n  );\n}\n","import { useEffect, useState } from 'react';\n\nexport const useTailwindSize = () => {\n  const [screenSize, setScreenSize] = useState(getScreenSize());\n\n  function getScreenSize() {\n    const width = window.innerWidth;\n\n    if (width < 640) {\n      return 'sm';\n    } else if (width < 768) {\n      return 'md';\n    } else if (width < 1024) {\n      return 'lg';\n    } else if (width < 1280) {\n      return 'xl';\n    } else {\n      return '2xl';\n    }\n  }\n\n  useEffect(() => {\n    const handleResize = () => {\n      setScreenSize(getScreenSize());\n    };\n\n    window.addEventListener('resize', handleResize);\n\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  return screenSize;\n};\n","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 128 128\\\"><path d=\\\"M18.865 84.509c0-11.369 3.527-19.84 11.164-26.814 8.935-8.161 14.04-9.672 35.505-10.51l19.89-.777v-12.24l-20.158-.427c-19.83-.42-20.236-.498-24.864-4.822-6.297-5.379-4.706-14.057-4.706-21.528h25.52c26.61 0 33.313 1.153 40.037 6.885 7.692 6.558 7.889 8.02 7.889 58.833v47.51H86.375l-.475-5.62c-.26-3.091-.407-5.429-2.196-6.185-1.722-.727-4.24 2.662-8.158 5.62-5.47 4.129-6.729 6.18-16.64 6.053-36.927-.477-40.04-28.091-40.04-35.978zm63.276-12.94c-4.941-1.879-25.559-1.606-31.402.415-3.68 1.273-9.162 7.146-8.922 12.36s3.495 11.994 8.002 11.886c0 0 32.022 1.013 35.2-.792 1.676-.952 4.493-21.066-2.878-23.87z\\\"/></svg>\"","export default \"<svg role=\\\"img\\\" viewBox=\\\"0 0 24 24\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><title>Amazon</title><path d=\\\"M.045 18.02c.072-.116.187-.124.348-.022 3.636 2.11 7.594 3.166 11.87 3.166 2.852 0 5.668-.533 8.447-1.595l.315-.14c.138-.06.234-.1.293-.13.226-.088.39-.046.525.13.12.174.09.336-.12.48-.256.19-.6.41-1.006.654-1.244.743-2.64 1.316-4.185 1.726a17.617 17.617 0 01-10.951-.577 17.88 17.88 0 01-5.43-3.35c-.1-.074-.151-.15-.151-.22 0-.047.021-.09.051-.13zm6.565-6.218c0-1.005.247-1.863.743-2.577.495-.71 1.17-1.25 2.04-1.615.796-.335 1.756-.575 2.912-.72.39-.046 1.033-.103 1.92-.174v-.37c0-.93-.105-1.558-.3-1.875-.302-.43-.78-.65-1.44-.65h-.182c-.48.046-.896.196-1.246.46-.35.27-.575.63-.675 1.096-.06.3-.206.465-.435.51l-2.52-.315c-.248-.06-.372-.18-.372-.39 0-.046.007-.09.022-.15.247-1.29.855-2.25 1.82-2.88.976-.616 2.1-.975 3.39-1.05h.54c1.65 0 2.957.434 3.888 1.29.135.15.27.3.405.48.12.165.224.314.283.45.075.134.15.33.195.57.06.254.105.42.135.51.03.104.062.3.076.615.01.313.02.493.02.553v5.28c0 .376.06.72.165 1.036.105.313.21.54.315.674l.51.674c.09.136.136.256.136.36 0 .12-.06.226-.18.314-1.2 1.05-1.86 1.62-1.963 1.71-.165.135-.375.15-.63.045a6.062 6.062 0 01-.526-.496l-.31-.347a9.391 9.391 0 01-.317-.42l-.3-.435c-.81.886-1.603 1.44-2.4 1.665-.494.15-1.093.227-1.83.227-1.11 0-2.04-.343-2.76-1.034-.72-.69-1.08-1.665-1.08-2.94l-.05-.076zm3.753-.438c0 .566.14 1.02.425 1.364.285.34.675.512 1.155.512.045 0 .106-.007.195-.02.09-.016.134-.023.166-.023.614-.16 1.08-.553 1.424-1.178.165-.28.285-.58.36-.91.09-.32.12-.59.135-.8.015-.195.015-.54.015-1.005v-.54c-.84 0-1.484.06-1.92.18-1.275.36-1.92 1.17-1.92 2.43l-.035-.02zm9.162 7.027c.03-.06.075-.11.132-.17.362-.243.714-.41 1.05-.5a8.094 8.094 0 011.612-.24c.14-.012.28 0 .41.03.65.06 1.05.168 1.172.33.063.09.099.228.099.39v.15c0 .51-.149 1.11-.424 1.8-.278.69-.664 1.248-1.156 1.68-.073.06-.14.09-.197.09-.03 0-.06 0-.09-.012-.09-.044-.107-.12-.064-.24.54-1.26.806-2.143.806-2.64 0-.15-.03-.27-.087-.344-.145-.166-.55-.257-1.224-.257-.243 0-.533.016-.87.046-.363.045-.7.09-1 .135-.09 0-.148-.014-.18-.044-.03-.03-.036-.047-.02-.077 0-.017.006-.03.02-.063v-.06z\\\"/></svg>\"","export default \"__VITE_ASSET__99MNPCbu__\"","export default \"__VITE_ASSET__CrsehJcA__\"","export default \"data:image/png;base64,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\"","export default \"__VITE_ASSET__BLZOQSg___\"","export default \"__VITE_ASSET__DCoqmqOO__\"","export default \"__VITE_ASSET__B7uRQWw___\"","export default \"<svg role=\\\"img\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 24 24\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><title>Microsoft</title><path d=\\\"m2.5 2.5h9v9h-9zm9 19h-9v-9h9zm10-19v9h-9v-9zm0 19h-9v-9h9z\\\"/></svg>\\n\"","export default \"<svg role=\\\"img\\\" viewBox=\\\"0 0 24 24\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><title>Nintendo</title><path d=\\\"m4.447 12.546-1.202-1.942h-.864v2.793h.864v-1.942l1.202 1.942h.856v-2.793H4.44l.007 1.942Zm6.828-1.001v-.279h-.451v-.376h-.841v.376h-.458v.279h.458v1.852h.841v-1.852h.451Zm-5.491 1.844h.834v-1.852h-.834v1.852Zm0-2.213h.841v-.572h-.841v.572Zm14.663.233c-.676 0-1.224.467-1.224 1.039 0 .572.548 1.039 1.224 1.039.676 0 1.225-.467 1.225-1.039 0-.572-.549-1.039-1.225-1.039Zm.338 1.431c0 .293-.173.414-.338.414-.165 0-.346-.121-.346-.414v-.783c0-.294.173-.414.346-.414.165 0 .338.12.338.414v.783Zm-2.659-1.212a1.093 1.093 0 0 0-.473-.166c-.601-.053-1.067.482-1.067.971 0 .648.496.881.571.919.285.128.646.135.961-.068v.105h.827v-2.785h-.827c.008 0 .008.595.008 1.024Zm.008.828v.331c0 .286-.196.361-.331.361s-.331-.075-.331-.361v-.662c0-.287.196-.362.331-.362.128 0 .33.075.33.362v.331h.001Zm-9.556-1.001a1.02 1.02 0 0 0-.668.278v-.196h-.834v1.852h.834V12.17c0-.158.172-.339.398-.339.225 0 .383.181.383.339v1.219h.834v-1.008c0-.731-.631-.942-.947-.926Zm6.798 0a1.01 1.01 0 0 0-.668.278v-.196h-.834v1.852h.834V12.17c0-.158.173-.339.398-.339.225 0 .383.181.383.339v1.219h.834v-1.008c0-.731-.631-.942-.947-.926Zm-1.75 1.016c0-.572-.556-1.054-1.232-1.054-.683 0-1.232.467-1.232 1.039 0 .572.549 1.039 1.232 1.039.564 0 1.044-.324 1.187-.76h-.834v.112c0 .339-.225.414-.345.414-.128 0-.353-.075-.353-.413v-.385l1.577.008Zm-1.517-.655a.346.346 0 0 1 .293-.166c.112 0 .225.053.293.166.052.09.052.203.052.361h-.698c0-.158.007-.263.06-.361Zm9.893-.866c0-.09-.068-.135-.203-.135h-.188v.474h.113v-.196h.06l.09.196h.128l-.105-.211c.067-.022.105-.068.105-.128Zm-.218.068h-.06v-.136h.052c.068 0 .105.023.105.068 0 .053-.029.068-.097.068Zm.007-.392a.433.433 0 0 0-.428.43c0 .233.196.429.429.429a.429.429 0 0 0 0-.859h-.001Zm0 .776a.35.35 0 0 1-.345-.346.35.35 0 0 1 .346-.347.35.35 0 0 1 .345.347.35.35 0 0 1-.345.346h-.001Zm-.938-2.364H3.132C1.254 9.03 0 10.386 0 12.004s1.254 2.959 3.14 2.959h17.72c1.886 0 3.14-1.34 3.14-2.959-.007-1.618-1.269-2.966-3.147-2.966Zm-.008 5.202H3.14c-1.495.008-2.404-1.001-2.404-2.236 0-1.235.917-2.228 2.404-2.236h17.705c1.487 0 2.404 1.001 2.404 2.236 0 1.235-.909 2.236-2.404 2.236Z\\\"/></svg>\"","export default \"data:image/png;base64,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\"","export default \"<svg role=\\\"img\\\" viewBox=\\\"0 0 24 24\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><title>Twitter</title><path d=\\\"M21.543 7.104c.015.211.015.423.015.636 0 6.507-4.954 14.01-14.01 14.01v-.003A13.94 13.94 0 0 1 0 19.539a9.88 9.88 0 0 0 7.287-2.041 4.93 4.93 0 0 1-4.6-3.42 4.916 4.916 0 0 0 2.223-.084A4.926 4.926 0 0 1 .96 9.167v-.062a4.887 4.887 0 0 0 2.235.616A4.928 4.928 0 0 1 1.67 3.148 13.98 13.98 0 0 0 11.82 8.292a4.929 4.929 0 0 1 8.39-4.49 9.868 9.868 0 0 0 3.128-1.196 4.941 4.941 0 0 1-2.165 2.724A9.828 9.828 0 0 0 24 4.555a10.019 10.019 0 0 1-2.457 2.549z\\\"/></svg>\"","export default \"__VITE_ASSET__BV6AmmmG__\"","import levenshtein from 'js-levenshtein';\nimport { FaLock } from 'react-icons/fa';\nimport * as icons from 'simple-icons';\nimport { twJoin } from 'tailwind-merge';\n\nimport accrue from '../images/accrue.svg?raw';\nimport amazon from '../images/amazon.svg?raw';\nimport bastillion from '../images/bastillion.png';\nimport betterment from '../images/betterment.png';\nimport carta from '../images/carta.png';\nimport guideline from '../images/guideline.png';\nimport idme from '../images/id.me.png';\nimport justworks from '../images/justworks.jpg';\nimport microsoft from '../images/microsoft.svg?raw';\nimport nintendo from '../images/nintendo.svg?raw';\nimport sequoia from '../images/sequoia.png';\nimport twitter from '../images/twitter.svg?raw';\nimport uwcu from '../images/uwcu.png';\n\nenum IconType {\n  Icon = 'Icon',\n  Image = 'Image',\n}\n\ninterface Icon {\n  svg: string;\n  hex: string;\n  title: string;\n  type: IconType.Icon;\n  padding?: boolean | string;\n}\n\ninterface Image {\n  url: string;\n  padding?: boolean | string;\n  type: IconType.Image;\n}\n\nfunction getIcon(name?: string): Icon | Image | undefined {\n  if (!name) return undefined;\n\n  let icon = Object.entries(icons)\n    .filter(\n      (e) =>\n        name.toLowerCase().includes(e[1].title.toLowerCase()) &&\n        levenshtein(name.toLowerCase(), e[1].title.toLowerCase()) < name.length / 2\n    )\n    .sort((a, b) => {\n      return (\n        levenshtein(name.toLowerCase(), a[1].title.toLowerCase()) -\n        levenshtein(name.toLowerCase(), b[1].title.toLowerCase())\n      );\n    })[0];\n\n  // handle one-off cases\n  switch (name.toLowerCase()) {\n    case 'accrue':\n      return { svg: accrue, title: 'Accrue', hex: 'ffffff', padding: 'p-2', type: IconType.Icon };\n    case 'amazon':\n      return { svg: amazon, title: 'Amazon', hex: 'ff9900', padding: true, type: IconType.Icon };\n    case 'bastillion':\n      return { url: bastillion, padding: true, type: IconType.Image };\n    case 'betterment':\n      return { url: betterment, type: IconType.Image };\n    case 'carta':\n      return { url: carta, type: IconType.Image };\n    case 'facebook':\n      return { ...icons.siFacebook, padding: false, type: IconType.Icon };\n    case 'guideline':\n      return { url: guideline, type: IconType.Image };\n    case 'id.me':\n      return { url: idme, type: IconType.Image };\n    case 'justworks':\n      return { url: justworks, type: IconType.Image };\n    case 'microsoft':\n      return { svg: microsoft, title: 'Microsoft', hex: '727272', padding: 'p-1.5', type: IconType.Icon };\n    case 'nintendo':\n      return { svg: nintendo, title: 'Nintendo', hex: 'dd2020', padding: 'p-1', type: IconType.Icon };\n    case 'nas':\n    case 'synology':\n      return { ...icons.siSynology, padding: 'p-1.5', type: IconType.Icon };\n    case 'uw credit union':\n    case 'uwcu':\n      return { url: uwcu, padding: true, type: IconType.Image };\n    case 'sequoia':\n      return { url: sequoia, padding: true, type: IconType.Image };\n    case 'twitter':\n      return { svg: twitter, title: 'Twitter', hex: '00aced', padding: true, type: IconType.Icon };\n    default:\n      break;\n  }\n\n  return icon ? { ...icon[1], type: IconType.Icon, padding: true } : undefined;\n}\n\nconst darkColor = 'bg-slate-900';\nconst lightColor = 'bg-slate-800';\nfunction getColors(i?: Icon | Image): { background: string; fill?: string } {\n  if (!i || i.type === IconType.Image) return { background: darkColor, fill: lightColor };\n\n  const icon = i as Icon;\n  let background = darkColor;\n  let fill = '#' + icon.hex;\n\n  // handle one-off cases\n  switch (icon.title.toLowerCase()) {\n    case 'epic games':\n      fill = 'white';\n      break;\n    case 'github':\n    case 'patreon':\n    case 'ubisoft':\n      background = 'bg-slate-100';\n      break;\n  }\n\n  return { background, fill };\n}\n\nexport function AppIcon({ name, className }: { name: string; className?: string }) {\n  const icon = getIcon(name);\n\n  const colors = getColors(icon);\n\n  const imgClass =\n    'w-12 h-12 rounded-full border border-slate-400 flex justify-center items-center aspect-square ' +\n    colors.background +\n    ' ' +\n    className;\n\n  if (!icon) {\n    console.warn(`No icon found for ${name}`);\n    return (\n      <div className={imgClass}>\n        <FaLock />\n      </div>\n    );\n  }\n\n  const padding = typeof icon.padding === 'string' ? icon.padding : undefined;\n\n  if (icon.type === IconType.Image)\n    return <img src={icon.url} className={twJoin(imgClass, 'object-cover', padding || (icon.padding && 'p-1'))} />;\n\n  return (\n    <div\n      dangerouslySetInnerHTML={{ __html: icon.svg }}\n      className={twJoin(imgClass, padding || (icon.padding ? 'p-2.5' : 'p-0.5'))}\n      style={{ fill: colors.fill }}\n    />\n  );\n}\n","import { IDetectedBarcode, Scanner } from '@yudiel/react-qr-scanner';\nimport { FaTimes } from 'react-icons/fa';\nimport { toast } from 'react-toastify';\n\nexport function QR({ close, onScan }: { close: () => void; onScan: (name: string, secret: string) => void }) {\n  return (\n    <div className=\"absolute inset-0 w-screen h-screen bg-black flex justify-center z-10\">\n      <div className=\"relative w-[100vh] p-2\">\n        <div className=\"absolute bottom-14 right-0 left-0 z-10 flex justify-center\">\n          <button className=\"icon\" onClick={close}>\n            <FaTimes />\n          </button>\n        </div>\n        <Scanner\n          sound={false}\n          onScan={async (detectedCodes: IDetectedBarcode[]) => {\n            const text = detectedCodes[0]?.rawValue;\n            if (!text) return;\n\n            try {\n              const url = new URL(text);\n\n              const name = decodeURIComponent(url.pathname.replace('//totp/', '')).split(':')[0];\n              const secret = url.searchParams.get('secret');\n\n              if (url.protocol !== 'otpauth:' || !name || !secret) throw new Error(`Invalid URL: ${url.toString()}`);\n\n              onScan(name, secret);\n              close();\n            } catch (err) {\n              console.error(err);\n              toast.error('Failed to scan qr code');\n            }\n          }}\n          onError={(error) => console.error(error)}\n        />\n      </div>\n    </div>\n  );\n}\n","// Function from https://usehooks-ts.com/react-hook/use-copy-to-clipboard\nimport { useCallback, useState } from 'react';\n\ntype CopiedValue = string | null;\n\ntype CopyFn = (text: string) => Promise<boolean>;\n\nexport function useCopyToClipboard(): [CopyFn, CopiedValue] {\n  const [copiedText, setCopiedText] = useState<CopiedValue>(null);\n\n  const copy: CopyFn = useCallback(async (text) => {\n    if (!navigator?.clipboard) {\n      console.warn('Clipboard not supported');\n      return false;\n    }\n\n    // Try to save to clipboard then save it in the state if worked\n    try {\n      await navigator.clipboard.writeText(text);\n      setCopiedText(text);\n      return true;\n    } catch (error) {\n      console.warn('Copy failed', error);\n      setCopiedText(null);\n      return false;\n    }\n  }, []);\n\n  return [copy, copiedText];\n}\n","import { useEffect, useState } from 'react';\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = useState(false);\n\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 500);\n    };\n\n    handleResize();\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  return isMobile;\n}\n","import { decrypt } from '@metamask/browser-passworder';\nimport { DocumentReference, arrayRemove, arrayUnion, updateDoc } from 'firebase/firestore';\nimport { useCallback, useContext, useEffect, useMemo, useState } from 'react';\nimport { FaArchive, FaTimes } from 'react-icons/fa';\nimport { toast } from 'react-toastify';\nimport { twJoin } from 'tailwind-merge';\nimport { TOTP } from 'totp-generator';\n\nimport { CodeContext } from '../contexts/CodeContext';\nimport { useCopyToClipboard } from '../hooks/useCopyToClipboard';\nimport { useIsMobile } from '../hooks/useIsMobile';\nimport { useOnHold } from '../hooks/useOnHold';\nimport { Key } from '../hooks/useUserData';\nimport { AppIcon } from './AppIcon';\n\nenum HiddenType {\n  Hidden,\n  FirstVisible,\n  Visible,\n}\n\nexport const secretCache = new Map<string, string>();\n\nexport function TokenCard({\n  data,\n  userRef,\n  timestamp,\n  onEdit,\n  setEditMode,\n  editMode,\n  addRecentKey,\n}: {\n  data: Key;\n  userRef: DocumentReference;\n  timestamp: Date;\n  onEdit: () => void;\n  setEditMode: (value: boolean) => void;\n  editMode: boolean;\n  addRecentKey: (name: string) => void;\n}) {\n  const encryptionToken = useContext(CodeContext) || '';\n  const [secret, setSecret] = useState(secretCache.get(data.name) || '');\n  const [hidden, setHidden] = useState<HiddenType>(HiddenType.Hidden);\n  const [token, setToken] = useState('Token Error');\n  const isMobile = useIsMobile();\n  const [copy] = useCopyToClipboard();\n\n  const onClick = useCallback(() => {\n    if (editMode) onEdit();\n    else if (hidden === HiddenType.Hidden) setHidden(HiddenType.FirstVisible);\n    else copyToken();\n  }, [editMode, hidden]);\n\n  const bindHold = useOnHold(() => setEditMode(!editMode), onClick);\n\n  useEffect(() => {\n    if (secret.length > 0) setHidden(HiddenType.Visible);\n  }, []);\n\n  useEffect(() => {\n    if (hidden === HiddenType.Hidden) return;\n\n    if (secretCache.has(data.name)) {\n      setSecret(secretCache.get(data.name) || '');\n      return;\n    }\n\n    decrypt(encryptionToken, data.secret)\n      .then((decrypted) => {\n        setSecret((decrypted as { secret: string }).secret);\n        secretCache.set(data.name, (decrypted as { secret: string }).secret);\n      })\n      .catch((err) => {\n        console.error(err);\n        setSecret('Error');\n        secretCache.delete(data.name);\n      });\n  }, [data.secret, encryptionToken, hidden]);\n\n  useEffect(() => {\n    let timeout: NodeJS.Timeout;\n\n    // Hide code shortly after revealed\n    if (hidden !== HiddenType.Hidden) {\n      timeout = setTimeout(() => {\n        setHidden(HiddenType.Hidden);\n      }, 30 * 1000);\n    }\n\n    return () => {\n      if (timeout) clearTimeout(timeout);\n    };\n  }, [hidden]);\n\n  const timeChunk = Math.floor(timestamp.getTime() / 30000);\n\n  useEffect(() => {\n    if (secret.length === 0 || secret === 'Error' || hidden === HiddenType.Hidden) {\n      setToken('Token Error');\n      return;\n    }\n\n    TOTP.generate(secret.replace(/\\s+/g, ''), { timestamp: timeChunk * 30000 })\n      .then(({ otp }) => setToken(otp))\n      .catch((err) => {\n        console.error(err);\n        setToken('Token Error');\n      });\n  }, [secret, timeChunk, hidden]);\n\n  const copyToken = useCallback(() => {\n    copy(token).then((result) => {\n      if (result && token !== 'Token Error') toast.success(data.name + ' code copied', { autoClose: 2500 });\n      else toast.error('Failed to copy code', { autoClose: 2500 });\n    });\n    addRecentKey(data.name);\n  }, [token, data, isMobile, copy]);\n\n  useEffect(() => {\n    if (hidden === HiddenType.FirstVisible && token !== 'Token Error') {\n      copyToken();\n      setHidden(HiddenType.Visible);\n    }\n  }, [hidden, token]);\n\n  if (data.archived && !editMode) return null;\n\n  return (\n    <div\n      className={twJoin(\n        'p-3 bg-slate-800 border border-slate-700 rounded-md select-none flex gap-6 justify-between items-center hover:brightness-[90%] relative cursor-pointer transition-all rotate-0',\n        editMode && 'animate-wiggle',\n        data.archived && 'opacity-50'\n      )}\n      style={{ animationDelay: `${Math.random() * 250}ms` }}\n      tabIndex={0}\n      {...bindHold()}\n      onKeyDown={(e) => {\n        if (e.key === 'Enter' || e.key === ' ') onClick();\n      }}\n    >\n      <div className=\"flex gap-4\">\n        <AppIcon name={data.name} />\n        <div className=\"flex flex-col items-start justify-center\">\n          <h2 className=\"font-bold capitalize\">{data.name}</h2>\n          <div>\n            {hidden === HiddenType.Hidden ? (\n              '*** ***'\n            ) : secret.length === 0 ? (\n              'Decrypting...'\n            ) : token === 'Token Error' ? (\n              'Token Error'\n            ) : (\n              <>\n                <span className=\"mr-2\">{token.slice(0, 3)}</span>\n                <span>{token.slice(3, 6)}</span>\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n\n      <button\n        className=\"remove absolute -top-3 right-6 !p-1 text-slate-800 bg-white border border-slate-400 rounded-full sm:hover:bg-warning transition-all duration-300\"\n        style={{ pointerEvents: editMode ? 'auto' : 'none', opacity: editMode ? 1 : 0 }}\n        tabIndex={editMode ? 0 : -1}\n        onClick={async (e) => {\n          e.stopPropagation();\n\n          const confirm = window.confirm(\n            `Are you sure you want to ${data.archived ? 'unarchive' : 'archive'} ${data.name}?`\n          );\n          if (confirm) {\n            // Remove old key\n            await updateDoc(userRef, {\n              keys: arrayRemove({ name: data.name, secret: data.secret, archived: data.archived }),\n            });\n\n            // Add new key with updated archived status\n            await updateDoc(userRef, {\n              keys: arrayUnion({ name: data.name, secret: data.secret, archived: !data.archived }),\n            });\n          }\n        }}\n        onMouseDown={(e) => e.stopPropagation()}\n        onTouchStart={(e) => e.stopPropagation()}\n        onPointerDown={(e) => e.stopPropagation()}\n      >\n        <FaArchive />\n      </button>\n\n      <button\n        className=\"remove absolute -top-3 -right-3 !p-1 text-slate-800 bg-white border border-slate-400 rounded-full hover:text-white sm:hover:bg-danger transition-all duration-300\"\n        style={{ pointerEvents: editMode ? 'auto' : 'none', opacity: editMode ? 1 : 0 }}\n        tabIndex={editMode ? 0 : -1}\n        onClick={(e) => {\n          e.stopPropagation();\n\n          const confirm = window.confirm(`Are you sure you want to remove ${data.name}? This cannot be undone!`);\n          if (confirm) {\n            const confirm2 = window.confirm(`Are you really sure you want to delete ${data.name}?`);\n            if (confirm2) updateDoc(userRef, { keys: arrayRemove(data) });\n          }\n        }}\n        onMouseDown={(e) => e.stopPropagation()}\n        onTouchStart={(e) => e.stopPropagation()}\n        onPointerDown={(e) => e.stopPropagation()}\n      >\n        <FaTimes />\n      </button>\n    </div>\n  );\n}\n","import { decrypt, encrypt } from '@metamask/browser-passworder';\nimport { DocumentReference, arrayRemove, arrayUnion, updateDoc } from 'firebase/firestore';\nimport { useContext, useEffect, useState } from 'react';\nimport { FaEye, FaEyeSlash, FaQrcode } from 'react-icons/fa';\nimport { toast } from 'react-toastify';\n\nimport { CodeContext } from '../contexts/CodeContext';\nimport { AppIcon } from './AppIcon';\nimport { QR } from './QR';\nimport { secretCache } from './TokenCard';\n\ninterface EditKeyProps {\n  name?: string;\n  secret?: string;\n  archived?: boolean;\n  userRef: DocumentReference;\n  close: () => void;\n}\n\nexport function EditKey(props: EditKeyProps) {\n  const [name, setName] = useState(props.name || '');\n  const [secret, setSecret] = useState('');\n  const [scan, setScan] = useState(false);\n  const [masked, setMasked] = useState(true);\n  const [updating, setUpdating] = useState(false);\n  const [decrypting, setDecrypting] = useState(false);\n\n  const token = useContext(CodeContext) || '';\n\n  const editing = props.name || props.secret;\n\n  useEffect(() => {\n    if (props.name && props.secret) {\n      if (secretCache.has(props.name)) {\n        setSecret(secretCache.get(props.name)!);\n        return;\n      }\n\n      setDecrypting(true);\n      decrypt(token, props.secret)\n        .then((decrypted) => {\n          setSecret((decrypted as { secret: string }).secret);\n        })\n        .catch((err) => {\n          console.error(err);\n          toast.error('Failed to decrypt token.', { autoClose: 2500 });\n          props.close();\n        })\n        .finally(() => setDecrypting(false));\n    }\n  }, []);\n\n  const addKey = async (name: string, secret: string) => {\n    if (name === '' || secret === '') {\n      toast.error('Name and secret are required');\n      return;\n    }\n\n    if (editing && props.name === name && props.secret === secret) {\n      props.close();\n      return;\n    }\n\n    try {\n      setUpdating(true);\n      if (editing) {\n        await updateDoc(props.userRef, {\n          keys: arrayRemove({ name: props.name, secret: props.secret, archived: props.archived }),\n        });\n        if (props.name) secretCache.delete(props.name);\n      }\n\n      const encryptedSecret = await encrypt(token, { secret });\n      await updateDoc(props.userRef, {\n        keys: arrayUnion({ name, secret: encryptedSecret, archived: props.archived }),\n      });\n      setName('');\n      setSecret('');\n      setMasked(true);\n      props.close();\n    } catch (err) {\n      console.error(err);\n      toast.error('Failed to add key');\n    } finally {\n      setUpdating(false);\n    }\n  };\n\n  return (\n    <>\n      <div\n        className=\"flex flex-col gap-8\"\n        onKeyDown={(e) => {\n          if (e.key === 'Enter') addKey(name, secret);\n        }}\n      >\n        <div className=\"flex gap-4 items-center\">\n          <AppIcon name={name} className=\"w-14 h-14 sm:w-16 sm:h-16\" />\n          <div className=\"flex flex-col gap-3 w-full\">\n            <input\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              placeholder=\"Site name\"\n              autoFocus\n              autoComplete=\"false\"\n              type=\"text\"\n            />\n\n            <div className=\"relative\">\n              <input\n                value={secret}\n                onChange={(e) => setSecret(e.target.value)}\n                placeholder={decrypting ? 'Decrypting' : 'Secret'}\n                autoComplete=\"false\"\n                type={masked ? 'password' : 'text'}\n                disabled={decrypting}\n              />\n              <button\n                className=\"absolute right-0 top-0 bottom-0 flex items-center cursor-pointer bg-transparent\"\n                onClick={() => setMasked(!masked)}\n              >\n                {masked ? <FaEyeSlash /> : <FaEye />}\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"flex gap-4\">\n          {!editing && (\n            <button onClick={() => setScan(true)}>\n              <FaQrcode />\n            </button>\n          )}\n          <button onClick={() => addKey(name, secret)} className=\"flex-1\" disabled={updating}>\n            {updating ? (editing ? 'Saving' : 'Adding') : editing ? 'Save' : 'Add'}\n          </button>\n        </div>\n      </div>\n\n      {scan && (\n        <QR\n          close={() => setScan(false)}\n          onScan={(name, secret) => {\n            setName(name);\n            setSecret(secret);\n          }}\n        />\n      )}\n    </>\n  );\n}\n","import { JSX } from 'react';\nimport { FaTimes } from 'react-icons/fa';\n\nexport function Modal({\n  onClose,\n  title,\n  children,\n}: {\n  onClose: () => void;\n  title: string;\n  children: JSX.Element;\n}): JSX.Element {\n  return (\n    <div\n      className=\"fixed z-30 inset-0 bg-slate-900 bg-opacity-75 flex justify-center items-center backdrop-blur-sm\"\n      onClick={onClose}\n      onKeyDown={(e) => {\n        if (e.key === 'Escape') {\n          onClose();\n        }\n      }}\n    >\n      <div\n        className=\"bg-slate-700 rounded-lg p-8 w-full\"\n        onClick={(e) => e.stopPropagation()}\n        style={{ marginTop: 'calc(-1 * env(keyboard-inset-height))', maxWidth: 'min(80vw, 600px)' }}\n      >\n        <div className=\"flex items-center mb-8\">\n          <h2 className=\"flex-1 text-xl font-medium\">{title}</h2>\n          <button onClick={onClose} className=\"px-2 bg-slate-600 border-2 border-slate-800\">\n            <FaTimes />\n          </button>\n        </div>\n\n        {children}\n      </div>\n    </div>\n  );\n}\n","import { DocumentReference, updateDoc } from 'firebase/firestore';\nimport { useCallback, useContext, useEffect, useState } from 'react';\nimport { FaSearch } from 'react-icons/fa';\nimport { twMerge } from 'tailwind-merge';\nimport { useTailwindSize } from '~hooks/useTailwindSize';\n\nimport { CodeContext } from '../contexts/CodeContext';\nimport { useRefreshTimer } from '../hooks/useRefreshTimer';\nimport { Key, UserData } from '../hooks/useUserData';\nimport logo from '../images/logo.png';\nimport { EditKey } from './EditKey';\nimport { Modal } from './Modal';\nimport { TokenCard } from './TokenCard';\n\nexport function TokenList({\n  userData,\n  userRef,\n  editMode,\n  setEditMode,\n  editKey,\n  setEditKey,\n  lock,\n}: {\n  userData: UserData;\n  userRef: DocumentReference;\n  editMode: boolean;\n  setEditMode: (value: boolean) => void;\n  editKey: boolean;\n  setEditKey: (value: boolean) => void;\n  lock: () => void;\n}) {\n  const { timestamp } = useRefreshTimer();\n  const size = useTailwindSize();\n\n  const encryptionToken = useContext(CodeContext) || '';\n\n  const [search, setSearch] = useState('');\n  const [searchFocused, setSearchFocused] = useState(false);\n  const [keyToEdit, setKeyToEdit] = useState<Key>();\n\n  useEffect(() => {\n    return () => {\n      setEditMode(false);\n      setEditKey(false);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (editMode && navigator.vibrate) navigator.vibrate(200);\n  }, [editMode]);\n\n  const addRecentKey = useCallback(\n    async (name: string) => {\n      const totalKeys = 4;\n\n      let recentKeys = [...(userData.recentKeys || [])];\n\n      // Remove existing key if it is already in list\n      if (recentKeys.includes(name)) {\n        recentKeys = recentKeys.filter((key) => key !== name);\n      }\n\n      // Add new key to front of list\n      recentKeys.unshift(name);\n\n      // Limit list to total keys count\n      if (recentKeys.length > totalKeys) {\n        recentKeys = recentKeys.slice(0, totalKeys);\n      }\n\n      if (JSON.stringify(recentKeys) !== JSON.stringify(userData.recentKeys)) {\n        await updateDoc(userRef, { recentKeys });\n      }\n    },\n    [userData.recentKeys, userRef]\n  );\n\n  const onEdit = useCallback(\n    (key: Key) => {\n      setEditKey(true);\n      setKeyToEdit({ name: key.name, secret: key.secret, archived: key.archived });\n    },\n    [encryptionToken, setEditKey, setKeyToEdit]\n  );\n\n  const gridClass =\n    'w-full grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6 transition-all';\n\n  return (\n    <>\n      <div className=\"flex flex-col gap-4 m-6 sm:m-8 items-center pb-24\">\n        {userData.keys?.length === 0 ? (\n          <div className=\"text-center text-lg bg-slate-800 p-8 w-full rounded-md\">No keys added yet</div>\n        ) : (\n          <div className=\"w-full max-w-screen-lg\">\n            <div className=\"flex gap-4 sm:gap-6 items-center mb-10\">\n              <button onClick={lock} className=\"p-0 bg-transparent\" title=\"Lock\">\n                <img src={logo} className=\"h-10 aspect-square object-contain -mb-0.5\" />\n              </button>\n\n              <div className=\"relative w-full\">\n                <input\n                  className=\"pl-10\"\n                  type=\"search\"\n                  value={search}\n                  placeholder=\"Search tokens\"\n                  onChange={(e) => setSearch(e.target.value)}\n                  autoFocus={process.env.NODE_ENV !== 'development'}\n                  onFocus={() => setSearchFocused(true)}\n                  onBlur={() => setSearchFocused(false)}\n                />\n                <FaSearch className=\"fill-slate-400 absolute left-3 top-[11px] h-4\" />\n              </div>\n            </div>\n\n            {userData.recentKeys.length > 0 && search.length === 0 && (\n              <div\n                className={twMerge(\n                  'grid gap-4 sm:gap-6 mb-4 sm:mb-6 transition-all',\n                  searchFocused && 'opacity-50 blur-sm'\n                )}\n              >\n                <h2 className=\"m-0 text-xl leading-none\">Recently Used</h2>\n                <div className={gridClass}>\n                  {userData.recentKeys.slice(0, size === 'sm' || size === 'lg' ? 3 : 4).map((name: string) => {\n                    const key = userData.keys.find((k) => k.name === name);\n                    if (key)\n                      return (\n                        <TokenCard\n                          key={key.name + key.secret}\n                          data={key}\n                          userRef={userRef}\n                          timestamp={timestamp}\n                          onEdit={() => onEdit(key)}\n                          setEditMode={setEditMode}\n                          editMode={editMode}\n                          addRecentKey={addRecentKey}\n                        />\n                      );\n                  })}\n                </div>\n                <hr className=\"border-slate-700\" />\n              </div>\n            )}\n\n            <div className={twMerge(gridClass, searchFocused && search.length === 0 && 'opacity-50 blur-sm')}>\n              {userData.keys\n                .filter(\n                  (k) => (search.length === 0 || k.name.toLowerCase().includes(search.toLowerCase())) && !k.archived\n                )\n                .sort((a, b) => a.name.localeCompare(b.name))\n                .map((key: Key) => (\n                  <TokenCard\n                    key={key.name + key.secret}\n                    data={key}\n                    userRef={userRef}\n                    timestamp={timestamp}\n                    onEdit={() => onEdit(key)}\n                    setEditMode={setEditMode}\n                    editMode={editMode}\n                    addRecentKey={addRecentKey}\n                  />\n                ))}\n            </div>\n\n            {editMode && (\n              <div className=\"mt-4 pt-4 sm:mt-6 sm:pt-6 border-t-2 border-slate-700\">\n                <h2 className=\"mb-4 sm:mb-6 text-xl leading-none\">Archived Tokens</h2>\n                <div className={gridClass}>\n                  {userData.keys\n                    .filter(\n                      (k) => (search.length === 0 || k.name.toLowerCase().includes(search.toLowerCase())) && k.archived\n                    )\n                    .sort((a, b) => a.name.localeCompare(b.name))\n                    .map((key: Key) => (\n                      <TokenCard\n                        key={key.name + key.secret}\n                        data={key}\n                        userRef={userRef}\n                        timestamp={timestamp}\n                        onEdit={() => onEdit(key)}\n                        setEditMode={setEditMode}\n                        editMode={editMode}\n                        addRecentKey={addRecentKey}\n                      />\n                    ))}\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n\n      {editKey && (\n        <Modal\n          title={keyToEdit?.name || keyToEdit?.secret ? 'Edit existing key' : 'Add a new key'}\n          onClose={() => {\n            setEditKey(false);\n            setKeyToEdit(undefined);\n          }}\n        >\n          <EditKey\n            name={keyToEdit?.name}\n            secret={keyToEdit?.secret}\n            archived={keyToEdit?.archived || false}\n            userRef={userRef}\n            close={() => {\n              setEditKey(false);\n              setKeyToEdit(undefined);\n            }}\n          />\n        </Modal>\n      )}\n    </>\n  );\n}\n","import { encrypt } from '@metamask/browser-passworder';\nimport { User } from 'firebase/auth';\nimport { setDoc, updateDoc } from 'firebase/firestore';\nimport { useEffect, useState } from 'react';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { FaBroadcastTower } from 'react-icons/fa';\nimport { toast } from 'react-toastify';\nimport { twMerge } from 'tailwind-merge';\nimport { useLockTimer } from '~hooks/useLockTimer';\nimport { useMigrateData } from '~hooks/useMigrateData';\n\nimport { CodeContext } from '../contexts/CodeContext';\nimport { useOnline } from '../hooks/useOnline';\nimport { useServiceWorker } from '../hooks/useServiceWorker';\nimport { useUserData } from '../hooks/useUserData';\nimport { auth } from '../util/firebase';\nimport { exportKeys, importKeys } from '../util/keys';\nimport { Lock } from './Lock/Lock';\nimport { Login } from './Login';\nimport { LogoPage } from './Logo';\nimport { Menu } from './Menu';\nimport { Progress } from './Progress';\nimport { TokenList } from './TokenList';\n\nexport function App() {\n  const [user, loading, error] = useAuthState(auth);\n  useServiceWorker();\n\n  if (loading || error) return <LogoPage>{error && <p>Error: {error.message}</p>}</LogoPage>;\n\n  if (!user)\n    return (\n      <LogoPage>\n        <Login />\n      </LogoPage>\n    );\n  return <Authorized user={user} />;\n}\n\nasync function promptPin(token?: string): Promise<string | undefined> {\n  let code = '';\n  let tries = 0;\n  while (code.length !== 6 && tries < 3) {\n    code = prompt('Set a new 6 digit pin') || '';\n    tries++;\n  }\n  if (code.length === 6) {\n    const newCode = prompt('Re-enter 6 digit pin') || '';\n    if (newCode !== code) {\n      toast.error('Pins do not match');\n      return;\n    }\n  }\n\n  if (code.length === 6) {\n    if (!token) {\n      token = crypto.getRandomValues(new Uint32Array(32)).toString();\n    }\n\n    try {\n      const blob = await encrypt(code, { token });\n      return blob;\n    } catch (err) {\n      console.error(err);\n    }\n  }\n}\n\nfunction OnlineStatus({ className }: { className?: string }) {\n  const [toastShown, setToastShown] = useState(false);\n  const online = useOnline();\n\n  const warning =\n    'It looks like you are currently offline. It is not recommend to add/edit keys offline to avoid sync conflicts.';\n\n  useEffect(() => {\n    if (!online && !toastShown) {\n      toast.error(warning, {\n        autoClose: 5000,\n      });\n      setToastShown(true);\n    }\n  }, [online, toastShown]);\n\n  if (online) return null;\n  return (\n    <FaBroadcastTower\n      className={twMerge('text-danger fixed bottom-2 left-2 text-2xl z-20 ' + className)}\n      title={warning}\n    />\n  );\n}\n\nfunction Authorized({ user }: { user: User }) {\n  const { data, loading, error, userRef } = useUserData();\n\n  const [token, setToken] = useState<string>();\n  const [editMode, setEditMode] = useState(false);\n  const [editKey, setEditKey] = useState(false);\n\n  useMigrateData(userRef, data);\n  useLockTimer(setToken);\n\n  useEffect(() => {\n    if (!loading && !error && !data) {\n      promptPin().then((code) => {\n        if (code) setDoc(userRef, { keys: [], recentKeys: [], email: user.email || '', code, webauthn: [] });\n        else toast.error('Failed to create user');\n      });\n    }\n  }, [data, loading, error]);\n\n  const updatePin = async () => {\n    if (!confirm('Would you like to update your pin?')) return;\n    const code = await promptPin(token);\n\n    if (code) updateDoc(userRef, { code });\n    else toast.error('Failed to update pin');\n  };\n\n  if (loading || error || !data)\n    return (\n      <LogoPage>\n        {error && <p>Error: {error.message}</p>}\n        {!data && <p>No data</p>}\n      </LogoPage>\n    );\n\n  if (!token)\n    return (\n      <>\n        <OnlineStatus className=\"!bottom-4 !left-4 top-auto\" />\n        <Lock unlock={(code) => setToken(code)} encryptedCode={data?.code!} data={data} userRef={userRef} />\n      </>\n    );\n\n  return (\n    <CodeContext.Provider value={token}>\n      <OnlineStatus />\n      <TokenList\n        userData={data}\n        userRef={userRef}\n        editMode={editMode}\n        setEditMode={setEditMode}\n        editKey={editKey}\n        setEditKey={setEditKey}\n        lock={() => setToken(undefined)}\n      />\n      <Progress />\n      <Menu\n        lock={() => setToken(undefined)}\n        updateCode={updatePin}\n        editMode={editMode}\n        setEditKey={setEditKey}\n        setEditMode={setEditMode}\n        exportKeys={() => exportKeys(token, data)}\n        importKeys={() => importKeys(token, data, userRef)}\n      />\n    </CodeContext.Provider>\n  );\n}\n","import { Buffer } from 'buffer';\nimport { StrictMode } from 'react';\nimport { createRoot } from 'react-dom/client';\nimport { ToastContainer, Zoom } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { registerSW } from 'virtual:pwa-register';\n\nimport { App } from './components/App';\n\n// Fixes for browser-passworder\nwindow.global ||= window;\nglobalThis.Buffer = Buffer;\n\n// If a pwa on desktop, resize window a bit smaller\nconst isBrowser = matchMedia('(display-mode: browser)').matches;\nif (!isBrowser) {\n  window.resizeTo(500, 760);\n}\n\n// Enable virtual keyboard api\nconst nav = navigator as any;\nif (nav.virtualKeyboard) nav.virtualKeyboard.overlaysContent = true;\n\nfunction Container() {\n  return (\n    <>\n      <App />\n      <ToastContainer\n        theme=\"dark\"\n        position=\"bottom-center\"\n        transition={Zoom}\n        hideProgressBar\n        closeButton={false}\n        autoClose={5000}\n      />\n    </>\n  );\n}\n\ncreateRoot(document.getElementById('root')!).render(<Container />);\n"],"file":"index-CEJF1fxQ.js"}